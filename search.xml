<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[cocoapodsç»“æž„è§£æž]]></title>
    <url>%2F2020%2F09%2F20%2Fcocoapods%E7%BB%93%E6%9E%84%E8%A7%A3%E6%9E%90%2F</url>
    <content type="text"><![CDATA[CocoaPodsæ˜¯ç”¨ Ruby å†™çš„ï¼Œå¹¶ç”±è‹¥å¹²ä¸ª Ruby åŒ… (gems) æž„æˆçš„ã€‚åœ¨è§£æžæ•´åˆè¿‡ç¨‹ä¸­ï¼Œæœ€é‡è¦çš„å‡ ä¸ª gems åˆ†åˆ«æ˜¯ï¼š CocoaPods/CocoaPods, CocoaPods/Core, å’Œ CocoaPods/Xcodeproj (æ˜¯çš„ï¼ŒCocoaPods æ˜¯ä¸€ä¸ªä¾èµ–ç®¡ç†å·¥å…· â€“ åˆ©ç”¨ä¾èµ–ç®¡ç†è¿›è¡Œæž„å»ºçš„ï¼)ã€‚podspecså­˜å‚¨è·¯å¾„ï¼š~/.cocoapodsç¼“å­˜æ–‡ä»¶å­˜å‚¨è·¯å¾„ï¼š~/Library/Caches/CocoaPods æ ¸å¿ƒç»„ä»¶CocoaPods/CocoaPodè¿™æ˜¯æ˜¯ä¸€ä¸ªé¢å‘ç”¨æˆ·çš„ç»„ä»¶ï¼Œæ¯å½“æ‰§è¡Œä¸€ä¸ª pod å‘½ä»¤æ—¶ï¼Œè¿™ä¸ªç»„ä»¶éƒ½å°†è¢«æ¿€æ´»ã€‚è¯¥ç»„ä»¶åŒ…æ‹¬äº†æ‰€æœ‰ä½¿ç”¨ CocoaPods æ¶‰åŠåˆ°çš„åŠŸèƒ½ï¼Œå¹¶ä¸”è¿˜èƒ½é€šè¿‡è°ƒç”¨æ‰€æœ‰å…¶å®ƒçš„ gems æ¥æ‰§è¡Œä»»åŠ¡ã€‚ CocoaPods/CoreCore ç»„ä»¶æä¾›æ”¯æŒä¸Ž CocoaPods ç›¸å…³æ–‡ä»¶çš„å¤„ç†ï¼Œæ–‡ä»¶ä¸»è¦æ˜¯ Podfile å’Œ podspecsã€‚ Podfileï¼šPodfile æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œç”¨äºŽå®šä¹‰é¡¹ç›®æ‰€éœ€è¦ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹åº“ã€‚è¯¥æ–‡ä»¶æ”¯æŒé«˜åº¦å®šåˆ¶ï¼Œä½ å¯ä»¥æ ¹æ®ä¸ªäººå–œå¥½å¯¹å…¶åšå‡ºå®šåˆ¶ã€‚æ›´å¤šç›¸å…³ä¿¡æ¯ï¼Œè¯·æŸ¥é˜… Podfile æŒ‡å—ã€‚ Podspecï¼š.podspec ä¹Ÿæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶æè¿°äº†ä¸€ä¸ªåº“æ˜¯æ€Žæ ·è¢«æ·»åŠ åˆ°å·¥ç¨‹ä¸­çš„ã€‚å®ƒæ”¯æŒçš„åŠŸèƒ½æœ‰ï¼šåˆ—å‡ºæºæ–‡ä»¶ã€frameworkã€ç¼–è¯‘é€‰é¡¹å’ŒæŸä¸ªåº“æ‰€éœ€è¦çš„ä¾èµ–ç­‰ã€‚ CocoaPods/Xcodeprojè¿™ä¸ª gem ç»„ä»¶è´Ÿè´£æ‰€æœ‰å·¥ç¨‹æ–‡ä»¶çš„æ•´åˆã€‚å®ƒèƒ½å¤Ÿå¯¹åˆ›å»ºå¹¶ä¿®æ”¹ .xcodeproj å’Œ .xcworkspace æ–‡ä»¶ã€‚å®ƒä¹Ÿå¯ä»¥ä½œä¸ºå•ç‹¬çš„ä¸€ä¸ª gem åŒ…ä½¿ç”¨ã€‚å¦‚æžœä½ æƒ³è¦å†™ä¸€ä¸ªè„šæœ¬æ¥æ–¹ä¾¿çš„ä¿®æ”¹å·¥ç¨‹æ–‡ä»¶ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨è¿™ä¸ª gemã€‚ è¿è¡Œ pod install å‘½ä»¤å½“è¿è¡Œ pod install å‘½ä»¤æ—¶ä¼šå¼•å‘è®¸å¤šæ“ä½œã€‚è¦æƒ³æ·±å…¥äº†è§£è¿™ä¸ªå‘½ä»¤æ‰§è¡Œçš„è¯¦ç»†å†…å®¹ï¼Œå¯ä»¥åœ¨è¿™ä¸ªå‘½ä»¤åŽé¢åŠ ä¸Š â€“verboseã€‚è¿è¡ŒæŒ‡ä»¤åŽä¼šæœ‰å¦‚ä¸‹æ“ä½œï¼š è¯»å–Podfileæ–‡ä»¶åœ¨å®‰è£…æœŸé—´ï¼Œç¬¬ä¸€æ­¥æ˜¯è¦å¼„æ¸…æ¥šæ˜¾ç¤ºæˆ–éšå¼çš„å£°æ˜Žäº†å“ªäº›ç¬¬ä¸‰æ–¹åº“ã€‚åœ¨åŠ è½½ podspecs è¿‡ç¨‹ä¸­ï¼ŒCocoaPods å°±å»ºç«‹äº†åŒ…æ‹¬ç‰ˆæœ¬ä¿¡æ¯åœ¨å†…çš„æ‰€æœ‰çš„ç¬¬ä¸‰æ–¹åº“çš„åˆ—è¡¨ã€‚Podspecs è¢«å­˜å‚¨åœ¨æœ¬åœ°è·¯å¾„ ~/.cocoapods ä¸­ã€‚ ç‰ˆæœ¬æŽ§åˆ¶å’Œå†²çªå¦‚æžœä¾èµ–çš„æŸäº›åº“åŒæ—¶ä½¿ç”¨äº†ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“ï¼Œä½†æ˜¯ç‰ˆæœ¬ä¸åŒï¼Œé‚£ä¹ˆé»˜è®¤æ˜¯å‘åŽå…¼å®¹ï¼Œæ—¢é«˜ç‰ˆæœ¬çš„å…¼å®¹ä½Žç‰ˆæœ¬çš„ï¼›ä½†æ˜¯ï¼Œæ€»ä¼šæœ‰ä¸€äº›ç¬¬ä¸‰æ–¹åº“ä¼šå­˜åœ¨ä¸èƒ½å‘åŽå…¼å®¹çš„é—®é¢˜ï¼Œè¿™æ—¶å€™å°±éœ€è¦æ‰‹åŠ¨è§£å†³å…¼å®¹é—®é¢˜ã€‚æ¯”å¦‚ï¼šåŒæ—¶ä¾èµ–äº†ä¸€ä¸ªåº“çš„1.2.5å’Œ2.1.3ï¼Œé‚£ä¹ˆéœ€è¦ç”¨æˆ·é€šè¿‡æ˜Žç¡®æŒ‡å®šä½¿ç”¨çš„ç‰ˆæœ¬æ¥è§£å†³å†²çªã€‚ åŠ è½½æºæ–‡ä»¶CocoaPods æ‰§è¡Œçš„ä¸‹ä¸€æ­¥æ˜¯åŠ è½½æºç ã€‚æ¯ä¸ª .podspec æ–‡ä»¶éƒ½åŒ…å«ä¸€ä¸ªæºä»£ç çš„ç´¢å¼•ï¼Œè¿™äº›ç´¢å¼•ä¸€èˆ¬åŒ…è£¹ä¸€ä¸ª git åœ°å€å’Œ git tagã€‚å®ƒä»¬ä»¥ commit SHAs çš„æ–¹å¼å­˜å‚¨åœ¨ ~/Library/Caches/CocoaPods ä¸­ã€‚è¿™ä¸ªè·¯å¾„ä¸­æ–‡ä»¶çš„åˆ›å»ºæ˜¯ç”± Core gem è´Ÿè´£çš„ã€‚CocoaPods å°†ä¾ç…§ Podfileã€.podspec å’Œç¼“å­˜æ–‡ä»¶çš„ä¿¡æ¯å°†æºæ–‡ä»¶ä¸‹è½½åˆ° Pods ç›®å½•ä¸­ã€‚ ç”ŸæˆPod.xcodeprojæ¯æ¬¡ pod install æ‰§è¡Œï¼Œå¦‚æžœæ£€æµ‹åˆ°æ”¹åŠ¨æ—¶ï¼ŒCocoaPods ä¼šåˆ©ç”¨ Xcodeproj gem ç»„ä»¶å¯¹ Pods.xcodeproj è¿›è¡Œæ›´æ–°ã€‚å¦‚æžœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™ç”¨ä½¿ç”¨é»˜è®¤é…ç½®ã€‚å¦åˆ™ï¼Œä¼šå°†å·²æœ‰çš„é…ç½®é¡¹åŠ è½½è‡³å†…å­˜ä¸­ã€‚ å®‰è£…ç¬¬ä¸‰æ–¹åº“å½“cocoapodså¾€å·¥ç¨‹ä¸­æ·»åŠ ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“æ—¶ï¼Œä¸ä»…ä»…æ˜¯æ·»åŠ äº†ç¬¬ä¸‰æ–¹åº“çš„æºç ï¼Œè¿˜ä¼šæ·»åŠ å¾ˆå¤šå†…å®¹ã€‚ç”±äºŽæ¯ä¸ªç¬¬ä¸‰æ–¹åº“ä¼šæœ‰ä¸€ä¸ªç‹¬ç«‹çš„targetï¼Œå› æ­¤å¯¹äºŽæ¯ä¸ªåº“ï¼Œéƒ½ä¼šæ·»åŠ å‡ ä¸ªé¢å¤–çš„æ–‡ä»¶ï¼š ä¸€ä¸ªåŒ…å«ç¼–è¯‘é€‰é¡¹çš„.xcconfigæ–‡ä»¶ ä¸€ä¸ªåŒæ—¶åŒ…å«ç¼–è¯‘è®¾ç½®å’ŒCocoaPodsé»˜è®¤é…ç½®çš„ç§æœ‰.xcconfigæ–‡ä»¶ ä¸€ä¸ªç¼–è¯‘æ‰€å¿…é¡»çš„prefix.pchæ–‡ä»¶ ä¸€ä¸ªç¼–è¯‘å¿…é¡»çš„dummy.mæ–‡ä»¶ å¦‚æžœæºç ä¸­åŒ…å«èµ„æºbundleï¼Œé‚£ä¹ˆåœ¨targetçš„æ‰§è¡Œè„šæœ¬Pods-Resources.shä¸­ä¼šæ·»åŠ bundleç›¸å…³çš„æŒ‡ä»¤ã€‚è¿˜æœ‰ä¸€ä¸ªPods-environment.hæ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«ä¸€äº›å®ï¼Œè¿™äº›å®æ˜¯ç”¨æ¥æ£€æµ‹æŸä¸ªç»„ä»¶æ˜¯å¦æ¥è‡ªpodã€‚æœ€åŽï¼Œå°†ç”Ÿæˆä¸¤ä¸ªè®¤å¯æ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯ plistï¼Œå¦ä¸€ä¸ªæ˜¯ markdownï¼Œè¿™ä¸¤ä¸ªæ–‡ä»¶ç”¨äºŽç»™æœ€ç»ˆç”¨æˆ·æŸ¥é˜…ç›¸å…³è®¸å¯ä¿¡æ¯ã€‚ Podfile.lock è¯¥æ–‡ä»¶è®°å½•äº†Podä¸­çš„ä¾èµ–çš„æ¯ä¸ªç»„ä»¶ï¼Œä»¥åŠä¾èµ–ç»„ä»¶çš„ç‰ˆæœ¬ Manifest.lock è¿™æ˜¯æ¯æ¬¡è¿è¡Œ pod install å‘½ä»¤æ—¶åˆ›å»ºçš„ Podfile.lock æ–‡ä»¶çš„å‰¯æœ¬ã€‚å¦‚æžœä½ é‡è§è¿‡è¿™æ ·çš„é”™è¯¯ æ²™ç›’æ–‡ä»¶ä¸Ž Podfile.lock æ–‡ä»¶ä¸åŒæ­¥ (The sandbox is not in sync with the Podfile.lock)ã€‚è¿™æ˜¯å› ä¸º Manifest.lock æ–‡ä»¶å’Œ Podfile.lock æ–‡ä»¶ä¸ä¸€è‡´æ‰€å¼•èµ·ã€‚ç”±äºŽ Pods æ‰€åœ¨çš„ç›®å½•å¹¶ä¸æ€»åœ¨ç‰ˆæœ¬æŽ§åˆ¶ä¹‹ä¸‹ï¼Œè¿™æ ·å¯ä»¥ä¿è¯å¼€å‘è€…è¿è¡Œ app ä¹‹å‰éƒ½èƒ½æ›´æ–°ä»–ä»¬çš„ podsï¼Œå¦åˆ™ app å¯èƒ½ä¼š crashï¼Œæˆ–è€…åœ¨ä¸€äº›ä¸å¤ªæ˜Žæ˜¾çš„åœ°æ–¹ç¼–è¯‘å¤±è´¥ã€‚ xcprojå¦‚æžœä½ å·²ç»ä¾ç…§æˆ‘ä»¬çš„å»ºè®®åœ¨ç³»ç»Ÿä¸Šå®‰è£…äº† xcprojï¼Œå®ƒä¼šå¯¹ Pods.xcodeproj æ–‡ä»¶æ‰§è¡Œä¸€ä¸‹ touch ä»¥å°†å…¶è½¬æ¢æˆä¸ºæ—§çš„ ASCII plist æ ¼å¼çš„æ–‡ä»¶ã€‚ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšå‘¢ï¼Ÿè™½ç„¶åœ¨å¾ˆä¹…ä»¥å‰å°±ä¸è¢«å…¶å®ƒè½¯ä»¶æ”¯æŒäº†ï¼Œä½†æ˜¯ Xcode ä»ç„¶ä¾èµ–äºŽè¿™ç§æ ¼å¼ã€‚å¦‚æžœæ²¡æœ‰ xcprojï¼Œä½ çš„ Pods.xcodeproj æ–‡ä»¶å°†ä¼šä»¥ XML æ ¼å¼çš„ plist æ–‡ä»¶å­˜å‚¨ï¼Œå½“ä½ ç”¨ Xcode æ‰“å¼€å®ƒæ—¶ï¼Œå®ƒä¼šè¢«æ”¹å†™ï¼Œå¹¶é€ æˆå¤§é‡çš„æ–‡ä»¶æ”¹åŠ¨ã€‚ æ–‡ä»¶ç»“æž„å˜åŒ–æ‰§è¡Œpod install åŽï¼Œæˆ‘ä»¬çš„å·¥ç¨‹ç»“æž„å‘ç”Ÿäº†å˜åŒ–ï¼Œåœ¨ä»¥å‰çš„åŸºç¡€ä¸Šæ·»åŠ äº†å¦‚ä¸‹æ–‡ä»¶ï¼š PodFileï¼šä¾èµ–æè¿°æ–‡ä»¶ Podfile.lockï¼šå½“å‰å®‰è£…çš„ä¾èµ–åº“çš„ç‰ˆæœ¬ xxx.xcworkspaceï¼šxcworkspaceæ–‡ä»¶ï¼Œä½¿ç”¨CocoaPodç®¡ç†ä¾èµ–çš„é¡¹ç›®ï¼ŒXCodeåªèƒ½ä½¿ç”¨workspaceç¼–è¯‘é¡¹ç›®ï¼Œå¦‚æžœè¿˜åªæ‰“å¼€ä»¥å‰çš„xcodeprojæ–‡ä»¶è¿›è¡Œå¼€å‘ï¼Œç¼–è¯‘ä¼šå¤±è´¥ xcworkspaceæ–‡ä»¶å®žé™…æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå®žé™…Workspaceä¿¡æ¯ä¿å­˜åœ¨contents.xcworkspacedataé‡Œï¼Œè¯¥æ–‡ä»¶çš„å†…å®¹éžå¸¸ç®€å•ï¼Œå®žé™…ä¸ŠåªæŒ‡ç¤ºå®ƒæ‰€ä½¿ç”¨çš„å·¥ç¨‹çš„æ–‡ä»¶ç›®å½• 12345678910&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;Workspace version = "1.0"&gt; &lt;FileRef location = "group:CardPlayer/CardPlayer.xcodeproj"&gt; &lt;/FileRef&gt; &lt;FileRef location = "group:Pods/Pods.xcodeproj"&gt; &lt;/FileRef&gt;&lt;/Workspace&gt; Pods/ Pods.xcodeprojï¼Œæ‰€æœ‰çš„ç¬¬ä¸‰æ–¹åº“éƒ½ç”±Podså·¥ç¨‹æž„å»ºï¼Œæ¯ä¸ªä¸‰æ–¹åº“å¯¹åº”ä¸€ä¸ªPodså·¥ç¨‹ä¸­çš„Targetã€‚ æ¯ä¸ªç¬¬ä¸‰æ–¹åº“éƒ½ä¼šåœ¨Podsç›®å½•ä¸‹å¯¹åº”ä¸€ä¸ªç›®å½•ã€‚ Headersï¼Œåœ¨Headersæ–‡ä»¶ä¸­æœ‰ä¸¤ä¸ªç›®å½•ï¼ŒPrivateå’ŒPublicï¼Œå…¶ä¸­åŒ…å«ç¬¬ä¸‰æ–¹åº“çš„ç§æœ‰å’Œå…¬æœ‰çš„å¤´æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶éƒ½æ˜¯å¿«æ·è¿žæŽ¥ï¼Œå…¶çœŸæ­£çš„ä½ç½®åœ¨æ¯ä¸ªä¸‰æ–¹åº“çš„æ–‡ä»¶å¤¹ç›®å½•ä¸‹ã€‚ Target Support Files æ”¯æ’‘Targetçš„æ–‡ä»¶ å·¥ç¨‹ç»“æž„çš„å˜åŒ–Podså·¥ç¨‹å˜åŒ–Podså·¥ç¨‹ä¼šä¸ºæ¯ä¸ªä¾èµ–çš„ç¬¬ä¸‰æ–¹åº“å®šä¹‰ä¸€ä¸ªTargetï¼Œè¿˜ä¼šå®šä¹‰ä¸€ä¸ªPods-xxxçš„Targetï¼Œæ¯ä¸ªTargetä¼šç”Ÿæˆä¸€ä¸ªé™æ€åº“ Podså·¥ç¨‹ä¼šæ–°å»ºä¸¤ä¸ªConfigurationï¼Œæ¯ä¸ªConfigurationä¼šä¸ºä¸åŒçš„Targetè®¾ç½®ä¸åŒçš„xcconfigï¼ŒxcconfigæŒ‡å‡ºäº†å¤´æ–‡ä»¶æŸ¥æ‰¾çš„ç›®å½•ï¼Œè¦é“¾æŽ¥çš„ç¬¬ä¸‰æ–¹ï¼Œé“¾æŽ¥ç›®å½•ç­‰ã€‚AFNetworking.xcconfigæ–‡ä»¶çš„å†…å®¹ï¼š CONFIGURATION_BUILD_DIR = $PODS_CONFIGURATION_BUILD_DIR/AFNetworkingGCC_PREPROCESSOR_DEFINITIONS = $(inherited) COCOAPODS=1HEADER_SEARCH_PATHS = â€œ${PODS_ROOT}/Headers/Privateâ€ â€œ${PODS_ROOT}/Headers/Private/AFNetworkingâ€ â€œ${PODS_ROOT}/Headers/Publicâ€ â€œ${PODS_ROOT}/Headers/Public/AFNetworkingâ€OTHER_LDFLAGS = -framework â€œCoreGraphicsâ€ -framework â€œMobileCoreServicesâ€ -framework â€œSecurityâ€ -framework â€œSystemConfigurationâ€PODS_BUILD_DIR = $BUILD_DIRPODS_CONFIGURATION_BUILD_DIR = $PODS_BUILD_DIR/$(CONFIGURATION)$(EFFECTIVE_PLATFORM_NAME)PODS_ROOT = ${SRCROOT}PODS_TARGET_SRCROOT = ${PODS_ROOT}/AFNetworkingPRODUCT_BUNDLE_IDENTIFIER = org.cocoapods.${PRODUCT_NAME:rfc1034identifier}SKIP_INSTALL = YES Header_SERACH_PATHSï¼šç¼–è¯‘æ—¶æŸ¥æ‰¾å¤´æ–‡ä»¶çš„ç›®å½•OTHER_LD_FLAGSï¼šæŒ‡æ˜Žè¦é“¾æŽ¥çš„framework Pods-CardPlayer.debug.xcconfigæ–‡ä»¶çš„å†…å®¹ï¼š GCC_PREPROCESSOR_DEFINITIONS = $(inherited) COCOAPODS=1HEADER_SEARCH_PATHS = $(inherited) â€œ${PODS_ROOT}/Headers/Publicâ€ â€œ${PODS_ROOT}/Headers/Public/AFNetworkingâ€LIBRARY_SEARCH_PATHS = $(inherited) â€œ$PODS_CONFIGURATION_BUILD_DIR/AFNetworkingâ€OTHER_CFLAGS = $(inherited) -isystem â€œ${PODS_ROOT}/Headers/Publicâ€ -isystem â€œ${PODS_ROOT}/Headers/Public/AFNetworkingâ€OTHER_LDFLAGS = $(inherited) -ObjC -lâ€AFNetworkingâ€ -framework â€œCoreGraphicsâ€ -framework â€œMobileCoreServicesâ€ -framework â€œSecurityâ€ -framework â€œSystemConfigurationâ€PODS_BUILD_DIR = $BUILD_DIRPODS_CONFIGURATION_BUILD_DIR = $PODS_BUILD_DIR/$(CONFIGURATION)$(EFFECTIVE_PLATFORM_NAME)PODS_PODFILE_DIR_PATH = ${SRCROOT}/..PODS_ROOT = ${SRCROOT}/../Pods OTHER_LDFLAGSï¼šè¯´æ˜Žäº†ç¼–è¯‘Podsæ—¶éœ€è¦é“¾æŽ¥çš„ç¬¬ä¸‰æ–¹åº“ï¼Œè¿˜éœ€è¦é“¾æŽ¥å…¶å®ƒframeworkæ‰€ä»¥æˆ‘ä»¬åœ¨xcodeé‡Œèƒ½çœ‹åˆ°AFNetworkingä¾èµ–çš„framework: ä¸»å·¥ç¨‹å˜åŒ–å¼•å…¥CocoaPodsåŽï¼Œä¸»å·¥ç¨‹çš„è®¾ç½®ä¹Ÿä¼šå‘ç”Ÿç›¸åº”çš„å˜åŒ–ï¼Œå¼•å…¥ä¹‹å‰ï¼š Debugå’ŒReleaseä¸­çš„Configurationæ²¡æœ‰è®¾ç½®ä»»ä½•é…ç½®æ–‡ä»¶ï¼Œå¼•å…¥CocoaPodsåŽçš„å˜åŒ–ï¼šå¯ä»¥çœ‹åˆ°ï¼Œé‡‡ç”¨CocoaPodsä¹‹åŽï¼ŒDebugå’ŒReleaseè®¾ç½®äº†ç›¸åº”çš„é…ç½®æ–‡ä»¶ï¼Œè¿™äº›é…ç½®æ–‡ä»¶æŒ‡æ˜Žäº†å¤´æ–‡ä»¶çš„æŸ¥æ‰¾ç›®å½•å’Œè¦é“¾æŽ¥çš„ç¬¬ä¸‰æ–¹åº“ ç¼–è¯‘å¹¶é“¾æŽ¥ç¬¬ä¸‰æ–¹åº“Podfileè¯­æ³•ä¸­æ–‡å‚è€ƒæ–‡æ¡£]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[linux é…ç½®è¿œç¨‹ç™»å½•æœåŠ¡å™¨]]></title>
    <url>%2F2020%2F01%2F21%2Flinux%E9%85%8D%E7%BD%AE%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95%E6%9C%8D%E5%8A%A1%E5%99%A8%2F</url>
    <content type="text"><![CDATA[åˆ›å»ºæœåŠ¡å™¨åˆ›å»ºè°·æ­ŒGCPæœåŠ¡å™¨ åœ¨æœåŠ¡å™¨é…ç½®sshd_configç™»å½•æœåŠ¡å™¨æ‰“å¼€ç»ˆç«¯, è¾“å…¥ 1ssh root@&lt;è¿™é‡Œæ˜¯ä½ æœåŠ¡å™¨çš„ipåœ°å€&gt; è¾“å…¥å¯†ç , å°±å®Œæˆäº†æœåŠ¡å™¨çš„ç™»å½• ä½¿ç”¨vimæ‰“å¼€sshd_configæ–‡ä»¶åœ¨æœåŠ¡å™¨ä¸­æ‰“å¼€sshd_configæ–‡ä»¶ 1vi /etc/ssh/sshd_config ä¿®æ”¹sshd_configæ–‡ä»¶ä¸­çš„å‡ ä¸ªåœ°æ–¹ 123RSAAuthentication yes # RSAè®¤è¯PubkeyAuthentication yes # å…¬é’¥è®¤è¯AuthorizedKeysFile .ssh/authorized_keys # å…¬é’¥è®¤è¯æ–‡ä»¶è·¯å¾„ æœ¬åœ°ç”Ÿæˆssh-keygenå›žåˆ°æœ¬åœ°, ä½¿ç”¨ssh-keygenç”Ÿæˆå…¬é’¥å’Œç§é’¥ å°†ç”Ÿæˆçš„public keyæ”¾åˆ°æœåŠ¡å™¨è¿›å…¥/.sshç›®å½•, æ‰§è¡Œå‘½ä»¤ 1cat -n ~/.ssh/id_rsa.pub&gt;&gt;root@&lt;è¿™é‡Œæ˜¯ä½ æœåŠ¡å™¨çš„ipåœ°å€&gt;:~/.ssh/authorized_keys æœŸé—´ä¼šè¾“å…¥æœåŠ¡å™¨çš„å¯†ç . æœ¬åœ°åˆ›å»ºsshçš„configæ–‡ä»¶, å¹¶é…ç½®hoståœ¨æœ¬æœºçš„ç›®å½•~/.sshä¸‹åˆ›å»ºconfigæ–‡ä»¶ 1touch config ç„¶åŽä½¿ç”¨vimæ‰“å¼€è¿›è¡Œç¼–è¾‘ 1234567#sshæ¨¡ç‰ˆHost hostnameHostName xxx.xxx.xxx.xxxPort 22User root # ç”¨æˆ·åServerAliveInterval 60 # æ¯éš”60ç§’ å‘é€KeepAliveè¯·æ±‚ï¼Œä¿è¯ä¸ä¼šå› ä¸ºè¶…æ—¶ç©ºé—²æ–­å¼€IdentityFile ~/.ssh/id_rsa #ç§é’¥åœ°å€ ä½¿ç”¨é…ç½®å¥½çš„Hostç™»å½•è¿œç«¯æœåŠ¡å™¨ä½¿ç”¨å‘½ä»¤ 1ssh &lt;åˆšæ‰é…ç½®çš„HostName&gt; å°±å®Œæˆäº†ç™»å½•]]></content>
      <categories>
        <category>hide</category>
      </categories>
      <tags>
        <tag>hide</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Macé…ç½®Vim]]></title>
    <url>%2F2019%2F08%2F28%2FMac%E9%85%8D%E7%BD%AEVim%2F</url>
    <content type="text"><![CDATA[ç›¸ä¿¡ä¸å°‘åŒå­¦åœ¨Macä¸Šä½¿ç”¨è¿‡viæˆ–è€…vimå‘½ä»¤ï¼Œè¿™ä¸ªå‘½ä»¤æ˜¯æ‰“å¼€macè‡ªå¸¦çš„vimç¼–è¾‘å™¨çš„å‘½ä»¤ï¼Œå¦‚æžœåªæ˜¯ç®€å•çš„ä¿®æ”¹æ–‡ä»¶ï¼Œä½¿ç”¨vimæ— ç–‘æ˜¯å¾ˆæ–¹ä¾¿çš„ï¼›ä½†æ˜¯å¦‚æžœä½¿ç”¨macè‡ªå¸¦çš„vimæ¥åšå¤§é‡æ–‡æ¡£ç¼–è¾‘çš„å·¥ä½œï¼Œé‚£å°±å¯èƒ½åŠ›ä¸ä»Žå¿ƒäº†ã€‚è¿™ä¸ªæ—¶å€™ï¼Œä½ å°±éœ€è¦æ›´å¤æ‚çš„vimç¼–è¾‘å™¨æ¥è´Ÿæ‹…è¿™æ ·çš„å·¥ä½œäº†,Macç›®å‰æœ‰ä¸¤ä¸ªVimå®¢æˆ·ç«¯å¯ä¾›æˆ‘ä»¬ä½¿ç”¨1ã€MacVimï¼šä½¿ç”¨Cocoa GUIï¼Œè¿™æ˜¯Macä¸Šæ›´æ–°è¿˜å¾ˆæ´»è·ƒçš„ç‰ˆæœ¬ï¼Œä¹Ÿæ˜¯Macä¸Šæœ€å¤šäººä½¿ç”¨çš„ç‰ˆæœ¬ã€‚ä¸‹è½½åœ°å€2ã€ä½¿ç”¨Carbon GUIçš„ç‰ˆæœ¬ï¼Œä½†æ˜¯è¿™ä¸ªç‰ˆæœ¬ç›®å‰åŸºæœ¬ä¸Šä¸å†æ›´æ–°ã€‚ä¸‹è½½åœ°å€ æˆ‘ä¸»è¦æ˜¯ä½¿ç”¨çš„MacVimï¼Œæ‰€ä»¥å°±è®°å½•ä¸€ä¸‹MacVimçš„å®‰è£…ä»¥åŠä½¿ç”¨è¿‡ç¨‹ã€‚ å®‰è£…ä»Žä¸Šé¢æä¾›çš„é“¾æŽ¥ä¸‹è½½MacVimï¼Œå¹¶æŒ‰ç…§å®‰è£…macåº”ç”¨çš„æ­¥éª¤å®‰è£…å¥½MavVimã€‚è¿™ä¸ªæ—¶å€™è¿˜æ²¡æœ‰ç»“æŸã€‚ æƒ³è±¡ä¸€ä¸‹ï¼Œæˆ‘ä»¬ä»¥å‰åœ¨terminalä¸­æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶æ˜¯è¿™æ ·çš„ï¼švi &lt;æ–‡ä»¶åç§°&gt;ï¼Œè¿™æ ·å¾ˆcooooooooooolï¼› ä½†æ˜¯ï¼Œæˆ‘ä»¬çŽ°åœ¨ä½¿ç”¨MacVimï¼Œå´å¾—é¼ æ ‡ç‚¹å‡»æ‰“å¼€MacVimï¼Œç„¶åŽå†ä»ŽMacVimæ‰“å¼€æ–‡ä»¶ã€‚è¿™æ ·æ˜¯ä¸æ˜¯æ¯”ä»¥å‰ç¹çäº†å¾ˆå¤šã€‚é‚£ä¹ˆï¼Œèƒ½ä¸èƒ½åƒä»Žå‰ä¸€æ ·ï¼Œä½¿ç”¨å‘½ä»¤æ‰“å¼€æ–‡ä»¶å‘¢ï¼Ÿ ç­”æ¡ˆæ˜¯å¯ä»¥çš„ã€‚ æˆ‘ä»¬å…ˆæŠŠMacVimæ‰“å¼€,ç¬¬ä¸€æ¬¡æ‰“å¼€MacVimæ˜¯è¿™ä¸ªæ ·å­ï¼š åœ¨MacVimçš„ç•Œé¢ä¸­æˆ‘ä»¬è¾“å…¥:h mvimï¼ŒMacVimä¼šæç¤ºæˆ‘ä»¬å°†mvimå‘½ä»¤çš„è·¯å¾„æ·»åŠ åˆ°æˆ‘ä»¬çš„PATH æ·»åŠ PATHæ­¥éª¤ï¼š vi ~/.bash_podfileæ‰“å¼€PATHæ‰€åœ¨è·¯å¾„ å°†MacVimæä¾›çš„å‘½ä»¤è·¯å¾„å†™å…¥PATHï¼šexport PATH=/Applications/MacVim.app/Contents/bin:$PATH æ‰§è¡Œsource ~/.bash_podfileé‡å¯bash è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æŽ¥åœ¨Terminalä¸­ä½¿ç”¨mvimå‘½ä»¤æ¥æ‰“å¼€æ–‡ä»¶äº†ã€‚ æ˜¯ä¸æ˜¯è§‰å¾—è¾“å…¥mvimå‘½ä»¤è¿˜æ˜¯ä¸å¦‚vimå‘½ä»¤èˆ’æœï¼Ÿé‚£ä¹ˆæˆ‘ä»¬å°±ä½¿ç”¨vimæ¥æ‰“å¼€MacVim! ä½¿ç”¨å‘½ä»¤mvim ~/.zshrc æˆ–è€…mvim ~/.bashrcï¼Œå¦‚æžœä½ ä½¿ç”¨çš„æ˜¯zshé‚£ä¹ˆä½¿ç”¨å‰è€…ï¼Œå¦‚æžœä½¿ç”¨çš„æ˜¯bashï¼Œé‚£ä¹ˆä½¿ç”¨åŽè€…ã€‚ æ‰“å¼€åŽï¼Œåœ¨æ–‡ä»¶æœ«å°¾æ–°å¢žä¸€æ®µæ–‡å­—alias vim=&#39;mvim&#39;ï¼Œæ„æ€å°±æ˜¯ç»™mvimå‘½ä»¤èµ·ä¸€ä¸ªåˆ«åã€‚ ç„¶åŽä¿å­˜é€€å‡ºï¼Œå¦‚æžœä½ æ˜¯zshä½¿ç”¨source ~/.zshrcé‡æ–°è½½å…¥ï¼Œå¦‚æžœæ˜¯bashä½¿ç”¨source ~/.bashrcè½½å…¥ã€‚ æŽ¥ä¸‹æ¥å°±æ˜¯è§è¯å¥‡è¿¹çš„æ—¶åˆ»äº†ï¼Œè¾“å…¥å‘½ä»¤vim &lt;ä½ è¦æ‰“å¼€çš„æ–‡æ¡£&gt;ï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯ä½¿ç”¨MacVimæ‰“å¼€äº†! æ·»åŠ æ’ä»¶ ç»è¿‡ä¸Šé¢çš„ä¸€ç³»åˆ—éªšæ“ä½œï¼ŒçŽ°åœ¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨MacVimæ­£å¸¸çš„è¿›è¡Œç¼–è¾‘äº†ï¼Œä½†æ˜¯ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å¯¹MacVimè¿›è¡Œæ›´æ·±å±‚æ¬¡çš„æ‰©å±•ï¼Œé‚£å°±æ˜¯ç»™MacVimæ·»åŠ æ’ä»¶ï¼ Vundle å‘½ä»¤12345678910# å®‰è£…æ’ä»¶:BundleInstall# æ›´æ–°æ’ä»¶:BundleUpdate# æ¸…é™¤ä¸éœ€è¦çš„æ’ä»¶:BundleClean# åˆ—å‡ºå½“å‰çš„æ’ä»¶:BundleList# æœç´¢æ’ä»¶:BundleSearch é…ç½®~/.vimrcæ–‡ä»¶123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131" å…³é—­vimçš„æ‰€æœ‰æ‰©å±•åŠŸèƒ½set nocompatible" é…ç½®æ’ä»¶è·¯å¾„set rtp+=~/.vim/bundle/vundle/ call vundle#begin()" åœ¨è¿™é‡Œæ·»åŠ ä½ æƒ³å®‰è£…çš„Vimæ’ä»¶Bundle 'gmarik/vundle'" Pythonè¡¥å…¨å¼ºåŠ›æ’ä»¶Bundle 'davidhalter/jedi'" æ·»åŠ å¼•å·,æ‹¬å·é…å¯¹è¡¥å…¨Bundle 'jiangmiao/auto-pairs'" æ·»åŠ /è§£é™¤æ³¨é‡ŠBundle 'scrooloose/nerdcommenter'call vundle#end() " required"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""" ä¸€èˆ¬è®¾å®š"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""" è®¾å®šé»˜è®¤è§£ç set fenc=utf-8set fencs=utf-8,usc-bom,euc-jp,gb18030,gbk,gb2312,cp936"åŽ»æŽ‰è®¨åŽŒçš„æœ‰å…³viä¸€è‡´æ€§æ¨¡å¼ï¼Œé¿å…ä»¥å‰ç‰ˆæœ¬çš„ä¸€äº›bugå’Œå±€é™set nocompatible" æ˜¾ç¤ºä¸­æ–‡å¸®åŠ©if version &gt;= 603 set helplang=cn set encoding=utf-8endif" è¯­æ³•é«˜äº®syntax on" è®¾ç½®é…è‰²colorscheme solarized "å¯èƒ½éœ€è¦æå‰ä¸‹è½½" è®¾ç½®å­—ä½“set guifont=Monaco:h14" è®¾ç½®gvimå¯åŠ¨çª—å£çš„ä½ç½®ï¼Œä»¥åŠå¤§å°" winpos 300 105" set lines=30 columns=100" å¼€å¯è¡Œå·æ˜¾ç¤ºset number"ä¸‹é¢ä¸¤è¡Œåœ¨è¿›è¡Œç¼–å†™ä»£ç æ—¶ï¼Œåœ¨æ ¼å¼å¯¹èµ·ä¸Šå¾ˆæœ‰ç”¨ï¼›"ç¬¬ä¸€è¡Œï¼Œvimä½¿ç”¨è‡ªåŠ¨å¯¹èµ·ï¼Œä¹Ÿå°±æ˜¯æŠŠå½“å‰è¡Œçš„å¯¹èµ·æ ¼å¼åº”ç”¨åˆ°ä¸‹ä¸€è¡Œï¼›"ç¬¬äºŒè¡Œï¼Œä¾æ®ä¸Šé¢çš„å¯¹èµ·æ ¼å¼ï¼Œæ™ºèƒ½çš„é€‰æ‹©å¯¹èµ·æ–¹å¼ï¼Œå¯¹äºŽç±»ä¼¼Cè¯­è¨€ç¼–"å†™ä¸Šå¾ˆæœ‰ç”¨set autoindentset smartindent"æŸ¥è¯¢æ—¶éžå¸¸æ–¹ä¾¿ï¼Œå¦‚è¦æŸ¥æ‰¾bookå•è¯ï¼Œå½“è¾“å…¥åˆ°/bæ—¶ï¼Œä¼šè‡ªåŠ¨æ‰¾åˆ°ç¬¬ä¸€"ä¸ªbå¼€å¤´çš„å•è¯ï¼Œå½“è¾“å…¥åˆ°/boæ—¶ï¼Œä¼šè‡ªåŠ¨æ‰¾åˆ°ç¬¬ä¸€ä¸ªboå¼€å¤´çš„å•è¯ï¼Œä¾"æ¬¡ç±»æŽ¨ï¼Œè¿›è¡ŒæŸ¥æ‰¾æ—¶ï¼Œä½¿ç”¨æ­¤è®¾ç½®ä¼šå¿«é€Ÿæ‰¾åˆ°ç­”æ¡ˆï¼Œå½“ä½ æ‰¾è¦åŒ¹é…çš„å•è¯"æ—¶ï¼Œåˆ«å¿˜è®°å›žè½¦set incsearch" é«˜äº®å½“å‰è¡Œset cursorline" å¯åŠ¨çš„æ—¶å€™ä¸æ˜¾ç¤ºé‚£ä¸ªæ´åŠ©ç´¢é©¬é‡Œå„¿ç«¥çš„æç¤ºset shortmess=atI" æˆ‘çš„çŠ¶æ€è¡Œæ˜¾ç¤ºçš„å†…å®¹ï¼ˆåŒ…æ‹¬æ–‡ä»¶ç±»åž‹å’Œè§£ç ï¼‰set statusline=%F%m%r%h%w\[POS=%l,%v][%p%%]\%&#123;strftime(\"%d/%m/%y\ -\ %H:%M\")&#125;" æ€»æ˜¯æ˜¾ç¤ºçŠ¶æ€è¡Œset laststatus=2" åˆ¶è¡¨ç¬¦ä¸º4set tabstop=4" ç»Ÿä¸€ç¼©è¿›ä¸º4set softtabstop=4set shiftwidth=4" åœ¨c,c++,pythonæ–‡ä»¶ä¸­ç”¨ç©ºæ ¼ä»£æ›¿åˆ¶è¡¨ç¬¦autocmd FileType c,cpp,python set shiftwidth=4 | set expandtab" ä¾¦æµ‹æ–‡ä»¶ç±»åž‹filetype on" è½½å…¥æ–‡ä»¶ç±»åž‹æ’ä»¶filetype plugin on" ä¸ºç‰¹å®šæ–‡ä»¶ç±»åž‹è½½å…¥ç›¸å…³ç¼©è¿›æ–‡ä»¶filetype indent on " å¦‚æžœæ–‡ä»¶ç±»åž‹ä¸º.shæ–‡ä»¶ if &amp;filetype == 'sh' call setline(1, "\#########################################################################") call append(line("."), "\# File Name: ".expand("%")) call append(line(".")+1, "\# Author: Sheldon") call append(line(".")+2, "\# mail: tinarychina@gmail.com") call append(line(".")+3, "\# Created Time: ".strftime("%F %R")) call append(line(".")+4, "\#########################################################################") call append(line(".")+5, "\#!/bin/bash") call append(line(".")+6, "") else call setline(1, "/*************************************************************************") call append(line("."), " &gt; File Name: ".expand("%")) call append(line(".")+1, " &gt; Author: Sheldon") call append(line(".")+2, " &gt; Mail: tinarychina@gmail.com ") call append(line(".")+3, " &gt; Created Time: ".strftime("%F %R")) call append(line(".")+4, " ************************************************************************/") call append(line(".")+5, "") endif if &amp;filetype == 'python' call append(line(".")+5, "\#!/usr/bin/env python") call append(line(".")+6, "\#coding: utf-8") call append(line(".")+7, "") endif if &amp;filetype == 'cpp' call append(line(".")+6, "#include&lt;iostream&gt;") call append(line(".")+7, "using namespace std;") call append(line(".")+8, "") endif if &amp;filetype == 'c' call append(line(".")+6, "#include&lt;stdio.h&gt;") call append(line(".")+7, "") endif " æ–°å»ºæ–‡ä»¶åŽï¼Œè‡ªåŠ¨å®šä½åˆ°æ–‡ä»¶æœ«å°¾ autocmd BufNewFile * normal Gendfunc vim å®‰è£…ä¸»é¢˜åœ¨~/.vim/è·¯å¾„ä¸‹æ–°å»ºä¸€ä¸ªcolorsæ–‡ä»¶å¤¹ï¼Œç„¶åŽä¸‹è½½ä¸»é¢˜ï¼Œä¾‹å¦‚ï¼šhttps://github.com/tomasr/molokaiï¼Œå°†ä¸‹è½½å¥½çš„molokai.vimæ”¾å…¥colorsæ–‡ä»¶å¤¹ä¸­ã€‚ ä½¿ç”¨vimæ‰“å¼€~/.vimrcï¼Œå¹¶æ·»åŠ ï¼š12345&quot; ä»£ç é¢œè‰²ä¸»é¢˜syntax onsyntax enableset t_Co=256colorscheme molokai ç„¶åŽé‡æ–°æ‰“å¼€vimç¼–è¾‘å™¨ï¼Œå°±å‘çŽ°ä¸»é¢˜å·²ç»æ›´æ¢äº†]]></content>
      <categories>
        <category>Mac</category>
      </categories>
      <tags>
        <tag>Mac</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[zshå‘½ä»¤å¤§å…¨]]></title>
    <url>%2F2019%2F08%2F28%2Fzsh%E5%91%BD%E4%BB%A4%E5%A4%A7%E5%85%A8%2F</url>
    <content type="text"><![CDATA[bashå’Œzshä¸¤ç§shellåŠŸèƒ½éžå¸¸ç›¸ä¼¼ï¼Œåªä¸è¿‡zshçš„åŠŸèƒ½æ¯”bashæ›´å¼ºå¤§ä¸€äº›ã€‚è¿™ä¸¤ç§shellçš„å¿«æ·é”®å‘½ä»¤ä¹Ÿéžå¸¸ç›¸ä¼¼ï¼Œå¯¹äºŽå¸¸ç”¨shellçš„äººæ¥è¯´ï¼Œäº†è§£ä¸€äº›å¿«æ·é”®æ“ä½œå°†ä¼šååˆ†æœ‰ç›Šï¼Œå› ä¸ºä½¿ç”¨å¿«æ·é”®å°†èƒ½å¤§å¤§èŠ‚çº¦æ“ä½œæ—¶é—´ã€‚å¤§éƒ¨åˆ†å¿«æ·é”®æ˜¯ç”¨æ¥å¿«é€Ÿå¯¼èˆªæˆ–ç¼–è¾‘å½“å‰å‘½ä»¤è¡Œã€‚ ä½†æ˜¯ï¼ï¼ï¼ è®°ä¸ä½å‘€ï¼Œæ‰€ä»¥è®°å½•ä¸€ä¸‹~ âŒƒ + uï¼šæ¸…ç©ºå½“å‰è¡Œ âŒƒ + aï¼šç§»åŠ¨åˆ°è¡Œé¦– âŒƒ + eï¼šç§»åŠ¨åˆ°è¡Œå°¾ âŒƒ + fï¼šå‘å‰ç§»åŠ¨ âŒƒ + bï¼šå‘åŽç§»åŠ¨ âŒƒ + pï¼šä¸Šä¸€æ¡å‘½ä»¤ âŒƒ + nï¼šä¸‹ä¸€æ¡å‘½ä»¤ âŒƒ + rï¼šæœç´¢åŽ†å²å‘½ä»¤ âŒƒ + yï¼šå¬å›žæœ€è¿‘ç”¨å‘½ä»¤åˆ é™¤çš„æ–‡å­— âŒƒ + hï¼šåˆ é™¤å…‰æ ‡ä¹‹å‰çš„å­—ç¬¦ âŒƒ + dï¼šåˆ é™¤å…‰æ ‡æ‰€æŒ‡çš„å­—ç¬¦ âŒƒ + wï¼šåˆ é™¤å…‰æ ‡ä¹‹å‰çš„å•è¯ âŒƒ + kï¼šåˆ é™¤ä»Žå…‰æ ‡åˆ°è¡Œå°¾çš„å†…å®¹ âŒƒ + tï¼šäº¤æ¢å…‰æ ‡å’Œä¹‹å‰çš„å­—ç¬¦ âŒ˜ + Clickï¼šå¯ä»¥æ‰“å¼€æ–‡ä»¶ï¼Œæ–‡ä»¶å¤¹å’Œé“¾æŽ¥ âŒ˜ + nï¼šæ–°å»ºçª—å£ âŒ˜ + tï¼šæ–°å»ºæ ‡ç­¾é¡µ âŒ˜ + wï¼šå…³é—­å½“å‰é¡µ âŒ˜ + æ•°å­—&amp;âŒ˜ + æ–¹å‘é”®ï¼šåˆ‡æ¢æ ‡ç­¾é¡µ âŒ¥âŒ˜ + æ•°å­—ï¼šåˆ‡æ¢çª—å£ âŒ˜ + enterï¼šåˆ‡æ¢å…¨å± âŒ˜ + dï¼šå·¦å³åˆ†å± â‡§âŒ˜ + dï¼šä¸Šä¸‹åˆ†å± âŒ˜ + ;ï¼šè‡ªåŠ¨è¡¥å…¨åŽ†å²è®°å½• â‡§âŒ˜ + hï¼šè‡ªåŠ¨è¡¥å…¨å‰ªè´´æ¿åŽ†å² âŒ¥âŒ˜ + eï¼šæŸ¥æ‰¾æ‰€æœ‰æ¥å®šä½æŸä¸ªæ ‡ç­¾é¡µ âŒ˜ + r&amp;âŒƒ + lï¼šæ¸…å± âŒ˜ + /ï¼šæ˜¾ç¤ºå…‰æ ‡ä½ç½® âŒ¥âŒ˜ + bï¼šåŽ†å²å›žæ”¾ âŒ˜ + fï¼šæŸ¥æ‰¾ï¼Œç„¶åŽç”¨tabå’Œâ‡§ + tabå¯ä»¥å‘å³å’Œå‘å·¦è¡¥å…¨ï¼Œè¡¥å…¨ä¹‹åŽçš„å†…å®¹ä¼šè¢«è‡ªåŠ¨å¤åˆ¶ï¼Œ è¿˜å¯ä»¥ç”¨âŒ¥ + enterå°†æŸ¥æ‰¾ç»“æžœè¾“å…¥ç»ˆç«¯]]></content>
      <categories>
        <category>Mac</category>
      </categories>
      <tags>
        <tag>Mac</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Macç»ˆç«¯ç¥žå™¨--iTerm2]]></title>
    <url>%2F2019%2F08%2F28%2FMac%E7%BB%88%E7%AB%AF%E7%A5%9E%E5%99%A8-iTerm2%2F</url>
    <content type="text"><![CDATA[æ‰“é€ äººè§äººçˆ±çš„ç»ˆç«¯ ä¸‹è½½iTerm2 å®˜ç½‘ä¸‹è½½ å®‰è£…å®ŒæˆåŽï¼Œåœ¨/binç›®å½•ä¸‹ä¼šå¤šå‡ºä¸€ä¸ªzshçš„æ–‡ä»¶ã€‚ Macç³»ç»Ÿé»˜è®¤ä½¿ç”¨dashä½œä¸ºç»ˆç«¯ï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤ä¿®æ”¹é»˜è®¤ä½¿ç”¨zshï¼š 1chsh -s /bin/zsh]]></content>
  </entry>
  <entry>
    <title><![CDATA[Gitè´®è—ï¼ˆStashingï¼‰]]></title>
    <url>%2F2019%2F08%2F22%2FGit%E8%B4%AE%E8%97%8F%EF%BC%88Stashing%EF%BC%89%2F</url>
    <content type="text"><![CDATA[æˆ‘ä»¬åœ¨å·¥ä½œä¸­ç»å¸¸ä¼šé‡åˆ°ä¸€ç§æƒ…å†µï¼Œå½“æˆ‘ä»¬åœ¨é¡¹ç›®çš„å½“å‰åˆ†æ”¯ä¿®æ”¹äº†ä¸€äº›ä»£ç ï¼Œå·¥ä½œè¿›è¡Œåˆ°ä¸€åŠï¼Œåˆéœ€è¦åŽ»å…¶ä»–çš„åˆ†æ”¯å¤„ç†ä¸€äº›äº‹æƒ…ï¼›è¿™ä¸ªæ—¶å€™ï¼Œä½ ä¸æƒ³æŠŠä¿®æ”¹äº†ä¸€åŠçš„ä»£ç æäº¤åˆ°gitï¼Œä½†ä¸æäº¤åˆæ— æ³•åˆ‡åˆ°å…¶ä»–åˆ†æ”¯ï¼›æ€Žä¹ˆåŠžå‘¢ï¼Ÿ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Gitçš„ä¸€ä¸ªåŠŸèƒ½â€”â€”Stashingï¼ˆè´®è—ï¼‰ã€‚ ä½œç”¨Stashingå¯ä»¥å°†å½“å‰å·¥ä½œåŒºå·²ä¿®æ”¹çŠ¶æ€ä¸‹çš„æ–‡ä»¶å‚¨å­˜èµ·æ¥ï¼Œåœ¨æ ˆä¸­å¢žåŠ ä¸€æ¡å­˜å‚¨ã€‚ ç”¨æ³•åˆ—å‡ºæ‰€æœ‰çš„å­˜å‚¨åˆ—è¡¨1git stash list åº”ç”¨å­˜å‚¨1git stash pop é‡æ–°åº”ç”¨æœ€åŽä¸€æ¬¡çš„å­˜å‚¨ï¼ŒåŒæ—¶ï¼Œå°†å…¶ä»Žæ ˆä¸­ç§»èµ°ã€‚ 1git stash apply stash@&#123;0&#125; é€šè¿‡å­˜å‚¨ååº”ç”¨åˆ°å½“å‰å·¥ä½œåŒºï¼Œä½†å¹¶ä¸ä¼šä»Žæ ˆä¸­ç§»é™¤ã€‚ å–æ¶ˆè´®è—1git stash show -p stash@&#123;0&#125; | git apply -R å–æ¶ˆä¹‹å‰æ‰€åº”ç”¨è´®è—çš„ä¿®æ”¹ã€‚ ç§»é™¤è´®è—1git stash drop &lt;stash name&gt; ä»Žæ ˆä¸­ç§»é™¤è´®è— é€šè¿‡è´®è—åˆ›å»ºæ–°åˆ†æ”¯1git stash branch &lt;branch name&gt; åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†æ”¯ï¼Œå¹¶ä¸”æ£€å‡ºä½ è´®è—å·¥ä½œæ—¶æ‰€åšçš„æäº¤ï¼Œé‡æ–°åº”ç”¨äºŽä½ çš„å·¥ä½œï¼Œå¦‚æžœæˆåŠŸï¼Œå°†ä¼šä¸¢å¼ƒè´®è—ã€‚]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSæ­å»ºè¿œç¨‹ç§æœ‰åº“]]></title>
    <url>%2F2019%2F08%2F21%2FiOS%E6%90%AD%E5%BB%BA%E8%BF%9C%E7%A8%8B%E7%A7%81%E6%9C%89%E5%BA%93%2F</url>
    <content type="text"><![CDATA[iOSæ­å»ºè¿œç¨‹ç§æœ‰åº“ ä¸€ã€åˆ›å»ºè¿œç¨‹ç§æœ‰ç´¢å¼•åº“ è¿™ä¸ªåº“çš„ä½œç”¨æ˜¯å­˜æ”¾ç´¢å¼•æ–‡ä»¶ äºŒã€å°†è¿œç¨‹ç´¢å¼•åº“é“¾æŽ¥ï¼ˆä¸‹è½½ï¼‰åˆ°æœ¬åœ°1pod repo add &lt;ä»“åº“å&gt; &lt;ä»“åº“æºåœ°å€ï¼ˆSSHåœ°å€ï¼‰&gt; ä¸‰ã€åˆ›å»ºè¿œç¨‹ä»£ç ç§æœ‰ä»“åº“1. åœ¨æœ¬åœ°åˆ›å»º pod é¡¹ç›®1pod lib create &lt;podåº“åå­—&gt; æ‰§è¡Œç»“æžœ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051Cloning `https://github.com/CocoaPods/pod-template.git` into `&lt;æˆ‘çš„podåº“åç§°ï¼Œæ‰‹åŠ¨é©¬èµ›å…‹&gt;`.Configuring &lt;æˆ‘çš„podåº“åç§°ï¼Œæ‰‹åŠ¨é©¬èµ›å…‹&gt; template.------------------------------To get you started we need to ask a few questions, this should only take a minute.If this is your first time we recommend running through with the guide: - https://guides.cocoapods.org/making/using-pod-lib-create.html ( hold cmd and click links to open in a browser. )What platform do you want to use?? [ iOS / macOS ] &gt; iOSWhat language do you want to use?? [ Swift / ObjC ] &gt; ObjCWould you like to include a demo application with your library? [ Yes / No ] &gt; YesWhich testing frameworks will you use? [ Specta / Kiwi / None ] &gt; KiwiWould you like to do view based testing? [ Yes / No ] &gt; YesWhat is your class prefix? &gt; TYRunning pod install on your new library.Analyzing dependenciesFetching podspec for `&lt;æˆ‘çš„podåº“åç§°ï¼Œæ‰‹åŠ¨é©¬èµ›å…‹&gt;` from `../`Downloading dependenciesInstalling &lt;æˆ‘çš„podåº“åç§°ï¼Œæ‰‹åŠ¨é©¬èµ›å…‹&gt; (0.1.0)Installing FBSnapshotTestCase (2.1.4)Installing Kiwi (3.0.0)Generating Pods projectIntegrating client project[!] Please close any current Xcode sessions and use `&lt;æˆ‘çš„podåº“åç§°ï¼Œæ‰‹åŠ¨é©¬èµ›å…‹&gt;.xcworkspace` for this project from now on.Sending statsPod installation complete! There are 3 dependencies from the Podfile and 3 total pods installed. Ace! you're ready to go! We will start you off by opening your project in Xcode open '&lt;æˆ‘çš„podåº“è·¯å¾„ï¼Œæ‰‹åŠ¨é©¬èµ›å…‹&gt;'To learn more about the template see `https://github.com/CocoaPods/pod-template.git`.To learn more about creating a new pod, see `https://guides.cocoapods.org/making/making-a-cocoapod`. 2. ä¿®æ”¹å†…å®¹æŠŠéœ€è¦æäº¤çš„ä»£ç æ”¾åˆ°è·¯å¾„(å½“å‰é¡¹ç›®æ ¹ç›®å½•/é¡¹ç›®å/Classes/)ä¸‹é¢ï¼Œåˆ é™¤ReplaceMe.mã€‚ 3. ä¿®æ”¹.podspecæ–‡ä»¶4. æäº¤æäº¤ä»£ç åˆ°æœ¬åœ°podåº“ 1234git add .git commit -m "add file"git remote add origin &lt;è¿œç«¯podåº“åœ°å€:https://gitlab.com/xxx.git&gt;git push -u origin master æ‰“tagå¹¶æäº¤tagåˆ°origin 12git tag 0.1.0git push --tags éªŒè¯æœ¬åœ°specæ–‡ä»¶æ˜¯å¦æœ‰è¯¯ 1pod lib lint éªŒè¯è¿œç¨‹specæ–‡ä»¶æ˜¯å¦æœ‰è¯¯ 1pod spec lint ä¸Šä¼ .podspecç´¢å¼•æ–‡ä»¶åˆ°ç´¢å¼•åº“ 1pod repo push &lt;ç´¢å¼•åº“åç§°&gt; &lt;.podspecæ–‡ä»¶åç§°&gt; --allow-warnings --use-libraries --verbose tip: æ¶ˆé™¤podåº“è­¦å‘Šinhibit_all_warnings!ã€‚]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå¸¸ç”¨ç¬¬ä¸‰æ–¹åº“æ•´ç†]]></title>
    <url>%2F2019%2F08%2F19%2FiOS%E5%B8%B8%E7%94%A8%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93%E6%95%B4%E7%90%86%2F</url>
    <content type="text"><![CDATA[æ•´ç†æˆ‘ä»¬åœ¨APPå¼€å‘è¿‡ç¨‹ä¸­ç»å¸¸æˆ–è€…å¿…é¡»ä½¿ç”¨çš„ä¸€äº›ç¬¬ä¸‰æ–¹çš„podåº“ã€‚ ä¸»æ¨¡å—å¸ƒå±€ Masonry ä»£ç å¸ƒå±€ UITableView-FDTemplateLayoutCell tableviewè‡ªé€‚åº”é«˜åº¦ æŒ‡ç¤ºå™¨ MBProgressHUD SVProgressHUD Toast MJRefresh ç½‘ç»œ AFNetworking YTKNetwork æ•°æ®å¤„ç† MJExtension YYModel Protobuf å­˜å‚¨å’Œè¯»å–ç»“æž„åŒ–æ•°æ® æ•°æ®åº“ FMDB WCDB æŽ¨é€ JPush æžå…‰ åˆ†äº« UMengSocial å‹ç›Ÿ å›¾ç‰‡ SDWebImage å›¾ç‰‡ä¸‹è½½å’Œç¼“å­˜ MWPhotoBrowser å›¾ç‰‡æµè§ˆ FLAnimatedImage gifåŠ¨å›¾åŠ è½½ SDCycleScrollView è½®æ’­å›¾ éŸ³è§†é¢‘ LFLiveKit RTMP streaming SDK for iOS. å­—ç¬¦ä¸²å¤„ç† TTTAttributedLabel å¯Œæ–‡æœ¬ YYText åŠ¨ç”» pop CYLTabBarController tabbar åŠ¨ç”» js-OCäº¤äº’ WebViewJavascriptBridge ç³»ç»Ÿ Bugly UICKeyChainStore é’¥åŒ™ä¸²API Reachability ç½‘ç»œæƒ…å†µç›‘æµ‹ CocoaLumberjack Macå’ŒiOSä¸Šä¸€ä¸ªç®€æ·ã€å¼ºå¤§ã€çµæ´»çš„æ—¥å¿—æ¡†æž¶ DoraemonKit ä¸€æ¬¾åŠŸèƒ½é½å…¨çš„å®¢æˆ·ç«¯ï¼ˆ iOS ã€Android ï¼‰ç ”å‘åŠ©æ‰‹ MLeaksFinder å†…å­˜æ³„éœ² SAMKeychain é’¥åŒ™ä¸²API FLEX å¯ä»¥åœ¨appä¸­è¿›è¡Œdebug å…¶ä»– YYKit IQKeyboardManager é”®ç›˜ç®¡ç† ReactiveObjC RAC BlocksKit]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[WCDBçš„ä½¿ç”¨å’Œå°è£…]]></title>
    <url>%2F2019%2F08%2F13%2FWCDB%E7%9A%84%E4%BD%BF%E7%94%A8%E5%92%8C%E5%B0%81%E8%A3%85%2F</url>
    <content type="text"><![CDATA[å…¬å¸çš„é¡¹ç›®æ‰€ä½¿ç”¨çš„æ•°æ®åº“æ˜¯FMDBï¼Œå¹¶å¯¹å…¶è¿›è¡Œäº†äºŒæ¬¡å°è£…ï¼›ç”±äºŽå¹´ä¹…å¤±ä¿®ï¼Œé‚å†³å®šæ”¹ä¸ºWCDBï¼Œå› æ­¤ï¼ŒæŠ½æ—¶é—´å¯¹WCDBè¿›è¡Œäº†ä¸€ç•ªç ”ç©¶ã€‚WCDBæ˜¯è…¾è®¯å¼€æºçš„ä¸€æ¬¾ä¾›å®¢æˆ·ç«¯ä½¿ç”¨çš„æ•°æ®åº“ï¼ŒåŸºäºŽSQLCipherï¼Œæ”¯æŒiOSï¼ŒmacOSå’ŒAndroidã€‚ ç‰¹ç‚¹æ˜“ç”¨WCDBé€šè¿‡æ·±åº¦å°è£…æ•°æ®åº“è¯­è¨€ï¼Œä½¿å¼€å‘è€…å¯ä»¥é€šè¿‡OCæˆ–è€…Swiftçš„ä»£ç æ–¹å¼ä½¿ç”¨æ•°æ®åº“ï¼Œæ— éœ€ä¸ºäº†æ‹¼æŽ¥SQLè€Œå†™ä¸€å¤§å¨ä»£ç ï¼› é«˜æ•ˆWCDBé€šè¿‡æ¡†æž¶å±‚å’ŒSQLCipheræºç ä¼˜åŒ–ï¼Œä½¿å…¶æœ‰æ›´é«˜æ•ˆçš„è¡¨çŽ°ï¼› å®Œæ•´WCDBè¦†ç›–äº†æ•°æ®åº“ä½¿ç”¨è¿‡ç¨‹ä¸­å¤§å¤šæ•°çš„ä½¿ç”¨åœºæ™¯å’Œéœ€æ±‚ï¼› åŠ å¯†ï¼šWCDBæä¾›åŸºäºŽSQLCipherçš„æ•°æ®åº“åŠ å¯†ã€‚ æŸåä¿®å¤ï¼šWCDBå†…å»ºäº†Repair Kitç”¨äºŽä¿®å¤æŸåçš„æ•°æ®åº“ã€‚ åæ³¨å…¥ï¼šWCDBå†…å»ºäº†å¯¹SQLæ³¨å…¥çš„ä¿æŠ¤ã€‚ å®‰è£…WCDBä½¿ç”¨Cocoapodså®‰è£…WCDBï¼š æ›´æ–°pod repoï¼špod repo update åœ¨Podfileå¯¹åº”çš„targetä¸­ï¼Œæ·»åŠ pod &#39;WCDB&#39; æ‰§è¡Œpod install --verbose æ‰“å¼€workspace å¼•å…¥å¤´æ–‡ä»¶â€™#import â€˜ ä½¿ç”¨ä½¿ç”¨WCDåˆ†ä¸º2éƒ¨åˆ†ï¼šORMå’ŒCRUDã€‚ ORMORMçš„ä½œç”¨å°±æ˜¯æ˜ å°„æ•°æ®åº“å­—æ®µå’Œæˆ‘ä»¬çš„æ•°æ®æ¨¡åž‹ï¼›WCDBä½¿ç”¨å†…ç½®çš„å®æ¥è¿žæŽ¥ç±»ã€å±žæ€§ä¸Žè¡¨ã€å­—æ®µã€‚å…±æœ‰ä¸‰ç±»å®ï¼Œåˆ†åˆ«å¯¹åº”æ•°æ®åº“çš„å­—æ®µã€ç´¢å¼•å’Œçº¦æŸã€‚ å­—æ®µå®å­—æ®µå®ä»¥WCDB_SYNTHESIZEå¼€å¤´ï¼Œå®šä¹‰äº†ç±»å±žæ€§ä¸Žå­—æ®µä¹‹é—´çš„è”ç³»ã€‚ WCDB_SYNTHESIZE(className, propertyName)æ˜¯æœ€ç®€å•çš„çš„ç”¨æ³•ï¼Œç›´æŽ¥ä½¿ç”¨propertyNameä½œä¸ºæ•°æ®åº“ä¸­å­—æ®µçš„åç§°ã€‚ WCDB_SYNTHESIZE_COLUMN(className, propertyName, columnName)æ”¯æŒè‡ªå®šä¹‰å­—æ®µåã€‚ WCDB_SYNTHESIZE_DEFAULT(className, propertyName, defaultValue)è‡ªå®šä¹‰å­—æ®µé»˜è®¤å€¼ï¼ˆå¯ä»¥æ˜¯ä»»æ„Cç±»åž‹æˆ–NSString, NSData, NSNumber, NSNullï¼‰ã€‚ WCDB_SYNTHESIZE_COLUMN_DEFAULT(className, propertyName, cloumnName, defaultValue)ã€‚ å­—æ®µå®å‚è€ƒ ç´¢å¼•å®ç´¢å¼•å®ä»¥WCDB_INDEXå¼€å¤´ï¼Œå®šä¹‰äº†æ•°æ®åº“çš„ç´¢å¼•å±žæ€§ã€‚æ”¯æŒå®šä¹‰ç´¢å¼•çš„æŽ’åºæ–¹å¼ã€‚ WCDB_INDEX(className, indexSubfixName, propertyName)æ˜¯åŸºç¡€ç”¨æ³•ï¼Œç›´æŽ¥æŒ‡å®šæŸä¸ªå­—æ®µä¸ºç´¢å¼•ã€‚åŒæ—¶ï¼ŒWCDBä¼šå°†tableName + indexSubfixNameä½œä¸ºè¯¥ç´¢å¼•çš„åå­—ã€‚ WCDB_INDEX_ASC(className, indexSubfixName, propertyName)å‡åºã€‚ WCDB_INDEX_DESC(className, indexSubfixName, propertyName)é™åºã€‚ WCDB_UNIQUE_INDEX(className, indexSubfixName, propertyName)å”¯ä¸€ç´¢å¼•ã€‚ WCDB_UNIQUE_INDEX_ASC(className, indexSubfixName, propertyName)å”¯ä¸€ç´¢å¼•å‡åºæŽ’åˆ—ã€‚ WCDB_UNIQUE_INDEX_DESC(className, indexSubfixName, propertyName)å”¯ä¸€ç´¢å¼•é™åºæŽ’åˆ—ã€‚ WCDBé€šè¿‡indexSubfixNameåŒ¹é…å¤šç´¢å¼•ã€‚ç›¸åŒçš„indexSubfixNameä¼šè¢«ç»„åˆä¸ºå¤šå­—æ®µç´¢å¼•ã€‚ ä¾‹å¦‚ï¼š 12WCDB_INDEX(WCTSampleORMIndex, &quot;_multiIndexSubfix&quot;, multiIndexPart1)WCDB_INDEX(WCTSampleORMIndex, &quot;_multiIndexSubfix&quot;, multiIndexPart2) ç´¢å¼•å®ä¾‹å­ çº¦æŸå®çº¦æŸå®åŒ…å«äº†å­—æ®µçº¦æŸå’Œè¡¨çº¦æŸã€‚ å­—æ®µçº¦æŸä¸»é”®çº¦æŸä»¥WCDB_PRIMARYå¼€å¤´ï¼Œå®šä¹‰äº†æ•°æ®åº“çš„ä¸»é”®ï¼›æ”¯æŒè‡ªå®šä¹‰ä¸»é”®çš„æŽ’åºæ–¹å¼ã€æ˜¯å¦è‡ªå¢žã€‚ WCDB_PRIMARY(className, propertyName)æ˜¯åŸºç¡€ç”¨æ³•ï¼Œç›´æŽ¥ä½¿ç”¨propertyNameä½œä¸ºæ•°æ®åº“çš„ä¸»é”®ã€‚ WCDB_PRIMARY_ASC(className, propertyName)ä¸»é”®å‡åºã€‚ WCDB_PRIMARY_DESC(className, propertyName)ä¸»é”®é™åºã€‚ WCDB_PRIMARY_AUTO_INCREMENT(className, propertyName)ä¸»é”®è‡ªå¢žã€‚ WCDB_PRIMARY_ASC_AUTO_INCREMENT(className, propertyName)ä¸»é”®è‡ªå¢žåŠå‡åºçš„ç»„åˆã€‚ WCDB_PRIMARY_DESC_AUTO_INCREMENT(className, propertyName)ä¸»é”®è‡ªå¢žåŠé™åºç»„åˆã€‚ éžç©ºçº¦æŸï¼šWCDB_NOT_NULL(className, propertyName)ï¼Œå½“è¯¥å­—æ®µæ’å…¥æ•°æ®ä¸ºç©ºæ—¶ï¼Œæ•°æ®åº“ä¼šè¿”å›žé”™è¯¯ã€‚å”¯ä¸€çº¦æŸï¼šWCDB_UNIQUE(className, propertyName)ï¼Œå½“è¯¥å­—æ®µæ’å…¥æ•°æ®ä¸Žå…¶ä»–åˆ—å†²çªæ—¶ï¼Œæ•°æ®åº“ä¼šè¿”å›žé”™è¯¯ã€‚ æ³¨æ„ï¼šä½¿ç”¨äº†ä¸»é”®è‡ªå¢žåŽï¼Œåˆ›å»ºçš„æ¨¡åž‹å¿…é¡»è®¾ç½®isAutoIncrementä¸ºYESã€‚ è¡¨çº¦æŸå¤šä¸»é”®çº¦æŸä»¥WCDB_MULTI_PRIMARYå¼€å¤´ï¼Œå®šä¹‰äº†æ•°æ®åº“çš„å¤šä¸»é”®ï¼Œæ”¯æŒè‡ªå®šä¹‰æ¯ä¸ªä¸»é”®çš„æŽ’åºæ–¹å¼ã€‚ WCDB_MULTI_PRIMARY(className, constraintName, propertyName)ä¸ºåŸºç¡€ç”¨æ³•ï¼Œå¤šä¸ªä¸»é”®é€šè¿‡constrainNameåŒ¹é…ã€‚ WCDB_MULTI_PRIMARY_ASC(className, constraintName, propertyName)å¤šä¸»é”®å‡åºã€‚ WCDB_MULTI_PRIMARY_DESC(className, constraintName, propertyName)å¤šä¸»é”®é™åºã€‚ å¤šå­—æ®µå”¯ä¸€çº¦æŸä»¥WCDB_MULTI_UNIQUEå¼€å¤´ï¼Œå®šä¹‰äº†æ•°æ®åº“çš„å¤šå­—æ®µç»„åˆå”¯ä¸€ï¼Œæ”¯æŒè‡ªå®šä¹‰æ¯ä¸ªå­—æ®µçš„æŽ’åºæ–¹å¼ã€‚ WCDB_MULTI_UNIQUE(className, constraintName, propertyName)åŸºç¡€ç”¨æ³•ã€‚ WCDB_MULTI_UNIQUE_ASC(className, constraintName, propertyName)å‡åºã€‚ WCDB_MULTI_UNIQUE_DESC(className, constraintName, propertyName)é™åºã€‚ è¡¨çº¦æŸç¤ºä¾‹ ä¿®æ”¹å­—æ®µç”±äºŽSQLiteåªæ”¯æŒå¢žåŠ å­—æ®µï¼Œå¹¶ä¸æ”¯æŒåˆ é™¤å’Œé‡å‘½åå­—æ®µã€‚å› æ­¤ï¼ŒWCDBåœ¨åˆ é™¤å­—æ®µçš„æ—¶å€™åªæ˜¯å°†å…¶å®šä¹‰åˆ é™¤ï¼›åˆ é™¤å®šä¹‰åŽï¼ŒWCDBåªæ˜¯å°†è¯¥å­—æ®µå¿½ç•¥ï¼Œå…¶æ—§æ•°æ®ä¾ç„¶åœ¨æ•°æ®åº“ä¸­ï¼Œä½†æ–°å¢žçš„æ•°æ®åŸºæœ¬ä¸ä¼šå› ä¸ºè¯¥å­—æ®µäº§ç”Ÿé¢å¤–çš„æ€§èƒ½å’Œç©ºé—´æŸè€—ã€‚ç”±äºŽSQLiteä¸æ”¯æŒä¿®æ”¹å­—æ®µåç§°ï¼Œæ‰€ä»¥WCDBé‡‡ç”¨é‡æ–°æ˜ å°„çš„æ–¹å¼ã€‚ CRUDWCDBæä¾›äº†ä¸‰ä¸ªåŸºç¡€ç±»è¿›è¡Œæ•°æ®åº“æ“ä½œï¼šWCTDatabaseã€WCTTableã€WCTTransactionã€‚å®ƒä»¬çš„æŽ¥å£éƒ½æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ WCTDatabaseè¡¨ç¤ºä¸€ä¸ªæ•°æ®åº“ï¼Œå¯ä»¥è¿›è¡Œæ‰€æœ‰çš„æ•°æ®åº“æ“ä½œã€‚ åˆ›å»ºæ•°æ®åº“WCTDatabaseé€šè¿‡initWithPath:æŽ¥å£è¿›è¡Œåˆ›å»ºã€‚è¯¥æŽ¥å£ä¼šåŒæ—¶åˆ›å»ºpathä¸­ä¸å­˜åœ¨çš„ç›®å½•ã€‚ 12NSString* path = @"&lt;è¿™é‡Œæ˜¯æ•°æ®åº“è·¯å¾„&gt;";WCTDatabase *database = [[WCTDatabase alloc] initWithPath:path]; æ‰“å¼€æ•°æ®åº“WCDBé‡‡ç”¨æ‡’åŠ è½½çš„æ–¹å¼ç®¡ç†å¯¹è±¡ï¼Œå› æ­¤SQLiteè¿žæŽ¥ä¼šåœ¨ç¬¬ä¸€æ¬¡è¢«è®¿é—®çš„æ—¶å€™æ‰“å¼€ã€‚å¼€å‘è€…ä¸éœ€è¦æ‰‹åŠ¨æ‰“å¼€æ•°æ®åº“ã€‚ 12345678// åˆ¤æ–­æ•°æ®åº“æ˜¯å¦èƒ½å¤Ÿæ‰“å¼€if ([database canOpen]) &#123; //...&#125;// åˆ¤æ–­æ•°æ®åº“æ˜¯å¦å·²ç»æ‰“å¼€if ([database isOpened]) &#123; //...&#125; å…³é—­æ•°æ®åº“1[database close]; æ³¨æ„ï¼šç”±äºŽWCDBæ”¯æŒå¤šçº¿ç¨‹è®¿é—®æ•°æ®åº“ï¼Œå› æ­¤ï¼Œè¯¥æŽ¥å£ä¼šé˜»å¡žç­‰å¾…æ‰€æœ‰çº¿ç¨‹å‡å·²æ“ä½œç»“æŸã€‚ å¯¹äºŽä¸€ä¸ªç‰¹å®šè·¯å¾„çš„æ•°æ®åº“ï¼ŒWCDBä¼šåœ¨æ‰€æœ‰å¯¹è±¡å¯¹å…¶çš„å¼•ç”¨ç»“æŸæ—¶ï¼Œè‡ªåŠ¨å…³é—­æ•°æ®åº“ï¼Œå¹¶ä¸”å›žæ”¶å†…å­˜å’ŒSQLiteè¿žæŽ¥ã€‚å› æ­¤ï¼Œå¤§å¤šæ•°çš„æ—¶å€™ï¼Œå¼€å‘è€…å¹¶ä¸éœ€è¦æ‰‹åŠ¨å…³é—­æ•°æ®åº“ã€‚ WCTTableè¡¨ç¤ºä¸€ä¸ªè¡¨ã€‚ç­‰ä»·äºŽé¢„è®¾äº†classå’ŒtableNameçš„WCTDatabaseï¼Œä»…å¯ä»¥è¿›è¡Œæ•°æ®åº“çš„CRUDã€‚ 12WCTTable* table = [database getTableOfName:tableName withClass:WCTSampleTable.class]; WCTTransactionè¡¨ç¤ºä¸€ä¸ªäº‹åŠ¡ã€‚ 1WCTTransaction *transaction = [database getTransaction]; ä¸ŽWCTDatabaseçš„äº‹åŠ¡ä¸åŒï¼ŒWCTTransactionå¯ä»¥åœ¨å‡½æ•°å’Œå¯¹è±¡ä¹‹é—´ä¼ é€’ï¼Œå®žçŽ°è·¨çº¿ç¨‹çš„äº‹åŠ¡ã€‚ 12345678910111213//You can do a transaction in different threads using WCTTransaction.//But it's better to run serially, or an inner thread mutex will guarantee this.BOOL ret = [transaction begin];dispatch_async(dispatch_queue_create("other thread", DISPATCH_QUEUE_SERIAL), ^&#123; WCTSampleTransaction *object = [[WCTSampleTransaction alloc] init]; BOOL ret = [transaction insertObject:object into:tableName]; if (ret) &#123; [transaction commit]; &#125; else &#123; [transaction rollback]; &#125;&#125;); CRUDæ“ä½œåˆ›å»ºæ•°æ®åº“12345678910BOOL ret = [database createTableAndIndexesOfName:tableName withClass:WCTSampleTable.class];// æˆ–è€…BOOL ret = [database createTableOfName:tableName withColumnDefList:&#123; WCTSampleTable.intValue.def(WCTColumnTypeInteger32), WCTSampleTable.stringValue.def(WCTColumnTypeString) &#125;]; å°†æ•°æ®æ’å…¥è¡¨ insertObject:into:å’ŒinsertObjects:into:ï¼Œæ’å…¥å•ä¸ªæˆ–å¤šä¸ªå¯¹è±¡ insertOrReplaceObject:intoå’ŒinsertOrReplaceObjects:intoï¼Œæ’å…¥å•ä¸ªæˆ–å¤šä¸ªå¯¹è±¡ã€‚å½“å¯¹è±¡çš„ä¸»é”®åœ¨æ•°æ®åº“å†…å·²ç»å­˜åœ¨æ—¶ï¼Œæ›´æ–°æ•°æ®ï¼›å¦åˆ™æ’å…¥å¯¹è±¡ã€‚ insertObject:onProperties:into:å’ŒinsertObjects:onProperties:into:ï¼Œæ’å…¥å•ä¸ªæˆ–å¤šä¸ªå¯¹è±¡çš„éƒ¨åˆ†å±žæ€§ insertOrReplaceObject:onProperties:intoå’ŒinsertOrReplaceObjects:onProperties:intoï¼Œæ’å…¥å•ä¸ªæˆ–å¤šä¸ªå¯¹è±¡çš„éƒ¨åˆ†å±žæ€§ã€‚å½“å¯¹è±¡çš„ä¸»é”®åœ¨æ•°æ®åº“å†…å·²ç»å­˜åœ¨æ—¶ï¼Œæ›´æ–°æ•°æ®ï¼›å¦åˆ™æ’å…¥å¯¹è±¡ã€‚ åˆ é™¤æ•°æ® deleteAllObjectsFromTable:åˆ é™¤è¡¨å†…çš„æ‰€æœ‰æ•°æ® deleteObjectsFromTable:åŽå¯ç»„åˆæŽ¥ whereã€orderByã€limitã€offsetä»¥åˆ é™¤éƒ¨åˆ†æ•°æ® æ›´æ–°æ•°æ® updateAllRowsInTable:onProperties:withObject:ï¼Œé€šè¿‡objectæ›´æ–°æ•°æ®åº“ä¸­æ‰€æœ‰æŒ‡å®šåˆ—çš„æ•°æ® updateRowsInTable:onProperties:withObject:åŽå¯ç»„åˆæŽ¥ whereã€orderByã€limitã€offsetä»¥é€šè¿‡objectæ›´æ–°æŒ‡å®šåˆ—çš„éƒ¨åˆ†æ•°æ® updateAllRowsInTable:onProperty:withObject:ï¼Œé€šè¿‡objectæ›´æ–°æ•°æ®åº“æŸä¸€åˆ—çš„æ•°æ® updateRowsInTable:onProperty:withObject:åŽå¯ç»„åˆæŽ¥ whereã€orderByã€limitã€offsetä»¥é€šè¿‡objectæ›´æ–°æŸä¸€åˆ—çš„éƒ¨åˆ†æ•°æ® updateAllRowsInTable:onProperties:withRow:ï¼Œé€šè¿‡æ•°ç»„æ›´æ–°æ•°æ®åº“ä¸­çš„æ‰€æœ‰æŒ‡å®šåˆ—çš„æ•°æ® updateRowsInTable:onProperties:withRow:åŽå¯ç»„åˆæŽ¥ whereã€orderByã€limitã€offsetä»¥é€šè¿‡æ•°ç»„æ›´æ–°æŒ‡å®šåˆ—çš„éƒ¨åˆ†æ•°æ® updateAllRowsInTable:onProperty:withRow:ï¼Œé€šè¿‡æ•°ç»„æ›´æ–°æ•°æ®åº“æŸä¸€åˆ—çš„æ•°æ® updateRowsInTable:onProperty:withRow:åŽå¯ç»„åˆæŽ¥ whereã€orderByã€limitã€offsetä»¥é€šè¿‡æ•°ç»„æ›´æ–°æŸä¸€åˆ—çš„éƒ¨åˆ†æ•° æŸ¥æ‰¾æ•°æ® getOneObjectOfClass:fromTable:åŽå¯æŽ¥ whereã€orderByã€limitã€offsetä»¥ä»Žæ•°æ®åº“ä¸­å–å‡ºä¸€è¡Œæ•°æ®å¹¶ç»„åˆæˆobject getOneObjectOnResults:fromTable:åŽå¯æŽ¥ whereã€orderByã€limitã€offsetä»¥ä»Žæ•°æ®åº“ä¸­å–å‡ºä¸€è¡Œæ•°æ®çš„éƒ¨åˆ†åˆ—å¹¶ç»„åˆæˆobject getOneRowOnResults:fromTable:åŽå¯æŽ¥ whereã€orderByã€limitã€offsetä»¥ä»Žæ•°æ®åº“ä¸­å–å‡ºä¸€è¡Œæ•°æ®çš„éƒ¨åˆ†åˆ—å¹¶ç»„åˆæˆæ•°ç»„ getOneColumnOnResult:fromTable:åŽå¯æŽ¥ whereã€orderByã€limitã€offsetä»¥ä»Žæ•°æ®åº“ä¸­å–å‡ºä¸€åˆ—æ•°æ®å¹¶ç»„åˆæˆæ•°ç»„ getOneDistinctColumnOnResult:fromTable:åŽå¯æŽ¥ whereã€orderByã€limitã€offsetä»¥ä»Žæ•°æ®åº“ä¸­å–å‡ºä¸€åˆ—æ•°æ®ï¼Œå¹¶å–distinctåŽç»„åˆæˆæ•°ç»„ã€‚ getOneValueOnResult:fromTable:åŽå¯æŽ¥ whereã€orderByã€limitã€offsetä»¥ä»Žæ•°æ®åº“ä¸­å–å‡ºä¸€è¡Œæ•°æ®çš„æŸä¸€åˆ— getAllObjectsOfClass:fromTable:ï¼Œå–å‡ºæ‰€æœ‰æ•°æ®ï¼Œå¹¶ç»„åˆæˆobject getObjectsOfClass:fromTable:åŽå¯æŽ¥ whereã€orderByã€limitã€offsetä»¥ä»Žæ•°æ®åº“ä¸­å–å‡ºä¸€éƒ¨åˆ†æ•°æ®ï¼Œå¹¶ç»„åˆæˆobject getAllObjectsOnResults:fromTable:ï¼Œå–å‡ºæ‰€æœ‰æ•°æ®çš„æŒ‡å®šåˆ—ï¼Œå¹¶ç»„åˆæˆobject getObjectsOnResults:fromTable:åŽå¯æŽ¥whereã€orderByã€limitã€offsetä»¥ä»Žæ•°æ®åº“ä¸­å–å‡ºä¸€éƒ¨åˆ†æ•°æ®çš„æŒ‡å®šåˆ—ï¼Œå¹¶ç»„åˆæˆobject getAllRowsOnResults:fromTable:ï¼Œå–å‡ºæ‰€æœ‰æ•°æ®çš„æŒ‡å®šåˆ—ï¼Œå¹¶ç»„åˆæˆæ•°ç»„ getRowsOnResults:fromTable:åŽå¯æŽ¥whereã€orderByã€limitã€offsetä»¥ä»Žæ•°æ®åº“ä¸­å–å‡ºä¸€éƒ¨åˆ†æ•°æ®çš„æŒ‡å®šåˆ—ï¼Œå¹¶ç»„åˆæˆæ•°ç»„ CRUDç¤ºä¾‹ é“¾å¼æŽ¥å£WCDBå¯¹äºŽå¢žåˆ æ”¹æŸ¥æ“ä½œï¼Œéƒ½æä¾›äº†å¯¹åº”çš„ç±»ä»¥å®žçŽ°é“¾å¼è°ƒç”¨ WCTInsert WCTDelete WCTUpdate WCTSelect WCTRowSelect WCTMultiSelect 123456WCTSelect *select = [database prepareSelectObjectsOnResults:Message.localID.max() fromTable:@"message"];NSArray&lt;Message *&gt; *objects = [[[[select where:Message.localID &gt; 0] groupBy:&#123;Message.content&#125;] orderBy:Message.createTime.order()] limit:10].allObjects; å…¶ä»–äº‹åŠ¡è°ƒè¯•SQL[WCTStatistics SetGlobalSQLTrace:]ä¼šç›‘æŽ§æ‰€æœ‰æ‰§è¡Œçš„SQLï¼Œè¯¥æŽ¥å£å¯ç”¨äºŽè°ƒè¯•ï¼Œç¡®å®šSQLæ˜¯å¦æ‰§è¡Œæ­£ç¡®ã€‚ 1234//SQL Execution Monitor[WCTStatistics SetGlobalSQLTrace:^(NSString *sql) &#123; NSLog(@"SQL: %@", sql);&#125;]; WINQè‡ªå®šä¹‰ç±»åž‹éš”ç¦»C++ä»£ç å…³äºŽæ•°æ®åº“åŠ å¯†é«˜çº§ç”¨æ³•ä¸»é”®è‡ªå¢ž(Auto Increment)asé‡å®šå‘å¤šè¡¨æŸ¥è¯¢åŸºç¡€ç±»å…±äº«å¯¹äºŽåŒä¸€ä¸ªè·¯å¾„çš„æ•°æ®åº“ï¼Œä¸åŒçš„WCTDatabaseã€WCTTableã€WCTTransactionå¯¹è±¡å…±äº«åŒä¸€ä¸ªWCDBæ ¸å¿ƒã€‚ 1234WCTDatabase* database1 = [[WCTDatabase alloc] initWithPath:path];WCTDatabase* database2 = [[WCTDatabase alloc] initWithPath:path];database1.tag = 1;NSLog(@"%d", database2.tag);//print 1 æ–‡ä»¶æ“ä½œWCDBæä¾›äº†åˆ é™¤æ•°æ®åº“ã€ç§»åŠ¨æ•°æ®åº“ã€èŽ·å–æ•°æ®åº“å ç”¨ç©ºé—´å’Œä½¿ç”¨è·¯å¾„çš„æ–‡ä»¶æ“ä½œæŽ¥å£ã€‚ 1234- (BOOL)removeFilesWithError:(WCTError **)error;- (BOOL)moveFilesToDirectory:(NSString *)directory withExtraFiles:(NSArray&lt;NSString *&gt; *)extraFiles andError:(WCTError **)error;- (NSArray&lt;NSString *&gt; *)getPaths;- (NSUInteger)getFilesSizeWithError:(WCTError **)error; è‹¥æ˜¯ä¸€ä¸ªçº¿ç¨‹æ­£åœ¨æ“ä½œæ•°æ®åº“ï¼Œè€Œå¦ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œç§»åŠ¨æ•°æ®åº“çš„æ“ä½œï¼Œå¯èƒ½ä¼šå¯¼è‡´æ•°æ®åº“çš„æŸåï¼›å› æ­¤ï¼Œæ–‡ä»¶æ“ä½œé€šå¸¸æ”¾åœ¨å…³é—­æ•°æ®åº“åŽã€‚ 1234567[database close:^&#123; WCTError *error = nil; BOOL ret = [database moveFilesToDirectory:otherDirectory withError:&amp;error]; if (!ret) &#123; NSLog(@"Move files Error %@", error); &#125;&#125;];]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[jenkinsæ‰§è¡ŒGitHubä¸­çš„Pythonä»£ç ]]></title>
    <url>%2F2019%2F08%2F13%2Fjenkins%E6%89%A7%E8%A1%8CGitHub%E4%B8%AD%E7%9A%84Python%E4%BB%A3%E7%A0%81%2F</url>
    <content type="text"><![CDATA[jenkinsæ˜¯å¾ˆå¥½ç”¨çš„ä¸€ä¸ªè‡ªåŠ¨åŒ–æµ‹è¯•å’Œæ‰§è¡Œä»£ç çš„å·¥å…·ï¼ŒæŸ¥çœ‹å¦‚ä½•å®‰è£…jenkins; æˆ‘ä»¬çš„ä»£ç æ˜¯å­˜å‚¨åœ¨ä»£ç ä»“åº“é‡Œé¢çš„ï¼Œä¸€èˆ¬ï¼Œæˆ‘ä»¬ä½¿ç”¨GitHubæ¥å­˜æ”¾æˆ‘ä»¬çš„ä»£ç ï¼› é‚£ä¹ˆï¼Œæ€Žä¹ˆä½¿ç”¨jenkinsæ¥ç›´æŽ¥æ‰§è¡Œæˆ‘ä»¬å­˜æ”¾åœ¨GitHubä¸­çš„ä»£ç å‘¢ï¼Ÿ jenkins åˆ›å»ºä¸€ä¸ªä»»åŠ¡ é…ç½®jenkinsé€‰æ‹©GitHubé¡¹ç›® å¡«å†™æºç ç®¡ç† å¦‚æžœæ²¡æœ‰å‡­è¯ï¼Œå°±ç‚¹å‡»Credentialså³è¾¹çš„æ·»åŠ æ³¨æ„ï¼šè¿™é‡Œæ·»åŠ çš„æ˜¯SSHçš„ç§é’¥ å¦‚ä½•æŸ¥è¯¢è‡ªå·±çš„sshå¯†é’¥ï¼Ÿ è¿›å…¥sshæ–‡ä»¶å¤¹ 1cd ~/.ssh æŸ¥çœ‹ç§é’¥æ–‡ä»¶ 1cat id_rsa å®šæ—¶æž„å»ºï¼ˆå¯é€‰ï¼‰ æ¯æ¬¡æž„å»ºä¹‹å‰æ¸…ç©ºä¸€ä¸‹Jenkinså·¥ä½œç©ºé—´ï¼Œé¿å…æ‹‰å–çš„ä»£ç æœ‰å†²çª æž„å»ºåœ¨æž„å»ºé€‰é¡¹ä¸­é€‰æ‹©å¢žåŠ æž„å»ºæ­¥éª¤-&gt;Execute shell; ç„¶åŽå¡«å†™éœ€è¦æ‰§è¡Œçš„è„šæœ¬ï¼š æœ€åŽç‚¹å‡»ä¿å­˜ï¼Œç„¶åŽå°±å¯ä»¥buildæˆ‘çš„é¡¹ç›®å•¦ï¼]]></content>
      <categories>
        <category>jenkins</category>
      </categories>
      <tags>
        <tag>jenkins</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[gitæœ¬åœ°åº“è¿žæŽ¥è¿œç«¯åº“]]></title>
    <url>%2F2019%2F08%2F13%2Fgit%E6%9C%AC%E5%9C%B0%E5%BA%93%E8%BF%9E%E6%8E%A5%E8%BF%9C%E7%AB%AF%E5%BA%93%2F</url>
    <content type="text"><![CDATA[æˆ‘ä»¬ä½¿ç”¨gitæœ‰æ—¶å€™ä¼šæœ‰è¿™ç§æƒ…å†µï¼šæˆ‘ä»¬åªåœ¨æœ¬åœ°åˆ›å»ºäº†gitä»“åº“ï¼Œå¹¶æ²¡æœ‰åœ¨GitHubä¸Šåˆ›å»ºè¿œç«¯ä»“åº“ï¼›å½“æˆ‘ä»¬åœ¨æœ¬çš„çš„gitä»“åº“æäº¤äº†å‡ æ¬¡ä¿®æ”¹åŽï¼Œæƒ³è¦å°†æ­¤gitä»“åº“æ”¾åœ¨GitHubï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦æ€Žä¹ˆåšå‘¢ï¼Ÿ è¿žæŽ¥è¿œç¨‹ä»“åº“å‡è®¾æˆ‘ä»¬å·²ç»åœ¨GitHubä¸Šåˆ›å»ºäº†ä¸€ä¸ªç©ºçš„ä»“åº“ å…ˆcdåˆ°æˆ‘ä»¬æœ¬åœ°gitä»“åº“æ‰€åœ¨çš„ç›®å½•,ç„¶åŽæ‰§è¡Œgitè¿žæŽ¥æ“ä½œ 1git remote add origin git@github.com:FlameTinary/TYPythonTools.git é”™è¯¯æ­¥éª¤ç„¶åŽæ‰§è¡Œgit pullï¼Œä¼šå‘çŽ°ï¼ŒæŠ¥é”™äº†ï¼š 123456789101112131415161718192021222324warning: no common commitsremote: Enumerating objects: 4, done.remote: Counting objects: 100% (4/4), done.remote: Compressing objects: 100% (4/4), done.Unpacking objects: 100% (4/4), done.remote: Total 4 (delta 0), reused 0 (delta 0), pack-reused 0From github.com:FlameTinary/TYPythonTools * [new branch] master -&gt; origin/masterThere is no tracking information for the current branch.Please specify which branch you want to merge with.See git-pull(1) for details. git pull &lt;remote&gt; &lt;branch&gt;If you wish to set tracking information for this branch you can do so with: git branch --set-upstream-to=origin/&lt;branch&gt; master âœ˜ sheldon@tianyudeMacBook-Pro î‚° ~/Documents/TYPythonTools î‚° î‚  master î‚° git pull remote masterfatal: &apos;remote&apos; does not appear to be a git repositoryfatal: Could not read from remote repository.Please make sure you have the correct access rightsand the repository exists. æ‰§è¡Œgit pull origin master --allow-unrelated-historiesä¹Ÿä¸è¡Œï¼› é‚£ä¹ˆæ€Žä¹ˆåŠžå‘¢ï¼Ÿ æ­£ç¡®æ­¥éª¤åŽŸæ¥æ˜¯æˆ‘ä»¬æœ¬çš„çš„branchå’Œè¿œç«¯çš„branchæ— æ³•å¯¹åº”èµ·æ¥ï¼› å¯ä»¥æ‰§è¡Œgit branch --set-upstream-to=origin/master masterï¼Œä¼šå‡ºçŽ°ï¼š 1Branch &apos;master&apos; set up to track remote branch &apos;master&apos; from &apos;origin&apos;. ç„¶åŽæˆ‘ä»¬å†æ‰§è¡Œgit pull origin master --allow-unrelated-historiesï¼› æœ€åŽå°†æœ¬åœ°å†…å®¹æŽ¨é€åˆ°è¿œç«¯ï¼š 1git push -u origin master å¤§åŠŸå‘Šæˆï¼ï¼ æ€»ç»“ï¼š1. è¿žæŽ¥è¿œç«¯ä»“åº“1git remote add origin git@github.com:FlameTinary/TYPythonTools.git 2. è¿žæŽ¥åˆ†æ”¯1git branch --set-upstream-to=origin/master master 3. æ‹‰å–è¿œç«¯ä»£ç 1git pull origin master --allow-unrelated-histories 4. æŽ¨é€æœ¬åœ°ä»£ç åˆ°è¿œç«¯1git push -u origin master]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è§£å†³jenkinsåœ¨è£…æœ‰anacondaçŽ¯å¢ƒçš„æœºå™¨ä¸Šæ‰§è¡ŒPythonæ–‡ä»¶ï¼ŒPythonçŽ¯å¢ƒé”™è¯¯çš„é—®é¢˜]]></title>
    <url>%2F2019%2F08%2F13%2F%E8%A7%A3%E5%86%B3jenkins%E5%9C%A8%E8%A3%85%E6%9C%89anaconda%E7%8E%AF%E5%A2%83%E7%9A%84%E6%9C%BA%E5%99%A8%E4%B8%8A%E6%89%A7%E8%A1%8CPython%E6%96%87%E4%BB%B6%EF%BC%8CPython%E7%8E%AF%E5%A2%83%E9%94%99%E8%AF%AF%E7%9A%84%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[ä½¿ç”¨jenkinså®šæ—¶æ‰§è¡ŒæŸäº›ä»»åŠ¡æˆ–è€…æ‰§è¡Œæµ‹è¯•æ˜¯å¾ˆæ–¹ä¾¿çš„ä¸€ä¸ªå·¥ä½œï¼Œä½†æ˜¯æœ‰äº›æ—¶å€™å¦‚æžœç¢°åˆ°ä¸€äº›çŽ¯å¢ƒæˆ–è€…å†²çªæ–¹é¢çš„é—®é¢˜ä¹Ÿæ˜¯æ¯”è¾ƒå¤´ç–¼çš„ã€‚ pythonåˆ†ä¸º2.7å’Œ3.0ä»¥ä¸Šä¸¤ä¸ªå¤§ç‰ˆæœ¬ï¼Œæ‰€ä»¥ä¸€äº›æœ‹å‹çš„ç”µè„‘ä¸­ä¼šåŒæ—¶å­˜åœ¨è¿™ä¸¤ç§ç‰ˆæœ¬ã€‚ç”±äºŽæˆ‘çš„ç”µè„‘æ˜¯MacBook proï¼Œ æ‰€ä»¥ç³»ç»Ÿä¸­è‡ªåŠ¨å®‰è£…çš„2.7çš„ç‰ˆæœ¬ã€‚ ä½†æˆ‘éœ€è¦ä½¿ç”¨3.7çš„ç‰ˆæœ¬ä½œä¸ºä¸»è¦å¼€å‘ï¼Œä¸”ç³»ç»Ÿä¸­çš„2.7ç‰ˆæœ¬ä¹Ÿä¸èƒ½åˆ é™¤ï¼Œå› ä¸ºç³»ç»Ÿçš„ä¸€äº›åŠŸèƒ½éœ€è¦ä¾èµ–2.7çš„ç‰ˆæœ¬ã€‚ æ‰€ä»¥ï¼Œåœ¨ç»è¿‡åŒç‰ˆæœ¬çš„æŠ˜è…¾åŽï¼Œè¿˜æ˜¯é€‰æ‹©äº†Anacondaçš„æ€€æŠ±ã€‚ ä»¥å‰ä¸€ç›´ä½¿ç”¨Jenkinsè‡ªåŠ¨æ‰§è¡ŒiOSç¨‹åºï¼Œæœ€è¿‘å†™äº†ä¸€ä¸ªPythonçš„å·¥å…·ï¼Œéœ€è¦å®šæ—¶æ‰§è¡Œï¼Œæ‰€ä»¥ä¹Ÿæ˜¯ç”¨Jenkinsæ¥æ“ä½œï¼›ä½†æ˜¯ï¼Œé—®é¢˜æ¥äº†ï¼Œåœ¨Jenkinsä¸­çš„Execute shellä¸­ç›´æŽ¥å†™äº†ï¼š 1python "æ–‡ä»¶è·¯å¾„" è¿™æ ·å´æŠ¥é”™äº†â€¦ å¯æ˜¯æ˜Žæ˜Žåœ¨Terminalä¸­æ‰§è¡Œæ²¡æœ‰é—®é¢˜å•Šï¼ï¼ ç¬¬ä¸€æ¬¡çŒœæµ‹å¯èƒ½æ˜¯Jenkinsæ‰¾ä¸åˆ°pythonçš„è·¯å¾„ï¼Œæ‰€ä»¥åœ¨Jenkins -&gt; Manage Jenkins -&gt; Configure System -&gt; å…¨å±€å±žæ€§ -&gt; Environment variables -&gt; ä¸­æ·»åŠ äº†Pythonçš„è·¯å¾„ï¼Œç„¶å¹¶åµï¼ ç»§ç»­æŠ˜è…¾ï¼Œæ—¢ç„¶æ‰¾ä¸åˆ°åŒ…ï¼Œé‚£ä¹ˆæˆ‘å°±æŠŠåŒ…æ”¾åœ¨å·¥ç¨‹æ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„ä¸­ï¼Œæœ€åŽè¿˜æ˜¯æ‰¾ä¸åˆ°! æœ€åŽç›´æŽ¥ä½¿ç”¨pythonç»å¯¹è·¯å¾„æ‰§è¡Œæ–‡ä»¶ 1/anaconda3/bin/python ~/Documents/TYPythonTools/TYChartRobot.py]]></content>
      <categories>
        <category>jenkins</category>
      </categories>
      <tags>
        <tag>jenkins</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Command Line Tools ä½¿ç”¨]]></title>
    <url>%2F2019%2F08%2F12%2FCommand-Line-Tools-%E4%BD%BF%E7%94%A8%2F</url>
    <content type="text"><![CDATA[å®‰è£…ç›¸å…³å‘½ä»¤æŸ¥çœ‹ç›®å‰æˆ‘ä½¿ç”¨çš„å·¥å…·XCODEç‰ˆæœ¬12345# commandxcode-select --print-path# print/Applications/Xcode.app/Contents/Developer é€‰æ‹©XCODEä¸­çš„é»˜è®¤ç‰ˆæœ¬ç”¨äºŽæˆ‘çš„å‘½ä»¤è¡Œå·¥å…·12345678# commandsudo xcode-select -switch &lt;path/to/&gt;Xcode.app# æ³¨é‡Š`&lt;path/to/&gt;`æ˜¯è·¯å¾„è¦ä½¿ç”¨çš„å¼€å‘Xcode.appåŒ…# å®žä¾‹sudo xcode-select -switch /Applications/Xcode5.1.1/Xcode.app ä½¿ç”¨xcodebuildæ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ä»¥è®©ä½ çš„å·¥ç¨‹é€šè¿‡projectsã€workspacesè¿›è¡Œç¼–è¯‘ã€æµ‹è¯•ã€åˆ†æžã€æ‰“åŒ…ã€‚å®ƒå¯ä»¥è¿è¡Œåœ¨åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªTargetçš„å·¥ç¨‹ä¸Šé¢ï¼Œæˆ–è€…åœ¨projects ã€workspacesåŒ…å«schemeä¸Šé¢ã€‚ åˆ—å‡ºæ‰€æœ‰çš„Target123456789101112131415161718192021222324# commandxcodebuild -list -project &lt;your project name&gt;.xcodeproj# æ³¨é‡Š`&lt;your project name&gt;`æ˜¯ä½ å·¥ç¨‹çš„åç§°# ç¤ºä¾‹xcodebuild -list -project TYDemos.xcodeproj# print Information about project "TYDemos": Targets: TYDemos qwer Build Configurations: Debug Release If no build configuration is specified and -scheme is not passed then "Release" is used. Schemes: qwer TYDemos ç¼–è¯‘ä½ å·¥ç¨‹çš„é…ç½®å’Œschemes123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158# commandxcodebuild -scheme &lt;your scheme name&gt; build# æ³¨é‡Š`&lt;your scheme name&gt;`æ˜¯ä½ é€‰æ‹©ç‰¹å®šçš„ç¼–è¯‘å’Œæ‰§è¡Œçš„ä¸€ä¸ªscheme# ç¤ºä¾‹xocdebuild -scheme TYGameSceneDemo build# printnote: Using new build systemnote: Planning build2019-06-13 11:23:50.516 xcodebuild[61408:7436815] DTDeviceKit: deviceType from 00008006-000F29961AC1002E was NULL2019-06-13 11:23:50.516 xcodebuild[61408:7436815] DTDeviceKit: deviceType from 00008006-000F29961AC1002E was NULL2019-06-13 11:23:50.516 xcodebuild[61408:7436815] iPhoneSupport: ðŸ“±&lt;DVTiOSDevice (0x7ff824b6d8b0), Sheldonâ€™s iPhone 7plus, iPhone, 12.2 (16E227), 312a7baecea95257c11a5eb61d1203138faac05c&gt; unable to mount DeveloperDiskImage (Error Domain=com.apple.dtdevicekit Code=601 "Could not find platform" UserInfo=&#123;NSLocalizedDescription=Could not find platform&#125;)note: Constructing build descriptionCreateBuildDirectory /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Products (in target: TYGameSceneDemo) cd /Users/sheldon/Documents/TYDemos/TYGameSceneDemo builtin-create-build-directory /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/ProductsCreateBuildDirectory /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex (in target: TYGameSceneDemo) cd /Users/sheldon/Documents/TYDemos/TYGameSceneDemo builtin-create-build-directory /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindexMkDir /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Products/Debug-iphoneos/TYGameSceneDemo.app (in target: TYGameSceneDemo) cd /Users/sheldon/Documents/TYDemos/TYGameSceneDemo /bin/mkdir -p /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Products/Debug-iphoneos/TYGameSceneDemo.appProcessProductPackaging /Users/sheldon/Library/MobileDevice/Provisioning\ Profiles/e91c7402-e02a-45ac-aff3-c73c563abcfb.mobileprovision /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Products/Debug-iphoneos/TYGameSceneDemo.app/embedded.mobileprovision (in target: TYGameSceneDemo) cd /Users/sheldon/Documents/TYDemos/TYGameSceneDemo builtin-productPackagingUtility /Users/sheldon/Library/MobileDevice/Provisioning\ Profiles/e91c7402-e02a-45ac-aff3-c73c563abcfb.mobileprovision -o /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Products/Debug-iphoneos/TYGameSceneDemo.app/embedded.mobileprovisionWriteAuxiliaryFile /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/DerivedSources/Entitlements.plist (in target: TYGameSceneDemo) cd /Users/sheldon/Documents/TYDemos/TYGameSceneDemo write-file /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/DerivedSources/Entitlements.plistProcessProductPackaging "" /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/TYGameSceneDemo.app.xcent (in target: TYGameSceneDemo) cd /Users/sheldon/Documents/TYDemos/TYGameSceneDemoEntitlements:&#123; "application-identifier" = "CC9XV3GRSV.top.sheldon.TYGameSceneDemo"; "com.apple.developer.team-identifier" = CC9XV3GRSV; "get-task-allow" = 1; "keychain-access-groups" = ( "CC9XV3GRSV.top.sheldon.TYGameSceneDemo" );&#125; builtin-productPackagingUtility -entitlements -format xml -o /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/TYGameSceneDemo.app.xcentWriteAuxiliaryFile /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/all-product-headers.yaml (in target: TYGameSceneDemo) cd /Users/sheldon/Documents/TYDemos/TYGameSceneDemo write-file /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/all-product-headers.yamlWriteAuxiliaryFile /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/TYGameSceneDemo.hmap (in target: TYGameSceneDemo) cd /Users/sheldon/Documents/TYDemos/TYGameSceneDemo write-file /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/TYGameSceneDemo.hmapWriteAuxiliaryFile /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/TYGameSceneDemo-project-headers.hmap (in target: TYGameSceneDemo) cd /Users/sheldon/Documents/TYDemos/TYGameSceneDemo write-file /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/TYGameSceneDemo-project-headers.hmapWriteAuxiliaryFile /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/TYGameSceneDemo-own-target-headers.hmap (in target: TYGameSceneDemo) cd /Users/sheldon/Documents/TYDemos/TYGameSceneDemo write-file /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/TYGameSceneDemo-own-target-headers.hmapWriteAuxiliaryFile /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/TYGameSceneDemo-generated-files.hmap (in target: TYGameSceneDemo) cd /Users/sheldon/Documents/TYDemos/TYGameSceneDemo write-file /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/TYGameSceneDemo-generated-files.hmapWriteAuxiliaryFile /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/TYGameSceneDemo-all-non-framework-target-headers.hmap (in target: TYGameSceneDemo) cd /Users/sheldon/Documents/TYDemos/TYGameSceneDemo write-file /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/TYGameSceneDemo-all-non-framework-target-headers.hmapWriteAuxiliaryFile /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/TYGameSceneDemo-all-target-headers.hmap (in target: TYGameSceneDemo) cd /Users/sheldon/Documents/TYDemos/TYGameSceneDemo write-file /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/TYGameSceneDemo-all-target-headers.hmapCompileC /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/Objects-normal/arm64/GameViewController.o /Users/sheldon/Documents/TYDemos/TYGameSceneDemo/TYGameSceneDemo/GameViewController.m normal arm64 objective-c com.apple.compilers.llvm.clang.1_0.compiler (in target: TYGameSceneDemo) cd /Users/sheldon/Documents/TYDemos/TYGameSceneDemo export LANG=en_US.US-ASCII /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x objective-c -arch arm64 -fmessage-length=178 -fdiagnostics-show-note-include-stack -fmacro-backtrace-limit=0 -fcolor-diagnostics -std=gnu11 -fobjc-arc -fobjc-weak -fmodules -gmodules -fmodules-cache-path=/Users/sheldon/Library/Developer/Xcode/DerivedData/ModuleCache.noindex -fmodules-prune-interval=86400 -fmodules-prune-after=345600 -fbuild-session-file=/Users/sheldon/Library/Developer/Xcode/DerivedData/ModuleCache.noindex/Session.modulevalidation -fmodules-validate-once-per-build-session -Wnon-modular-include-in-framework-module -Werror=non-modular-include-in-framework-module -Wno-trigraphs -fpascal-strings -O0 -fno-common -Wno-missing-field-initializers -Wno-missing-prototypes -Werror=return-type -Wdocumentation -Wunreachable-code -Wno-implicit-atomic-properties -Werror=deprecated-objc-isa-usage -Wno-objc-interface-ivars -Werror=objc-root-class -Wno-arc-repeated-use-of-weak -Wimplicit-retain-self -Wduplicate-method-match -Wno-missing-braces -Wparentheses -Wswitch -Wunused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wempty-body -Wuninitialized -Wconditional-uninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wconstant-conversion -Wint-conversion -Wbool-conversion -Wenum-conversion -Wno-float-conversion -Wnon-literal-null-conversion -Wobjc-literal-conversion -Wshorten-64-to-32 -Wpointer-sign -Wno-newline-eof -Wno-selector -Wno-strict-selector-match -Wundeclared-selector -Wdeprecated-implementations -DDEBUG=1 -DOBJC_OLD_DISPATCH_PROTOTYPES=0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS12.2.sdk -fstrict-aliasing -Wprotocol -Wdeprecated-declarations -miphoneos-version-min=12.2 -g -Wno-sign-conversion -Winfinite-recursion -Wcomma -Wblock-capture-autoreleasing -Wstrict-prototypes -Wno-semicolon-before-method-body -Wunguarded-availability -fembed-bitcode-marker -index-store-path /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Index/DataStore -iquote /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/TYGameSceneDemo-generated-files.hmap -I/Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/TYGameSceneDemo-own-target-headers.hmap -I/Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/TYGameSceneDemo-all-target-headers.hmap -iquote /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/TYGameSceneDemo-project-headers.hmap -I/Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Products/Debug-iphoneos/include -I/Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/DerivedSources-normal/arm64 -I/Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/DerivedSources/arm64 -I/Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/DerivedSources -F/Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Products/Debug-iphoneos -MMD -MT dependencies -MF /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/Objects-normal/arm64/GameViewController.d --serialize-diagnostics /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/Objects-normal/arm64/GameViewController.dia -c /Users/sheldon/Documents/TYDemos/TYGameSceneDemo/TYGameSceneDemo/GameViewController.m -o /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/Objects-normal/arm64/GameViewController.oCompileC /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/Objects-normal/arm64/AppDelegate.o /Users/sheldon/Documents/TYDemos/TYGameSceneDemo/TYGameSceneDemo/AppDelegate.m normal arm64 objective-c com.apple.compilers.llvm.clang.1_0.compiler (in target: TYGameSceneDemo) cd /Users/sheldon/Documents/TYDemos/TYGameSceneDemo export LANG=en_US.US-ASCII /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x objective-c -arch arm64 -fmessage-length=178 -fdiagnostics-show-note-include-stack -fmacro-backtrace-limit=0 -fcolor-diagnostics -std=gnu11 -fobjc-arc -fobjc-weak -fmodules -gmodules -fmodules-cache-path=/Users/sheldon/Library/Developer/Xcode/DerivedData/ModuleCache.noindex -fmodules-prune-interval=86400 -fmodules-prune-after=345600 -fbuild-session-file=/Users/sheldon/Library/Developer/Xcode/DerivedData/ModuleCache.noindex/Session.modulevalidation -fmodules-validate-once-per-build-session -Wnon-modular-include-in-framework-module -Werror=non-modular-include-in-framework-module -Wno-trigraphs -fpascal-strings -O0 -fno-common -Wno-missing-field-initializers -Wno-missing-prototypes -Werror=return-type -Wdocumentation -Wunreachable-code -Wno-implicit-atomic-properties -Werror=deprecated-objc-isa-usage -Wno-objc-interface-ivars -Werror=objc-root-class -Wno-arc-repeated-use-of-weak -Wimplicit-retain-self -Wduplicate-method-match -Wno-missing-braces -Wparentheses -Wswitch -Wunused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wempty-body -Wuninitialized -Wconditional-uninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wconstant-conversion -Wint-conversion -Wbool-conversion -Wenum-conversion -Wno-float-conversion -Wnon-literal-null-conversion -Wobjc-literal-conversion -Wshorten-64-to-32 -Wpointer-sign -Wno-newline-eof -Wno-selector -Wno-strict-selector-match -Wundeclared-selector -Wdeprecated-implementations -DDEBUG=1 -DOBJC_OLD_DISPATCH_PROTOTYPES=0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS12.2.sdk -fstrict-aliasing -Wprotocol -Wdeprecated-declarations -miphoneos-version-min=12.2 -g -Wno-sign-conversion -Winfinite-recursion -Wcomma -Wblock-capture-autoreleasing -Wstrict-prototypes -Wno-semicolon-before-method-body -Wunguarded-availability -fembed-bitcode-marker -index-store-path /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Index/DataStore -iquote /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/TYGameSceneDemo-generated-files.hmap -I/Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/TYGameSceneDemo-own-target-headers.hmap -I/Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/TYGameSceneDemo-all-target-headers.hmap -iquote /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/TYGameSceneDemo-project-headers.hmap -I/Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Products/Debug-iphoneos/include -I/Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/DerivedSources-normal/arm64 -I/Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/DerivedSources/arm64 -I/Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/DerivedSources -F/Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Products/Debug-iphoneos -MMD -MT dependencies -MF /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/Objects-normal/arm64/AppDelegate.d --serialize-diagnostics /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/Objects-normal/arm64/AppDelegate.dia -c /Users/sheldon/Documents/TYDemos/TYGameSceneDemo/TYGameSceneDemo/AppDelegate.m -o /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/Objects-normal/arm64/AppDelegate.oWriteAuxiliaryFile /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/Objects-normal/arm64/TYGameSceneDemo.LinkFileList (in target: TYGameSceneDemo) cd /Users/sheldon/Documents/TYDemos/TYGameSceneDemo write-file /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/Objects-normal/arm64/TYGameSceneDemo.LinkFileListCompileC /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/Objects-normal/arm64/main.o /Users/sheldon/Documents/TYDemos/TYGameSceneDemo/TYGameSceneDemo/main.m normal arm64 objective-c com.apple.compilers.llvm.clang.1_0.compiler (in target: TYGameSceneDemo) cd /Users/sheldon/Documents/TYDemos/TYGameSceneDemo export LANG=en_US.US-ASCII /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x objective-c -arch arm64 -fmessage-length=178 -fdiagnostics-show-note-include-stack -fmacro-backtrace-limit=0 -fcolor-diagnostics -std=gnu11 -fobjc-arc -fobjc-weak -fmodules -gmodules -fmodules-cache-path=/Users/sheldon/Library/Developer/Xcode/DerivedData/ModuleCache.noindex -fmodules-prune-interval=86400 -fmodules-prune-after=345600 -fbuild-session-file=/Users/sheldon/Library/Developer/Xcode/DerivedData/ModuleCache.noindex/Session.modulevalidation -fmodules-validate-once-per-build-session -Wnon-modular-include-in-framework-module -Werror=non-modular-include-in-framework-module -Wno-trigraphs -fpascal-strings -O0 -fno-common -Wno-missing-field-initializers -Wno-missing-prototypes -Werror=return-type -Wdocumentation -Wunreachable-code -Wno-implicit-atomic-properties -Werror=deprecated-objc-isa-usage -Wno-objc-interface-ivars -Werror=objc-root-class -Wno-arc-repeated-use-of-weak -Wimplicit-retain-self -Wduplicate-method-match -Wno-missing-braces -Wparentheses -Wswitch -Wunused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wempty-body -Wuninitialized -Wconditional-uninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wconstant-conversion -Wint-conversion -Wbool-conversion -Wenum-conversion -Wno-float-conversion -Wnon-literal-null-conversion -Wobjc-literal-conversion -Wshorten-64-to-32 -Wpointer-sign -Wno-newline-eof -Wno-selector -Wno-strict-selector-match -Wundeclared-selector -Wdeprecated-implementations -DDEBUG=1 -DOBJC_OLD_DISPATCH_PROTOTYPES=0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS12.2.sdk -fstrict-aliasing -Wprotocol -Wdeprecated-declarations -miphoneos-version-min=12.2 -g -Wno-sign-conversion -Winfinite-recursion -Wcomma -Wblock-capture-autoreleasing -Wstrict-prototypes -Wno-semicolon-before-method-body -Wunguarded-availability -fembed-bitcode-marker -index-store-path /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Index/DataStore -iquote /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/TYGameSceneDemo-generated-files.hmap -I/Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/TYGameSceneDemo-own-target-headers.hmap -I/Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/TYGameSceneDemo-all-target-headers.hmap -iquote /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/TYGameSceneDemo-project-headers.hmap -I/Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Products/Debug-iphoneos/include -I/Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/DerivedSources-normal/arm64 -I/Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/DerivedSources/arm64 -I/Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/DerivedSources -F/Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Products/Debug-iphoneos -MMD -MT dependencies -MF /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/Objects-normal/arm64/main.d --serialize-diagnostics /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/Objects-normal/arm64/main.dia -c /Users/sheldon/Documents/TYDemos/TYGameSceneDemo/TYGameSceneDemo/main.m -o /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/Objects-normal/arm64/main.oLd /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Products/Debug-iphoneos/TYGameSceneDemo.app/TYGameSceneDemo normal arm64 (in target: TYGameSceneDemo) cd /Users/sheldon/Documents/TYDemos/TYGameSceneDemo export IPHONEOS_DEPLOYMENT_TARGET=12.2 /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS12.2.sdk -L/Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Products/Debug-iphoneos -F/Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Products/Debug-iphoneos -filelist /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/Objects-normal/arm64/TYGameSceneDemo.LinkFileList -Xlinker -rpath -Xlinker @executable_path/Frameworks -miphoneos-version-min=12.2 -dead_strip -Xlinker -object_path_lto -Xlinker /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/Objects-normal/arm64/TYGameSceneDemo_lto.o -Xlinker -export_dynamic -Xlinker -no_deduplicate -fembed-bitcode-marker -fobjc-arc -fobjc-link-runtime -Xlinker -dependency_info -Xlinker /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/Objects-normal/arm64/TYGameSceneDemo_dependency_info.dat -o /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Products/Debug-iphoneos/TYGameSceneDemo.app/TYGameSceneDemoCopy SceneKit assets /Users/sheldon/Documents/TYDemos/TYGameSceneDemo/TYGameSceneDemo/art.scnassets (in target: TYGameSceneDemo) cd /Users/sheldon/Documents/TYDemos/TYGameSceneDemo /Applications/Xcode.app/Contents/Developer/usr/bin/copySceneKitAssets /Users/sheldon/Documents/TYDemos/TYGameSceneDemo/TYGameSceneDemo/art.scnassets -o /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Products/Debug-iphoneos/TYGameSceneDemo.app/art.scnassets --target-platform=iphoneos --target-version=12.2 --target-build-dir=/Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Products/Debug-iphoneos --resources-folder-path=TYGameSceneDemo.appcopySceneKitAssets: Copy ship.scncopySceneKitAssets: Copy texture.pngcopySceneKitAssets: Running scntool on /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Products/Debug-iphoneos/TYGameSceneDemo.app/art.scnassets/ship.scnCompileAssetCatalog /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Products/Debug-iphoneos/TYGameSceneDemo.app /Users/sheldon/Documents/TYDemos/TYGameSceneDemo/TYGameSceneDemo/Assets.xcassets (in target: TYGameSceneDemo) cd /Users/sheldon/Documents/TYDemos/TYGameSceneDemo /Applications/Xcode.app/Contents/Developer/usr/bin/actool --output-format human-readable-text --notices --warnings --export-dependency-info /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/assetcatalog_dependencies --output-partial-info-plist /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/assetcatalog_generated_info.plist --app-icon AppIcon --compress-pngs --enable-on-demand-resources YES --sticker-pack-identifier-prefix top.sheldon.TYGameSceneDemo.sticker-pack. --target-device iphone --target-device ipad --minimum-deployment-target 12.2 --platform iphoneos --product-type com.apple.product-type.application --compile /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Products/Debug-iphoneos/TYGameSceneDemo.app /Users/sheldon/Documents/TYDemos/TYGameSceneDemo/TYGameSceneDemo/Assets.xcassets/* com.apple.actool.compilation-results *//Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/assetcatalog_generated_info.plistCompileStoryboard /Users/sheldon/Documents/TYDemos/TYGameSceneDemo/TYGameSceneDemo/Base.lproj/Main.storyboard (in target: TYGameSceneDemo) cd /Users/sheldon/Documents/TYDemos/TYGameSceneDemo export XCODE_DEVELOPER_USR_PATH=/Applications/Xcode.app/Contents/Developer/usr/bin/.. /Applications/Xcode.app/Contents/Developer/usr/bin/ibtool --errors --warnings --notices --module TYGameSceneDemo --output-partial-info-plist /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/Base.lproj/Main-SBPartialInfo.plist --auto-activate-custom-fonts --target-device iphone --target-device ipad --minimum-deployment-target 12.2 --output-format human-readable-text --compilation-directory /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/Base.lproj /Users/sheldon/Documents/TYDemos/TYGameSceneDemo/TYGameSceneDemo/Base.lproj/Main.storyboardCompileStoryboard /Users/sheldon/Documents/TYDemos/TYGameSceneDemo/TYGameSceneDemo/Base.lproj/LaunchScreen.storyboard (in target: TYGameSceneDemo) cd /Users/sheldon/Documents/TYDemos/TYGameSceneDemo export XCODE_DEVELOPER_USR_PATH=/Applications/Xcode.app/Contents/Developer/usr/bin/.. /Applications/Xcode.app/Contents/Developer/usr/bin/ibtool --errors --warnings --notices --module TYGameSceneDemo --output-partial-info-plist /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/Base.lproj/LaunchScreen-SBPartialInfo.plist --auto-activate-custom-fonts --target-device iphone --target-device ipad --minimum-deployment-target 12.2 --output-format human-readable-text --compilation-directory /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/Base.lproj /Users/sheldon/Documents/TYDemos/TYGameSceneDemo/TYGameSceneDemo/Base.lproj/LaunchScreen.storyboardProcessInfoPlistFile /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Products/Debug-iphoneos/TYGameSceneDemo.app/Info.plist /Users/sheldon/Documents/TYDemos/TYGameSceneDemo/TYGameSceneDemo/Info.plist (in target: TYGameSceneDemo) cd /Users/sheldon/Documents/TYDemos/TYGameSceneDemo builtin-infoPlistUtility /Users/sheldon/Documents/TYDemos/TYGameSceneDemo/TYGameSceneDemo/Info.plist -producttype com.apple.product-type.application -genpkginfo /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Products/Debug-iphoneos/TYGameSceneDemo.app/PkgInfo -expandbuildsettings -format binary -platform iphoneos -additionalcontentfile /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/Base.lproj/LaunchScreen-SBPartialInfo.plist -additionalcontentfile /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/Base.lproj/Main-SBPartialInfo.plist -additionalcontentfile /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/assetcatalog_generated_info.plist -requiredArchitecture arm64 -o /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Products/Debug-iphoneos/TYGameSceneDemo.app/Info.plistLinkStoryboards (in target: TYGameSceneDemo) cd /Users/sheldon/Documents/TYDemos/TYGameSceneDemo export XCODE_DEVELOPER_USR_PATH=/Applications/Xcode.app/Contents/Developer/usr/bin/.. /Applications/Xcode.app/Contents/Developer/usr/bin/ibtool --errors --warnings --notices --module TYGameSceneDemo --target-device iphone --target-device ipad --minimum-deployment-target 12.2 --output-format human-readable-text --link /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Products/Debug-iphoneos/TYGameSceneDemo.app /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/Base.lproj/LaunchScreen.storyboardc /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/Base.lproj/Main.storyboardcCodeSign /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Products/Debug-iphoneos/TYGameSceneDemo.app (in target: TYGameSceneDemo) cd /Users/sheldon/Documents/TYDemos/TYGameSceneDemo export CODESIGN_ALLOCATE=/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/codesign_allocateSigning Identity: "iPhone Developer: sheldondev@163.com (***********)"Provisioning Profile: "iOS Team Provisioning Profile: top.sheldon.TYGameSceneDemo" (e91c7402-e02a-45ac-aff3-c73c563abcfb) /usr/bin/codesign --force --sign A4F946689397857CA5F807E9FFB76913085216E4 --entitlements /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Intermediates.noindex/TYGameSceneDemo.build/Debug-iphoneos/TYGameSceneDemo.build/TYGameSceneDemo.app.xcent --timestamp=none /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Products/Debug-iphoneos/TYGameSceneDemo.appValidate /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Products/Debug-iphoneos/TYGameSceneDemo.app (in target: TYGameSceneDemo) cd /Users/sheldon/Documents/TYDemos/TYGameSceneDemo builtin-validationUtility /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Products/Debug-iphoneos/TYGameSceneDemo.appTouch /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Products/Debug-iphoneos/TYGameSceneDemo.app (in target: TYGameSceneDemo) cd /Users/sheldon/Documents/TYDemos/TYGameSceneDemo /usr/bin/touch -c /Users/sheldon/Library/Developer/Xcode/DerivedData/TYGameSceneDemo-fnnafecckruutfccltqcqgjtvkco/Build/Products/Debug-iphoneos/TYGameSceneDemo.app** BUILD SUCCEEDED ** å‚è€ƒé€šè¿‡Xcodeå‘½ä»¤è¡Œç¼–è¯‘ç”¨xcconfigæ–‡ä»¶é…ç½®iOS appçŽ¯å¢ƒå˜é‡å®˜æ–¹æ–‡æ¡£]]></content>
      <categories>
        <category>hide</category>
      </categories>
      <tags>
        <tag>hide</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[javaæ³¨è§£]]></title>
    <url>%2F2019%2F08%2F12%2Fjava%E6%B3%A8%E8%A7%A3%2F</url>
    <content type="text"><![CDATA[ä»€ä¹ˆæ˜¯æ³¨è§£æ³¨è§£ï¼Œé¡¾åæ€ä¹‰ï¼Œæ³¨è§£,å°±æ˜¯å¯¹æŸä¸€äº‹ç‰©è¿›è¡Œæ·»åŠ æ³¨é‡Šè¯´æ˜Žï¼Œä¼šå­˜æ”¾ä¸€äº›ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯å¯èƒ½å¯¹ä»¥åŽæŸä¸ªæ—¶æ®µæ¥è¯´æ˜¯å¾ˆæœ‰ç”¨å¤„çš„ã€‚ javaä¸­çš„æ³¨è§£Javaæ³¨è§£åˆå«javaæ ‡æ³¨ï¼Œjavaæä¾›äº†ä¸€å¥—æœºåˆ¶ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥å¯¹æ–¹æ³•ã€ç±»ã€å‚æ•°ã€åŒ…ã€åŸŸä»¥åŠå˜é‡ç­‰æ·»åŠ æ ‡å‡†(å³é™„ä¸ŠæŸäº›ä¿¡æ¯)ã€‚ä¸”åœ¨ä»¥åŽæŸä¸ªæ—¶æ®µé€šè¿‡åå°„å°†æ ‡æ³¨çš„ä¿¡æ¯æå–å‡ºæ¥ä»¥ä¾›ä½¿ç”¨ã€‚ è‡ªå®šä¹‰æ³¨è§£ä¸ºä»€ä¹ˆè‡ªå®šä¹‰æ³¨è§£Javaä»Ž1.5ç‰ˆæœ¬ä»¥åŽé»˜è®¤å†…ç½®ä¸‰ä¸ªæ ‡æ³¨ï¼š @Override:åªèƒ½ç”¨åœ¨æ–¹æ³•ä¹‹ä¸Šçš„ï¼Œç”¨æ¥å‘Šè¯‰åˆ«äººè¿™ä¸€ä¸ªæ–¹æ³•æ˜¯æ”¹å†™çˆ¶ç±»çš„ã€‚ @Deprecated:å»ºè®®åˆ«äººä¸è¦ä½¿ç”¨æ—§çš„APIçš„æ—¶å€™ç”¨çš„,ç¼–è¯‘çš„æ—¶å€™ä¼šç”¨äº§ç”Ÿè­¦å‘Šä¿¡æ¯,å¯ä»¥è®¾å®šåœ¨ç¨‹åºé‡Œçš„æ‰€æœ‰çš„å…ƒç´ ä¸Šã€‚ @SuppressWarnings:è¿™ä¸€ä¸ªç±»åž‹å¯ä»¥æ¥æš‚æ—¶æŠŠä¸€äº›è­¦å‘Šä¿¡æ¯æ¶ˆæ¯å…³é—­ã€‚ä½†æ˜¯ï¼Œä»…ä»…è¿™ä¸‰ä¸ªæ ‡æ³¨æ˜¯ä¸èƒ½æ»¡è¶³æˆ‘ä»¬å¼€å‘æ—¶ä¸€äº›éœ€æ±‚çš„ã€‚æ‰€ä»¥javaå…è®¸æˆ‘ä»¬è‡ªå®šä¹‰æ³¨è§£æ¥ä½¿ç”¨ã€‚æ€Žä¹ˆè‡ªå®šä¹‰æ³¨è§£è‡ªå®šä¹‰æ­¥éª¤å¤§è‡´åˆ†ä¸ºä¸¤æ­¥ï¼š é€šè¿‡@interfaceå…³é”®å­—å£°æ˜Žæ³¨è§£åç§°ï¼Œä»¥åŠæ³¨è§£çš„æˆå‘˜å±žæ€§æˆ–è€…å«åšæ³¨è§£çš„å‚æ•°ã€‚ ä½¿ç”¨javaå†…ç½®çš„å››ä¸ªå…ƒæ³¨è§£å¯¹è¿™ä¸ªè‡ªå®šä¹‰æ ‡æ³¨çš„åŠŸèƒ½å’ŒèŒƒå›´è¿›è¡Œä¸€äº›é™åˆ¶ã€‚ å…ƒæ³¨è§£å…ƒæ³¨è§£ï¼Œå°±æ˜¯å®šä¹‰æ³¨è§£çš„æ³¨è§£ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™äº›å…ƒæ³¨è§£æ˜¯çš„ä½œç”¨å°±æ˜¯ä¸“é—¨ç”¨æ¥çº¦æŸå…¶å®ƒæ³¨è§£çš„æ³¨è§£ã€‚è¯·åŒºåˆ«ä¸Šé¢é‚£ä¸‰ä¸ªæ³¨è§£ï¼Œä»–ä»¬ä¹Ÿæ˜¯é€šè¿‡å…ƒæ³¨è§£å®šä¹‰è€Œæ¥çš„ã€‚å…ƒæ³¨è§£æœ‰å“ªäº›å‘¢ï¼Œä¸»è¦æœ‰å››ä¸ª@Target,@Retention,@Documented,@Inherited @Target è¡¨ç¤ºè¯¥æ³¨è§£ç”¨äºŽä»€ä¹ˆåœ°æ–¹ï¼Œå¯èƒ½çš„ ElemenetType å‚æ•°åŒ…æ‹¬ï¼š ElemenetType.CONSTRUCTOR æž„é€ å™¨å£°æ˜Ž ElemenetType.FIELD åŸŸå£°æ˜Žï¼ˆåŒ…æ‹¬ enum å®žä¾‹ï¼‰ ElemenetType.LOCAL_VARIABLE å±€éƒ¨å˜é‡å£°æ˜Ž ElemenetType.METHOD æ–¹æ³•å£°æ˜Ž ElemenetType.PACKAGE åŒ…å£°æ˜Ž ElemenetType.PARAMETER å‚æ•°å£°æ˜Ž ElemenetType.TYPE ç±»ï¼ŒæŽ¥å£ï¼ˆåŒ…æ‹¬æ³¨è§£ç±»åž‹ï¼‰æˆ–enumå£°æ˜Ž @Retention è¡¨ç¤ºåœ¨ä»€ä¹ˆçº§åˆ«ä¿å­˜è¯¥æ³¨è§£ä¿¡æ¯ã€‚å¯é€‰çš„ RetentionPolicy å‚æ•°åŒ…æ‹¬ï¼š RetentionPolicy.SOURCE æ³¨è§£å°†è¢«ç¼–è¯‘å™¨ä¸¢å¼ƒ RetentionPolicy.CLASS æ³¨è§£åœ¨classæ–‡ä»¶ä¸­å¯ç”¨ï¼Œä½†ä¼šè¢«VMä¸¢å¼ƒ RetentionPolicy.RUNTIME VMå°†åœ¨è¿è¡ŒæœŸä¹Ÿä¿ç•™æ³¨é‡Šï¼Œå› æ­¤å¯ä»¥é€šè¿‡åå°„æœºåˆ¶è¯»å–æ³¨è§£çš„ä¿¡æ¯ã€‚ @Documented å°†æ­¤æ³¨è§£åŒ…å«åœ¨ javadoc ä¸­ @Inherited å…è®¸å­ç±»ç»§æ‰¿çˆ¶ç±»ä¸­çš„æ³¨è§£ è‡ªå®šä¹‰ 1234567891011import java.lang.annotation.*;@Target(ElementType.TYPE) // è¿™ä¸ªæ ‡æ³¨ç”¨äºŽç±»@Retention(RetentionPolicy.RUNTIME) //è¿™ä¸ªæ ‡æ³¨ä¼šä¸€ç›´ä¿ç•™åˆ°è¿è¡Œæ—¶@Documented // å°†æ­¤æ³¨è§£åŒ…å«åœ¨javadocä¸­public @interface TYDescription &#123; String Value();&#125; 12345678910import java.lang.annotation.*;@Target(ElementType.METHOD)@Retention(RetentionPolicy.RUNTIME)@Documentedpublic @interface TYName &#123; String originate(); String community();&#125; ä½¿ç”¨æ³¨è§£12@TYName(originate = "Sheldon", community = "sheldon.com")@TYDescription(Value = "desc String!!!") æ³¨æ„å‚è€ƒ]]></content>
      <categories>
        <category>hide</category>
      </categories>
      <tags>
        <tag>hide</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[kvocontrollerä½¿ç”¨å’Œè§£æž]]></title>
    <url>%2F2019%2F08%2F12%2Fkvocontroller%E4%BD%BF%E7%94%A8%E5%92%8C%E8%A7%A3%E6%9E%90%2F</url>
    <content type="text"><![CDATA[facebook/KVOControlleræ˜¯å¯¹Cocoaä¸­KVOçš„å°è£…ã€‚å®ƒæä¾›ç®€å•ã€çŽ°ä»£çš„APIï¼Œå¹¶ä¸”æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ä¼˜ç‚¹å¦‚ä¸‹ï¼š é€šçŸ¥æ˜¯é€šè¿‡blockã€actionæˆ–è€…NSKeyValueObservingå›žè°ƒï¼ˆå³-observeValueForKeyPath:ofObject:change:contextï¼‰æ¥å®žçŽ°ï¼› ä¸ä¼šå‡ºçŽ°ç§»é™¤observerçš„å¼‚å¸¸ï¼› åœ¨controlleré”€æ¯æ—¶éšå¼åœ°ç§»é™¤observerï¼› ä¿è¯äº†çº¿ç¨‹å®‰å…¨ã€‚ç®€å•åœ°è¯´ï¼ŒKVOControllerè®©æˆ‘ä»¬æ›´ä¼˜é›…ã€ç®€å•ã€å®‰å…¨åœ°ä½¿ç”¨KVOã€‚ ä½¿ç”¨KVOController12345678// å¯¼å…¥æ¡†æž¶#import &lt;KVOController/KVOController.h&gt;@interface ViewController ()// è®¾ç½®ç¤ºä¾‹æ¨¡åž‹å’Œç¤ºä¾‹æŒ‰é’®@property (nonatomic, strong)TestModel *model;@property (nonatomic, strong)UIButton *button;@end 12345678910111213141516171819202122//è®¾ç½®KVOFBKVOController *kvoController = [FBKVOController controllerWithObserver:self];self.KVOController = kvoController;//è®¾ç½®modelself.model = [TestModel new];self.model.name = @"hah";// æ·»åŠ ä¸€ä¸ªbuttonself.button = [UIButton buttonWithType:UIButtonTypeSystem];self.button.frame = CGRectMake(100, 100, 100, 50);[self.button setTitle:self.model.name forState:UIControlStateNormal];[self.button addTarget:self action:@selector(buttonClick:) forControlEvents:UIControlEventTouchUpInside];[self.view addSubview:self.button];//æ·»åŠ ç›‘å¬[self.KVOController observe:self.model keyPath:FBKVOKeyPath(_model.name) options:NSKeyValueObservingOptionNew block:^(id _Nullable observer, id _Nonnull object, NSDictionary&lt;NSString *,id&gt; * _Nonnull change) &#123; NSLog(@"%@", change); NSString *title = (NSString *)change[@"new"]; [self.button setTitle:title forState:UIControlStateNormal]; &#125;]; 1234// button ç‚¹å‡»æ–¹æ³•- (void)buttonClick:(UIButton *)sender &#123; self.model.name = [self.model.name isEqual: @"hah"] ? @"gogo" : @"hah";&#125; æºç åˆ†æž KVOControllerè¯¦è§£ å¦‚ä½•ä¼˜é›…åœ°ä½¿ç”¨ KVO]]></content>
      <categories>
        <category>hide</category>
      </categories>
      <tags>
        <tag>hide</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Notificationä¸Žå¤šçº¿ç¨‹]]></title>
    <url>%2F2019%2F08%2F12%2FNotification%E4%B8%8E%E5%A4%9A%E7%BA%BF%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[åŽŸæ–‡ï¼š In a multithreaded application, notifications are always delivered in the thread in which the notification was posted, which may not be the same thread in which an observer registered itself. ç¿»è¯‘ï¼š åœ¨å¤šçº¿ç¨‹åº”ç”¨ä¸­ï¼ŒNotificationåœ¨å“ªä¸ªçº¿ç¨‹ä¸­postï¼Œå°±åœ¨å“ªä¸ªçº¿ç¨‹ä¸­è¢«è½¬å‘ï¼Œè€Œä¸ä¸€å®šæ˜¯åœ¨æ³¨å†Œè§‚å¯Ÿè€…çš„é‚£ä¸ªçº¿ç¨‹ä¸­ã€‚ ä¸¾ä¸ªðŸŒ°ï¼š 123456789// ä¸»çº¿ç¨‹ä¸­add[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(observerSelect) name:@"qwer" object:nil];NSLog(@"1.current thread -- %@", [NSThread currentThread]);// å­çº¿ç¨‹ä¸­postdispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(3.0 * NSEC_PER_SEC)), dispatch_get_global_queue(0, 0), ^&#123; NSLog(@"3.current thread -- %@", [NSThread currentThread]); [[NSNotificationCenter defaultCenter] postNotificationName:@"qwer" object:nil];&#125;); 123- (void)observerSelect &#123; NSLog(@"2.current thread -- %@", [NSThread currentThread]);&#125; æ‰“å°ç»“æžœï¼š1232019-03-26 11:24:29.987543+0800 timerTest[46207:2785353] 1.current thread -- &lt;NSThread: 0x600002814d00&gt;&#123;number = 1, name = main&#125;2019-03-26 11:24:33.270912+0800 timerTest[46207:2785409] 3.current thread -- &lt;NSThread: 0x60000284e880&gt;&#123;number = 3, name = (null)&#125;2019-03-26 11:24:33.271095+0800 timerTest[46207:2785409] 2.current thread -- &lt;NSThread: 0x60000284e880&gt;&#123;number = 3, name = (null)&#125; è™½ç„¶æˆ‘ä»¬åœ¨ä¸»çº¿ç¨‹ä¸­æ³¨å†Œäº†é€šçŸ¥è€…ï¼Œä½†åœ¨å…¨å±€é˜Ÿåˆ—ä¸­postï¼Œå¹¶ä¸æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸­å¤„ç†çš„ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬åœ¨å¤„ç†å›žè°ƒç»“æžœæ—¶ï¼Œä¸€å®šè¦æ³¨æ„çº¿ç¨‹é—®é¢˜ã€‚ é‚£ä¹ˆï¼Œæˆ‘ä»¬å¦‚ä½•èƒ½åœ¨å­çº¿ç¨‹ä¸­postï¼Œåœ¨ä¸»çº¿ç¨‹ä¸­è¿›è¡Œå¤„ç†å‘¢ï¼Ÿ çœ‹çœ‹å®˜æ–¹æ–‡æ¡£ï¼š For example, if an object running in a background thread is listening for notifications from the user interface, such as a window closing, you would like to receive the notifications in the background thread instead of the main thread. In these cases, you must capture the notifications as they are delivered on the default thread and redirect them to the appropriate thread. ç¿»è¯‘ï¼š ä¾‹å¦‚ï¼Œå¦‚æžœåœ¨åŽå°çº¿ç¨‹ä¸­è¿è¡Œçš„å¯¹è±¡æ­£åœ¨ä¾¦å¬æ¥è‡ªç”¨æˆ·ç•Œé¢çš„é€šçŸ¥ï¼ˆä¾‹å¦‚å…³é—­çª—å£ï¼‰ï¼Œåˆ™æ‚¨å¸Œæœ›åœ¨åŽå°çº¿ç¨‹è€Œä¸æ˜¯ä¸»çº¿ç¨‹ä¸­æŽ¥æ”¶é€šçŸ¥ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œæ‚¨å¿…é¡»æ•èŽ·åœ¨é»˜è®¤çº¿ç¨‹ä¸Šä¼ é€’çš„é€šçŸ¥ï¼Œå¹¶å°†å®ƒä»¬é‡å®šå‘åˆ°ç›¸åº”çš„çº¿ç¨‹ã€‚ æ ¹æ®å®˜æ–¹æ–‡æ¡£ä¿®æ”¹æˆ‘ä»¬ä¸Šé¢çš„ä¾‹å­ï¼š 123456@interface ViewController () &lt;NSMachPortDelegate&gt;@property (nonatomic) NSMutableArray *notifications; // é€šçŸ¥é˜Ÿåˆ—@property (nonatomic) NSThread *notificationThread; // æœŸæœ›çº¿ç¨‹@property (nonatomic) NSLock *notificationLock; // ç”¨äºŽå¯¹é€šçŸ¥é˜Ÿåˆ—åŠ é”çš„é”å¯¹è±¡ï¼Œé¿å…çº¿ç¨‹å†²çª@property (nonatomic) NSMachPort *notificationPort; // ç”¨äºŽå‘æœŸæœ›çº¿ç¨‹å‘é€ä¿¡å·çš„é€šä¿¡ç«¯å£@end 123456789101112131415161718192021// åˆå§‹åŒ–self.notifications = [[NSMutableArray alloc] init];self.notificationLock = [[NSLock alloc] init]; self.notificationThread = [NSThread currentThread];self.notificationPort = [[NSMachPort alloc] init];self.notificationPort.delegate = self; // å¾€å½“å‰çº¿ç¨‹çš„run loopæ·»åŠ ç«¯å£æº// å½“Machæ¶ˆæ¯åˆ°è¾¾è€ŒæŽ¥æ”¶çº¿ç¨‹çš„run loopæ²¡æœ‰è¿è¡Œæ—¶ï¼Œåˆ™å†…æ ¸ä¼šä¿å­˜è¿™æ¡æ¶ˆæ¯ï¼Œç›´åˆ°ä¸‹ä¸€æ¬¡è¿›å…¥run loop[[NSRunLoop currentRunLoop] addPort:self.notificationPort forMode:(__bridge NSString *)kCFRunLoopCommonModes]; [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(observerSelectNotification:) name:@"qwer" object:nil];NSLog(@"1.current thread -- %@", [NSThread currentThread]); dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(3.0 * NSEC_PER_SEC)), dispatch_get_global_queue(0, 0), ^&#123; NSLog(@"3.current thread -- %@", [NSThread currentThread]); [[NSNotificationCenter defaultCenter] postNotificationName:@"qwer" object:nil];&#125;); 1234567891011121314151617// Delegates are sent this if they respond, otherwise they// are sent handlePortMessage:; argument is the raw Mach message- (void)handleMachMessage:(void *)msg&#123; [self.notificationLock lock]; NSLog(@"5.current thread -- %@", [NSThread currentThread]); while ([self.notifications count]) &#123; NSNotification *notification = [self.notifications objectAtIndex:0]; [self.notifications removeObjectAtIndex:0]; [self.notificationLock unlock]; [self observerSelectNotification:notification]; [self.notificationLock lock]; &#125;; [self.notificationLock unlock];&#125; 123456789101112131415161718- (void)observerSelectNotification:(NSNotification *)notification &#123; if ([NSThread currentThread] != _notificationThread) &#123; NSLog(@"4.current thread -- %@", [NSThread currentThread]); // Forward the notification to the correct thread. [self.notificationLock lock]; [self.notifications addObject:notification]; [self.notificationLock unlock]; [self.notificationPort sendBeforeDate:[NSDate date] components:nil from:nil reserved:0]; &#125; else &#123; NSLog(@"2.current thread -- %@", [NSThread currentThread]); NSLog(@"process notification"); &#125;&#125; è¿è¡Œç»“æžœï¼š1234562019-03-26 11:58:30.826178+0800 timerTest[47621:2830678] 1.current thread -- &lt;NSThread: 0x6000023c93c0&gt;&#123;number = 1, name = main&#125;2019-03-26 11:58:33.826488+0800 timerTest[47621:2830764] 3.current thread -- &lt;NSThread: 0x600002388740&gt;&#123;number = 3, name = (null)&#125;2019-03-26 11:58:33.826702+0800 timerTest[47621:2830764] 4.current thread -- &lt;NSThread: 0x600002388740&gt;&#123;number = 3, name = (null)&#125;2019-03-26 11:58:33.826899+0800 timerTest[47621:2830678] 5.current thread -- &lt;NSThread: 0x6000023c93c0&gt;&#123;number = 1, name = main&#125;2019-03-26 11:58:33.827061+0800 timerTest[47621:2830678] 2.current thread -- &lt;NSThread: 0x6000023c93c0&gt;&#123;number = 1, name = main&#125;2019-03-26 11:58:33.827151+0800 timerTest[47621:2830678] process notification å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬åœ¨å…¨å±€dispatché˜Ÿåˆ—ä¸­æŠ›å‡ºçš„Notificationï¼Œå¦‚æ„¿åœ°åœ¨ä¸»çº¿ç¨‹ä¸­æŽ¥æ”¶åˆ°äº†ã€‚ è¿™ç§å®žçŽ°æ–¹å¼çš„å…·ä½“è§£æžåŠå…¶å±€é™æ€§å¤§å®¶å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£Delivering Notifications To Particular Threadsï¼Œåœ¨æ­¤ä¸å¤šåšè§£é‡Šã€‚å½“ç„¶ï¼Œæ›´å¥½çš„æ–¹æ³•å¯èƒ½æ˜¯æˆ‘ä»¬è‡ªå·±åŽ»å­ç±»åŒ–ä¸€ä¸ªNSNotificationCenterï¼Œæˆ–è€…å•ç‹¬å†™ä¸€ä¸ªç±»æ¥å¤„ç†è¿™ç§è½¬å‘ã€‚ å‚è€ƒï¼š Notification Programming Topics Threading Programming Guide Notificationä¸Žå¤šçº¿ç¨‹]]></content>
      <categories>
        <category>hide</category>
      </categories>
      <tags>
        <tag>hide</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Macä¸‹é…ç½®å¤šä¸ªssh-key]]></title>
    <url>%2F2019%2F08%2F12%2FMac%E4%B8%8B%E9%85%8D%E7%BD%AE%E5%A4%9A%E4%B8%AAssh-key%2F</url>
    <content type="text"><![CDATA[åœ¨æˆ‘ä»¬çš„å·¥ä½œç»å¸¸ä¼šé‡åˆ°å…¬å¸çš„gitä»“åº“éœ€è¦é…ç½®SSH-Keyï¼Œè€Œè‡ªå·±çš„githubä¹Ÿéœ€è¦é…ç½®SSH-Keyï¼Œå¦‚æžœä½ ä¸æƒ³ä½¿ç”¨åŒä¸€ä¸ªSSH-Keyï¼Œé‚£ä¹ˆå¯ä»¥ç”Ÿæˆå¤šä¸ªSSH-Keyï¼Œä»Žè€Œåˆ†åˆ«é…ç½®ä¸åŒçš„ä»“åº“ã€‚ æ‰“å¼€ç»ˆç«¯ï¼ŒæŸ¥çœ‹å½“å‰~/.sshè·¯å¾„ä¸­å­˜åœ¨çš„SSH-Keyï¼š æˆ‘çš„è·¯å¾„ä¸‹å·²ç»å­˜åœ¨äº†ä¸€ä¸ªSSH-Keyäº†ï¼Œé‚£ä¹ˆæŽ¥ä¸‹æ¥å†åˆ›å»ºä¸€ä¸ªSSH-Key: ä½¿ç”¨å‘½ä»¤åˆ›å»ºï¼š1ssh-keygen -t rsa -C "è¿™é‡Œå¡«å†™ä½ çš„é‚®ç®±åœ°å€" åœ¨Enter file in which to save the key (&lt;æ–‡ä»¶è·¯å¾„&gt;):è¿™é‡Œè¾“å…¥è‡ªå®šä¹‰çš„SSH-Keyåç§°ï¼ˆå¿…é¡»å†™ï¼Œä¸ç„¶ä¼šé»˜è®¤è¦†ç›–åŽŸæ¥çš„Keyï¼‰ ä¾‹å¦‚ï¼š1Enter file in which to save the key (&lt;æ–‡ä»¶è·¯å¾„&gt;): id_rsa_github ç„¶åŽè¾“å…¥å¯†ç ï¼ˆå¯†ç ä¸å¯è§ï¼‰ï¼š12Enter passphrase (empty for no passphrase):Enter same passphrase again: å½“çœ‹åˆ°è¿™æ ·çš„å­—æ ·ï¼Œè¯´æ˜Žåˆ›å»ºæˆåŠŸäº†ï¼š å°†SSH-Keyæ·»åŠ åˆ°ssh-agentä¸­ï¼š1ssh-add id_rsa_github è¾“å…¥å¯†ç :1Enter passphrase for id_rsa_github: æ·»åŠ æˆåŠŸï¼š1Identity added: id_rsa_github (&lt;é‚®ç®±åœ°å€&gt;) æŸ¥çœ‹å…¬é’¥ï¼š1cat id_rsa_github.pub å°†å…¬é’¥é…ç½®åˆ°githubçš„ssh-keyä¸­ï¼›æœ€åŽéªŒè¯æ˜¯å¦è”é€šï¼š1ssh -T git@github.com æˆåŠŸå­—æ ·ï¼š1Hi &lt;è¿™é‡Œæ˜¯githubçš„ç”¨æˆ·å&gt;! You've successfully authenticated, but GitHub does not provide shell access.]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>Mac</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[jenkins æ‰“åŒ…æµç¨‹]]></title>
    <url>%2F2019%2F08%2F12%2Fjenkins%E6%89%93%E5%8C%85%E6%B5%81%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[å®‰è£…jenkinsæˆ‘ä»¬ä½¿ç”¨Homebrewå®‰è£…jenkins å®‰è£…Homebrew é¦–å…ˆç¡®è®¤æœºå™¨æœ‰æ²¡æœ‰å®‰è£…Homebrew 1brew -v å¦‚æžœæœªå®‰è£…ï¼Œåˆ™å®‰è£…Homebrew 1$ /usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot; å®‰è£…javaçŽ¯å¢ƒ 1brew install Caskroom/cask/java ç”±äºŽçŽ°åœ¨çš„javaæœ€é«˜ç‰ˆæœ¬ä¸º12.0ï¼Œjenkinsä¸æ”¯æŒï¼Œæ‰€ä»¥æˆ‘ä»¬å®‰è£…ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„java 1brew cask install homebrew/cask-versions/adoptopenjdk8 å®‰è£…jenkins 1brew install jenkins é“¾æŽ¥æ–‡ä»¶ 1ln -sfv /usr/local/opt/jenkins/*.plist ~/Library/LaunchAgents å¯åŠ¨jenkins 1launchctl load ~/Library/LaunchAgents/homebrew.mxcl.jenkins.plist]]></content>
      <categories>
        <category>hide</category>
      </categories>
      <tags>
        <tag>hide</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸ªäººç®€åŽ†]]></title>
    <url>%2F2019%2F03%2F28%2FcurriculumVitae%2F</url>
    <content type="text"><![CDATA[ä¸ªäººä¿¡æ¯ table th:nth-of-type(1) { width: 20%; } å§“å / æ€§åˆ« ç”°å®‡ / ç”· ä¸“ä¸š ç½‘ç»œå·¥ç¨‹ æ¯•ä¸šé™¢æ ¡ ä¸­åŒ—å¤§å­¦ä¿¡æ¯å•†åŠ¡å­¦é™¢ E-mail tinarychina@gmail.com / ty24089@163.com ç”µè¯/å¾®ä¿¡ 17722529692 å·¥ä½œå¹´é™ 5å¹´ æŠ€æœ¯åšå®¢ https://sheldon.top æ±‚èŒæ„å‘ iOSå¼€å‘å·¥ç¨‹å¸ˆ çŽ°å±…/æœŸæœ›åŸŽå¸‚ åŒ—äº¬å¸‚ å·¥ä½œç»åŽ†æ·±åœ³å¸‚é—ªæ‹ç²¾çµç½‘ç»œæŠ€æœ¯æœ‰é™å…¬å¸ï¼ˆ2016.05-2018.12ï¼‰ è´Ÿè´£å®¢æˆ·ç«¯æ ¸å¿ƒåŠŸèƒ½çš„å¼€å‘å’Œç»´æŠ¤ä»¥åŠäº§å“çš„è¿­ä»£å¼€å‘å’Œä¼˜åŒ–ï¼Œç¼–å†™ç›¸å…³å¼€å‘æ–‡æ¡£ï¼Œå‚ä¸Žéœ€æ±‚è¯„å®¡å’ŒæŽ¥å£è¯„å®¡å¹¶è®¨è®ºç›¸å…³é—®é¢˜ï¼Œåœ¨å®¢æˆ·ç«¯ç»„åˆ†é…å¼€å‘ä»»åŠ¡ä»¥åŠæŽ§åˆ¶å¼€å‘è¿›åº¦ï¼›åœ¨å¼€å‘è¿‡ç¨‹ä¸­åè°ƒAPIåŽå°ã€ç§»åŠ¨ç«¯ã€webçš„å·¥ä½œã€‚ ä½œå“ï¼š90ç§’ã€Aiä¼˜æƒ ã€å¿«æ·˜ä¼˜å“ã€æƒ æ‹ä¼˜å“ã€é—ªç”µæ‹å–é¡¹ç›®å†…å®¹ï¼š é¡¹ç›®æž¶æž„ä»¥MVCä¸ºä¸»ï¼Œéƒ¨åˆ†é¡¹ç›®ä½¿ç”¨MVVMï¼Œç»Ÿä¸€åŽå°æŽ¥å£è§„èŒƒ RESTful é£Žæ ¼ã€‚ é¡¹ç›®ä»¥Objective-Cè¯­è¨€ä¸ºä¸»ï¼Œéƒ¨åˆ†é¡µé¢ä½¿ç”¨Swiftç¼–å†™ã€‚ éƒ¨åˆ†é¡¹ç›®ä½¿ç”¨å“åº”å¼æ¡†æž¶ï¼Œä¸»è¦æ˜¯ä¸ºäº†è§£å†³æ•°æ®å˜åŒ–å¼•èµ·çš„é¡µé¢å¸ƒå±€å’Œç»“æž„çš„æ”¹å˜ã€‚ é¡¹ç›®ä½¿ç”¨è‡ªå®šä¹‰åŸ‹ç‚¹ï¼ˆ90ç§’ä½¿ç”¨GrowingIOæ— åŸ‹ç‚¹æ¡†æž¶ï¼‰,è¿ç”¨åˆ†ç±»ä¸ºæŒ‰é’®æ·»åŠ actionç›‘å¬ï¼Œæ·»åŠ ç¼–ç å±žæ€§ã€‚ ä½¿ç”¨GCDå’Œè‡ªå®šä¹‰NSOprationå¤„ç†æ•°æ®å†…å®¹ï¼ŒæŽ¥å£è°ƒç”¨ç­‰ã€‚ ä½¿ç”¨Runtimeå®žçŽ°é€šè¿‡CMSé…ç½®ç›¸å…³å†…å®¹ï¼ŒæŽ§åˆ¶é¡µé¢è·³è½¬ä¸åŒé¡µé¢ã€‚ è‡ªå®šä¹‰DispatchTimerå¹¶ç®¡ç†Timerç»„ï¼Œå®žçŽ°ä½¿ç”¨CACurrentMediaTime()è®¡ç®—å€’è®¡æ—¶æ•°æ®ï¼ŒæŠ›å¼ƒæŽ§åˆ¶å™¨åšè®¡ç®—çš„è¿‡ç¨‹ï¼Œå‡è½»æŽ§åˆ¶å™¨è´Ÿæ‹…ã€‚ å°è£…TableViewï¼Œå‡å°‘æŽ§åˆ¶å™¨ä¸­ç›¸å…³ä»£ç é‡ã€‚ ä½¿ç”¨CABasicAnimationå®žçŽ°ç›¸å…³é¡µé¢åŠ¨ç”»æ•ˆæžœã€‚ åŒ—äº¬åœ£åˆè½¯ä»¶ç§‘æŠ€æœ‰é™å…¬å¸ï¼ˆ2015.03-2016.02ï¼‰ è´Ÿè´£å®¢æˆ·ç«¯ç›¸å…³åŠŸèƒ½çš„å¼€å‘å’Œè¿­ä»£ç»´æŠ¤ï¼Œé…åˆå…¶ä»–ç›¸å…³éƒ¨é—¨æä¾›ç›¸åº”çš„äº§å“æŠ€æœ¯æ”¯æŒã€‚ ä½œå“ï¼šç•™ç•™å­¦é¡¹ç›®å†…å®¹ï¼šé¡¹ç›®ä¸¥æ ¼éµå¾ªMVCè®¾è®¡æ¡†æž¶æ¨¡å¼å¼€å‘,é™ä½Žè€¦åˆåº¦ï¼›å¤šå¤„ä½¿ç”¨GCDå¤šçº¿ç¨‹æŠ€æœ¯ï¼›ä½¿ç”¨Blockå›žè°ƒæœºåˆ¶è¿›è¡Œå¤šé¡µé¢ä¹‹é—´ä¼ å€¼ï¼›åœ¨åº”ç”¨å†…éƒ¨ä½¿ç”¨ç³»ç»Ÿæä¾›çš„å†…ç½®æµè§ˆå™¨æŽ§ä»¶ï¼ŒåŠ è½½ç½‘é¡µæ•°æ®ï¼›é›†æˆäº†ç¬¬ä¸‰æ–¹SDKçŽ¯ä¿¡å³æ—¶èŠå¤©ç³»ç»Ÿï¼Œä½¿ç”¨æˆ·ä¹‹é—´å¯ä»¥å®žæ—¶èŠå¤©å¹¶ä½¿ç”¨è‹¹æžœå…¬å¸çš„APNSæœåŠ¡ï¼Œå®žæ—¶çš„æŽ¨é€æ¶ˆæ¯åˆ°ç”¨æˆ·ï¼›é›†æˆç¬¬ä¸‰æ–¹åˆ†äº«å¹³å°ï¼Œå°†é“¾æŽ¥åˆ†äº«è‡³ç¬¬ä¸‰æ–¹ç¤¾äº¤åº”ç”¨ç­‰ã€‚ ä¸–ç•Œé‚¦ä¿¡æ¯æŠ€æœ¯æœ‰é™å…¬å¸ï¼ˆ2013.07-2015.02ï¼‰ è´Ÿè´£å…¬å¸iPhoneæ‰‹æœºå®¢æˆ·ç«¯çš„çš„å¼€å‘å’Œç»´æŠ¤ï¼ŒååŠ©é«˜çº§å¼€å‘äººå‘˜å®Œæˆé¡¹ç›®çš„å¼€å‘å’Œè¿­ä»£ã€‚ ä½œå“ï¼šè¡Œç¨‹å¤§å¸ˆã€å…¨çƒåœ°é“å›¾é¡¹ç›®å†…å®¹ï¼šé€šè¿‡è‡ªå®šä¹‰UIæŽ§ä»¶ä¸ŽæŽ§ä»¶ä¹‹é—´çš„æ­é…ä½¿ç”¨ï¼Œä½¿Appç•Œé¢ä¸°å¯Œå¤šå½©ï¼Œæ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨å’Œäº¤äº’ï¼›ä½¿ç”¨RunLoopä¸­çš„commonModeså®žçŽ°æ‹–åŠ¨é¡µé¢å’ŒscrollViewæ»šåŠ¨ä¹‹é—´äº’ä¸å¹²æ‰°ï¼›æ··åˆå¼€å‘ï¼Œåœ¨åº”ç”¨å†…éƒ¨ä½¿ç”¨ç³»ç»Ÿæä¾›çš„å†…ç½®æµè§ˆå™¨æŽ§ä»¶ï¼ŒåŠ è½½ç½‘é¡µæ•°æ®ï¼Œè¾¾åˆ°æ›´å¿«æ·çš„å¼€å‘Appå¹¶ä¸”æ–¹ä¾¿äºŽç»´æŠ¤ï¼›ä½¿ç”¨è‹¹æžœå…¬å¸çš„APNSæœåŠ¡ï¼Œå®žæ—¶çš„æŽ¨é€æ¶ˆæ¯åˆ°ç”¨æˆ·ç­‰ã€‚ æŠ€èƒ½åˆ—è¡¨ ç²¾é€šObjective-Cè¯­è¨€ï¼Œç†Ÿç»ƒæŽŒæ¡iOSå¹³å°å„ç±»APIï¼Œç†Ÿæ‚‰iOSå†…å­˜ç®¡ç†æœºåˆ¶ï¼Œç†Ÿæ‚‰iOSå¤šçº¿ç¨‹ã€‚ ç†Ÿæ‚‰Swiftè¯­è¨€åŠå…¶ç‰¹æ€§ä»¥åŠSDKç­‰ã€‚ èƒ½ç†Ÿç»ƒçš„è¿ç”¨AFNetworkingã€SDWebImageã€Masonryã€Reactivecocoaç­‰å¼€æºé¡¹ç›®ã€‚ èƒ½ç†Ÿç»ƒä½¿ç”¨çº¯ä»£ç æˆ–è€…Storyboardï¼Œxibè¿›è¡Œå¼€å‘ã€‚ èƒ½ç†Ÿç»ƒçš„ä½¿ç”¨Instrumentsä¸‹çš„æ€§èƒ½è°ƒè¯•å·¥å…·è¿›è¡Œæ€§èƒ½ä¼˜åŒ–ã€‚ ç†Ÿæ‚‰ç½‘ç»œæ•°æ®(JSON/XML)çš„è¯·æ±‚ä»¥åŠè§£æžå¹¶è½¬åŒ–æ¨¡åž‹ï¼ŒCharlesç½‘ç»œæ•°æ®æŠ“åŒ…åˆ†æžã€‚ ç†Ÿç»ƒä½¿ç”¨Gitã€SVNç­‰ä»£ç ç®¡ç†å·¥å…·ã€‚ ç†Ÿæ‚‰MVCã€MVVMã€å§”æ‰˜ä»£ç†ã€é€šçŸ¥è§‚å¯Ÿç­‰å¼€å‘æ¨¡å¼ã€‚ ç†Ÿæ‚‰TCP/UDP/HTTP/HTTPS/XMPPç­‰åè®®ã€‚ ç†Ÿæ‚‰è…¾è®¯Buglyçš„Crashé”™è¯¯åˆ†æžï¼Œç†Ÿæ‚‰GrowingIOæ— åŸ‹ç‚¹æŠ€æœ¯ç­‰ã€‚ ç†Ÿæ‚‰æŒç»­é›†æˆJenkins,fastlaneç­‰å·¥å…·ã€‚ ç†Ÿæ‚‰iOSæ•°æ®æŒä¹…åŒ–ï¼ŒNSUserDefaultsã€NSKeyedArchiverã€SQLite3ã€ CoreDataç­‰ã€‚ ç†Ÿæ‚‰åŽå°æŽ¥å£è§„èŒƒä»¥åŠå„ç§è°ƒè¯•å·¥å…·ã€‚ äº†è§£React Nativeã€Weexã€Flutterç­‰è·¨å¹³å°å¼€å‘æŠ€æœ¯ã€‚ å…´è¶£çˆ±å¥½ æ­å»ºè¿‡VPNï¼Œç›®å‰ä½¿ç”¨çš„ä¸ºè‡ªå·±åœ¨Google Cloud Platformæ­å»ºçš„CentOS7æœåŠ¡å™¨ã€‚ ä½¿ç”¨Pythonç¼–å†™ä¸€äº›æŠ“å–å›¾ç‰‡çš„å°è„šæœ¬ã€‚ æ­å»ºè¿‡æŒç»­é›†æˆjenkins+fir+é’‰é’‰æœºå™¨äººé€šçŸ¥ç­‰æŒç»­é›†æˆå·¥å…·ï¼Œå¯ä»¥è‡ªåŠ¨æ‰“åŒ…ã€ä¸Šä¼ å¹¶é€šçŸ¥æµ‹è¯•äººå‘˜ã€‚ ä¸ªäººå–œæ¬¢å„ç§çƒç±»è¿åŠ¨å’Œå”±æ­Œã€‚ è‡ªæˆ‘è¯„ä»· è´£ä»»å¿ƒå¼ºï¼Œæ€§æ ¼å¤–å‘ï¼Œäººé™…æ²Ÿé€šèƒ½åŠ›è‰¯å¥½ï¼Œæœ‰åè°ƒå›¢é˜Ÿå·¥ä½œçš„èƒ½åŠ›ï¼Œå–œæ¬¢æ‹¥æŠ±æ–°æŠ€æœ¯ã€‚ å·¥ä½œè®¤çœŸè´Ÿè´£ï¼Œè®¤çœŸå¯¹å¾…æ¯ä¸€ä»¶äº‹æƒ…ï¼Œæ¯ä¸€ä¸ªæŠ€æœ¯ç‚¹ï¼Œåé¦ˆåŠæ—¶ï¼Œèƒ½åšåˆ°å°½æ—©æš´éœ²é£Žé™©ä»¥åŠé—®é¢˜ å·¥ä½œç»éªŒä¸°å¯Œï¼Œå¼€å‘å¿«é€Ÿï¼Œæœ‰è‰¯å¥½çš„ç¼–ç¨‹èƒ½åŠ›å’Œä¹ æƒ¯ï¼Œå–œæ¬¢è§„èŒƒåŒ–ä»£ç ä»¥åŠç§¯æžä¼˜åŒ–ä»£ç ã€‚ ä½œå“é“¾æŽ¥ 90ç§’ã€Aiä¼˜æƒ ã€å¿«æ·˜ä¼˜å“ã€æƒ æ‹ä¼˜å“ã€é—ªç”µæ‹å– ç¤¾äº¤ä¸»é¡µ ä¸ªäººåšå®¢ï¼šSheldonâ€™s blog GitHubï¼šSheldon ç®€ä¹¦ï¼šææµ…çš„é’è›™]]></content>
      <categories>
        <category>hide</category>
      </categories>
      <tags>
        <tag>hide</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è¯¦ç»†è§£æžHTTPå’ŒHTTPS]]></title>
    <url>%2F2019%2F03%2F04%2F%E8%AF%A6%E7%BB%86%E8%A7%A3%E6%9E%90HTTP%E5%92%8CHTTPS%2F</url>
    <content type="text"><![CDATA[HTTPåè®®è¢«ç”¨äºŽåœ¨Webæµè§ˆå™¨å’Œç½‘ç«™æœåŠ¡å™¨ä¹‹é—´ä¼ é€’ä¿¡æ¯ï¼ŒHTTPåè®®ä»¥æ˜Žæ–‡æ–¹å¼å‘é€å†…å®¹ï¼Œä¸æä¾›ä»»ä½•æ–¹å¼çš„æ•°æ®åŠ å¯†ï¼Œå› æ­¤ï¼ŒHTTPåè®®ä¸é€‚åˆä¼ è¾“ä¸€äº›æ•æ„Ÿä¿¡æ¯ï¼Œæ¯”å¦‚ï¼šä¿¡ç”¨å¡å·ã€å¯†ç ç­‰æ”¯ä»˜ä¿¡æ¯ã€‚ä¸ºäº†è§£å†³HTTPåè®®çš„è¿™ä¸€ç¼ºé™·ï¼Œéœ€è¦ä½¿ç”¨å¦ä¸€ç§åè®®ï¼šHTTPSï¼Œä¸ºäº†æ•°æ®ä¼ è¾“çš„å®‰å…¨ï¼ŒHTTPSåœ¨HTTPçš„åŸºç¡€ä¸ŠåŠ å…¥äº†SSLåè®®ï¼ŒSSLä¾é è¯ä¹¦æ¥éªŒè¯æœåŠ¡å™¨çš„èº«ä»½ï¼Œå¹¶ä¸ºæµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡åŠ å¯†ã€‚ HTTPå’ŒHTTPSçš„åŸºæœ¬æ¦‚å¿µHTTPï¼ˆHyperText Transfer Protocolï¼šè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼‰ï¼šæ˜¯äº’è”ç½‘ä¸Šåº”ç”¨æœ€ä¸ºå¹¿æ³›çš„ä¸€ç§åè®®ï¼Œç”¨äºŽä»ŽWWWæœåŠ¡å™¨ä¼ è¾“è¶…æ–‡æœ¬åˆ°æœ¬åœ°æµè§ˆå™¨çš„ä¼ è¾“åè®®ï¼Œå®ƒå¯ä»¥ä½¿æµè§ˆå™¨æ›´åŠ é«˜æ•ˆï¼Œä½¿ç½‘ç»œä¼ è¾“å‡å°‘ã€‚HTTP é»˜è®¤å·¥ä½œåœ¨ TCP åè®® 80 ç«¯å£ï¼Œç”¨æˆ·è®¿é—®ç½‘ç«™ http:// æ‰“å¤´çš„éƒ½æ˜¯æ ‡å‡† HTTP æœåŠ¡ã€‚ HTTPSï¼ˆHypertext Transfer Protocol Secureï¼šè¶…æ–‡æœ¬ä¼ è¾“å®‰å…¨åè®®ï¼‰ï¼šæ˜¯ä»¥å®‰å…¨ä¸ºç›®æ ‡çš„HTTPé€šé“ï¼Œç®€å•è®²æ˜¯HTTPçš„å®‰å…¨ç‰ˆï¼Œå³HTTPä¸‹åŠ å…¥SSLå±‚ï¼ŒHTTPSçš„å®‰å…¨åŸºç¡€æ˜¯SSLï¼Œå› æ­¤åŠ å¯†çš„è¯¦ç»†å†…å®¹å°±éœ€è¦SSLã€‚HTTPS é»˜è®¤å·¥ä½œåœ¨ TCP åè®®443ç«¯å£ï¼Œå®ƒçš„å·¥ä½œæµç¨‹ä¸€èˆ¬å¦‚ä»¥ä¸‹æ–¹å¼ï¼š TCP ä¸‰æ¬¡åŒæ­¥æ¡æ‰‹ å®¢æˆ·ç«¯éªŒè¯æœåŠ¡å™¨æ•°å­—è¯ä¹¦ DH ç®—æ³•åå•†å¯¹ç§°åŠ å¯†ç®—æ³•çš„å¯†é’¥ã€hash ç®—æ³•çš„å¯†é’¥ SSL å®‰å…¨åŠ å¯†éš§é“åå•†å®Œæˆ ç½‘é¡µä»¥åŠ å¯†çš„æ–¹å¼ä¼ è¾“ï¼Œç”¨åå•†çš„å¯¹ç§°åŠ å¯†ç®—æ³•å’Œå¯†é’¥åŠ å¯†ï¼Œä¿è¯æ•°æ®æœºå¯†æ€§ï¼›ç”¨åå•†çš„hashç®—æ³•è¿›è¡Œæ•°æ®å®Œæ•´æ€§ä¿æŠ¤ï¼Œä¿è¯æ•°æ®ä¸è¢«ç¯¡æ”¹ã€‚ HTTPSåè®®çš„ä¸»è¦ä½œç”¨æœ‰ä¸¤ç§ï¼š å»ºç«‹ä¸€ä¸ªä¿¡æ¯å®‰å…¨é€šé“ï¼Œæ¥ä¿è¯æ•°æ®ä¼ è¾“çš„å®‰å…¨ ç¡®è®¤ç½‘ç«™çš„çœŸå®žæ€§ HTTPä¸ŽHTTPSæœ‰ä»€ä¹ˆåŒºåˆ« HTTPåè®®æ˜¯æ˜Žæ–‡ä¼ è¾“ï¼Œå› æ­¤HTTPåè®®éžå¸¸ä¸å®‰å…¨ï¼›HTTPSï¼ˆSSL+HTTPï¼‰æ•°æ®ä¼ è¾“è¿‡ç¨‹æ˜¯åŠ å¯†çš„ï¼Œå®‰å…¨æ€§è¾ƒå¥½ã€‚ ä½¿ç”¨ HTTPS åè®®éœ€è¦åˆ° CAï¼ˆCertificate Authorityï¼Œæ•°å­—è¯ä¹¦è®¤è¯æœºæž„ï¼‰ ç”³è¯·è¯ä¹¦ï¼Œä¸€èˆ¬å…è´¹è¯ä¹¦è¾ƒå°‘ï¼Œå› è€Œéœ€è¦ä¸€å®šè´¹ç”¨ã€‚è¯ä¹¦é¢å‘æœºæž„å¦‚ï¼šSymantecã€Comodoã€GoDaddy å’Œ GlobalSign ç­‰ã€‚ HTTP é¡µé¢å“åº”é€Ÿåº¦æ¯” HTTPS å¿«ï¼Œä¸»è¦æ˜¯å› ä¸º HTTP ä½¿ç”¨ TCP ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿žæŽ¥ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éœ€è¦äº¤æ¢ 3 ä¸ªåŒ…ï¼Œè€Œ HTTPSé™¤äº† TCP çš„ä¸‰ä¸ªåŒ…ï¼Œè¿˜è¦åŠ ä¸Š ssl æ¡æ‰‹éœ€è¦çš„ 9 ä¸ªåŒ…ï¼Œæ‰€ä»¥ä¸€å…±æ˜¯ 12 ä¸ªåŒ…ã€‚ http å’Œ https ä½¿ç”¨çš„æ˜¯å®Œå…¨ä¸åŒçš„è¿žæŽ¥æ–¹å¼ï¼Œç”¨çš„ç«¯å£ä¹Ÿä¸ä¸€æ ·ï¼Œå‰è€…æ˜¯ 80ï¼ŒåŽè€…æ˜¯ 443ã€‚ HTTPS å…¶å®žå°±æ˜¯å»ºæž„åœ¨ SSL/TLS ä¹‹ä¸Šçš„ HTTP åè®®ï¼Œæ‰€ä»¥ï¼Œè¦æ¯”è¾ƒ HTTPS æ¯” HTTP è¦æ›´è€—è´¹æœåŠ¡å™¨èµ„æºã€‚ TCP ä¸‰æ¬¡æ¡æ‰‹ ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯å°è¯•è¿žæŽ¥æœåŠ¡å™¨ï¼Œå‘æœåŠ¡å™¨å‘é€ syn åŒ…ï¼ˆåŒæ­¥åºåˆ—ç¼–å·Synchronize Sequence Numbersï¼‰ï¼Œsyn=jï¼Œå®¢æˆ·ç«¯è¿›å…¥ SYN_SEND çŠ¶æ€ç­‰å¾…æœåŠ¡å™¨ç¡®è®¤ ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šæœåŠ¡å™¨æŽ¥æ”¶å®¢æˆ·ç«¯synåŒ…å¹¶ç¡®è®¤ï¼ˆack=j+1ï¼‰ï¼ŒåŒæ—¶å‘å®¢æˆ·ç«¯å‘é€ä¸€ä¸ª SYNåŒ…ï¼ˆsyn=kï¼‰ï¼Œå³ SYN+ACK åŒ…ï¼Œæ­¤æ—¶æœåŠ¡å™¨è¿›å…¥ SYN_RECV çŠ¶æ€ ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨çš„SYN+ACKåŒ…ï¼Œå‘æœåŠ¡å™¨å‘é€ç¡®è®¤åŒ…ACK(ack=k+1ï¼‰ï¼Œæ­¤åŒ…å‘é€å®Œæ¯•ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨è¿›å…¥ESTABLISHEDçŠ¶æ€ï¼Œå®Œæˆä¸‰æ¬¡æ¡æ‰‹ HTTPSçš„å·¥ä½œåŽŸç† å®¢æˆ·ç«¯å‘èµ·HTTPSè¯·æ±‚ç”¨æˆ·åœ¨æµè§ˆå™¨é‡Œè¾“å…¥ä¸€ä¸ª https ç½‘å€ï¼Œç„¶åŽè¿žæŽ¥åˆ° server çš„ 443 ç«¯å£ã€‚ æœåŠ¡ç«¯é…ç½®é‡‡ç”¨ HTTPS åè®®çš„æœåŠ¡å™¨å¿…é¡»è¦æœ‰ä¸€å¥—æ•°å­—è¯ä¹¦ï¼Œå¯ä»¥è‡ªå·±åˆ¶ä½œï¼Œä¹Ÿå¯ä»¥å‘ç»„ç»‡ç”³è¯·ï¼ŒåŒºåˆ«å°±æ˜¯è‡ªå·±é¢å‘çš„è¯ä¹¦éœ€è¦å®¢æˆ·ç«¯éªŒè¯é€šè¿‡ï¼Œæ‰å¯ä»¥ç»§ç»­è®¿é—®ï¼Œè€Œä½¿ç”¨å—ä¿¡ä»»çš„å…¬å¸ç”³è¯·çš„è¯ä¹¦åˆ™ä¸ä¼šå¼¹å‡ºæç¤ºé¡µé¢(startssl å°±æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œæœ‰ 1 å¹´çš„å…è´¹æœåŠ¡)ã€‚è¿™å¥—è¯ä¹¦å…¶å®žå°±æ˜¯ä¸€å¯¹å…¬é’¥å’Œç§é’¥ï¼Œå¦‚æžœå¯¹å…¬é’¥å’Œç§é’¥ä¸å¤ªç†è§£ï¼Œå¯ä»¥æƒ³è±¡æˆä¸€æŠŠé’¥åŒ™å’Œä¸€ä¸ªé”å¤´ï¼Œåªæ˜¯å…¨ä¸–ç•Œåªæœ‰ä½ ä¸€ä¸ªäººæœ‰è¿™æŠŠé’¥åŒ™ï¼Œä½ å¯ä»¥æŠŠé”å¤´ç»™åˆ«äººï¼Œåˆ«äººå¯ä»¥ç”¨è¿™ä¸ªé”æŠŠé‡è¦çš„ä¸œè¥¿é”èµ·æ¥ï¼Œç„¶åŽå‘ç»™ä½ ï¼Œå› ä¸ºåªæœ‰ä½ ä¸€ä¸ªäººæœ‰è¿™æŠŠé’¥åŒ™ï¼Œæ‰€ä»¥åªæœ‰ä½ æ‰èƒ½çœ‹åˆ°è¢«è¿™æŠŠé”é”èµ·æ¥çš„ä¸œè¥¿ã€‚ ä¼ é€è¯ä¹¦è¿™ä¸ªè¯ä¹¦å…¶å®žå°±æ˜¯å…¬é’¥ï¼Œåªæ˜¯åŒ…å«äº†å¾ˆå¤šä¿¡æ¯ï¼Œå¦‚è¯ä¹¦çš„é¢å‘æœºæž„ï¼Œè¿‡æœŸæ—¶é—´ç­‰ç­‰ã€‚ å®¢æˆ·ç«¯è§£æžè¯ä¹¦è¿™éƒ¨åˆ†å·¥ä½œæ˜¯ç”±å®¢æˆ·ç«¯çš„TLSæ¥å®Œæˆçš„ï¼Œé¦–å…ˆä¼šéªŒè¯å…¬é’¥æ˜¯å¦æœ‰æ•ˆï¼Œæ¯”å¦‚é¢å‘æœºæž„ï¼Œè¿‡æœŸæ—¶é—´ç­‰ç­‰ï¼Œå¦‚æžœå‘çŽ°å¼‚å¸¸ï¼Œåˆ™ä¼šå¼¹å‡ºä¸€ä¸ªè­¦å‘Šæ¡†ï¼Œæç¤ºè¯ä¹¦å­˜åœ¨é—®é¢˜ã€‚å¦‚æžœè¯ä¹¦æ²¡æœ‰é—®é¢˜ï¼Œé‚£ä¹ˆå°±ç”Ÿæˆä¸€ä¸ªéšæœºå€¼ï¼Œç„¶åŽç”¨è¯ä¹¦å¯¹è¯¥éšæœºå€¼è¿›è¡ŒåŠ å¯†ï¼Œå°±å¥½åƒä¸Šé¢è¯´çš„ï¼ŒæŠŠéšæœºå€¼ç”¨é”å¤´é”èµ·æ¥ï¼Œè¿™æ ·é™¤éžæœ‰é’¥åŒ™ï¼Œä¸ç„¶çœ‹ä¸åˆ°è¢«é”ä½çš„å†…å®¹ã€‚ ä¼ é€åŠ å¯†ä¿¡æ¯è¿™éƒ¨åˆ†ä¼ é€çš„æ˜¯ç”¨è¯ä¹¦åŠ å¯†åŽçš„éšæœºå€¼ï¼Œç›®çš„å°±æ˜¯è®©æœåŠ¡ç«¯å¾—åˆ°è¿™ä¸ªéšæœºå€¼ï¼Œä»¥åŽå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„é€šä¿¡å°±å¯ä»¥é€šè¿‡è¿™ä¸ªéšæœºå€¼æ¥è¿›è¡ŒåŠ å¯†è§£å¯†äº†ã€‚ æœåŠ¡ç«¯è§£å¯†ä¿¡æ¯æœåŠ¡ç«¯ç”¨ç§é’¥è§£å¯†åŽï¼Œå¾—åˆ°äº†å®¢æˆ·ç«¯ä¼ è¿‡æ¥çš„éšæœºå€¼(ç§é’¥)ï¼Œç„¶åŽæŠŠå†…å®¹é€šè¿‡è¯¥å€¼è¿›è¡Œå¯¹ç§°åŠ å¯†ï¼Œæ‰€è°“å¯¹ç§°åŠ å¯†å°±æ˜¯ï¼Œå°†ä¿¡æ¯å’Œç§é’¥é€šè¿‡æŸç§ç®—æ³•æ··åˆåœ¨ä¸€èµ·ï¼Œè¿™æ ·é™¤éžçŸ¥é“ç§é’¥ï¼Œä¸ç„¶æ— æ³•èŽ·å–å†…å®¹ï¼Œè€Œæ­£å¥½å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½çŸ¥é“è¿™ä¸ªç§é’¥ï¼Œæ‰€ä»¥åªè¦åŠ å¯†ç®—æ³•å¤Ÿå½ªæ‚ï¼Œç§é’¥å¤Ÿå¤æ‚ï¼Œæ•°æ®å°±å¤Ÿå®‰å…¨ã€‚ ä¼ è¾“åŠ å¯†åŽçš„ä¿¡æ¯è¿™éƒ¨åˆ†ä¿¡æ¯æ˜¯æœåŠ¡æ®µç”¨ç§é’¥åŠ å¯†åŽçš„ä¿¡æ¯ï¼Œå¯ä»¥åœ¨å®¢æˆ·ç«¯è¢«è¿˜åŽŸã€‚ å®¢æˆ·ç«¯è§£å¯†ä¿¡æ¯å®¢æˆ·ç«¯ç”¨ä¹‹å‰ç”Ÿæˆçš„ç§é’¥è§£å¯†æœåŠ¡æ®µä¼ è¿‡æ¥çš„ä¿¡æ¯ï¼ŒäºŽæ˜¯èŽ·å–äº†è§£å¯†åŽçš„å†…å®¹ï¼Œæ•´ä¸ªè¿‡ç¨‹ç¬¬ä¸‰æ–¹å³ä½¿ç›‘å¬åˆ°äº†æ•°æ®ï¼Œä¹ŸæŸæ‰‹æ— ç­–ã€‚]]></content>
      <categories>
        <category>ç½‘ç»œ</category>
      </categories>
      <tags>
        <tag>HTTP</tag>
        <tag>HTTPS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[GitæœåŠ¡å™¨çš„æ­å»º]]></title>
    <url>%2F2019%2F01%2F22%2FGit%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E6%90%AD%E5%BB%BA%2F</url>
    <content type="text"><![CDATA[GitHubå°±æ˜¯ä¸€ä¸ªå…è´¹æ‰˜ç®¡å¼€æºä»£ç çš„è¿œç¨‹ä»“åº“ã€‚ä½†æ˜¯å¯¹äºŽæŸäº›è§†æºä»£ç å¦‚ç”Ÿå‘½çš„å•†ä¸šå…¬å¸æ¥è¯´ï¼Œæ—¢ä¸æƒ³å…¬å¼€æºä»£ç ï¼Œåˆèˆä¸å¾—ç»™GitHubäº¤ä¿æŠ¤è´¹ï¼Œé‚£å°±åªèƒ½è‡ªå·±æ­å»ºä¸€å°GitæœåŠ¡å™¨ä½œä¸ºç§æœ‰ä»“åº“ä½¿ç”¨ã€‚æ­å»ºGitæœåŠ¡å™¨éœ€è¦å‡†å¤‡ä¸€å°è¿è¡ŒLinuxçš„æœºå™¨ï¼Œè¿™æ ·ï¼Œé€šè¿‡å‡ æ¡ç®€å•çš„aptå‘½ä»¤å°±å¯ä»¥å®Œæˆå®‰è£…ã€‚ ç¬¬ä¸€æ­¥ï¼Œå®‰è£…Git1$ sudo apt-get install git ç¬¬äºŒæ­¥ï¼Œåˆ›å»ºä¸€ä¸ªgitç”¨æˆ·ï¼Œç”¨æ¥è¿è¡ŒgitæœåŠ¡ï¼š1$ sudo adduser git ç¬¬ä¸‰æ­¥ï¼Œåˆ›å»ºè¯ä¹¦ç™»å½•ï¼šæ”¶é›†æ‰€æœ‰éœ€è¦ç™»å½•çš„ç”¨æˆ·çš„å…¬é’¥ï¼Œå°±æ˜¯ä»–ä»¬è‡ªå·±çš„id_rsa.pubæ–‡ä»¶ï¼ŒæŠŠæ‰€æœ‰å…¬é’¥å¯¼å…¥åˆ°/home/git/.ssh/authorized_keysæ–‡ä»¶é‡Œï¼Œä¸€è¡Œä¸€ä¸ªã€‚ ç¬¬å››æ­¥ï¼Œåˆå§‹åŒ–Gitä»“åº“ï¼šå…ˆé€‰å®šä¸€ä¸ªç›®å½•ä½œä¸ºGitä»“åº“ï¼Œå‡å®šæ˜¯/srv/sample.gitï¼Œåœ¨/srvç›®å½•ä¸‹è¾“å…¥å‘½ä»¤ï¼š1$ sudo git init --bare sample.git Gitå°±ä¼šåˆ›å»ºä¸€ä¸ªè£¸ä»“åº“ï¼Œè£¸ä»“åº“æ²¡æœ‰å·¥ä½œåŒºï¼Œå› ä¸ºæœåŠ¡å™¨ä¸Šçš„Gitä»“åº“çº¯ç²¹æ˜¯ä¸ºäº†å…±äº«ï¼Œæ‰€ä»¥ä¸è®©ç”¨æˆ·ç›´æŽ¥ç™»å½•åˆ°æœåŠ¡å™¨ä¸ŠåŽ»æ”¹å·¥ä½œåŒºï¼Œå¹¶ä¸”æœåŠ¡å™¨ä¸Šçš„Gitä»“åº“é€šå¸¸éƒ½ä»¥.gitç»“å°¾ã€‚ç„¶åŽï¼ŒæŠŠowneræ”¹ä¸ºgitï¼š1$ sudo chown -R git:git sample.git ç¬¬äº”æ­¥ï¼Œç¦ç”¨shellç™»å½•ï¼šå‡ºäºŽå®‰å…¨è€ƒè™‘ï¼Œç¬¬äºŒæ­¥åˆ›å»ºçš„gitç”¨æˆ·ä¸å…è®¸ç™»å½•shellï¼Œè¿™å¯ä»¥é€šè¿‡ç¼–è¾‘/etc/passwdæ–‡ä»¶å®Œæˆã€‚æ‰¾åˆ°ç±»ä¼¼ä¸‹é¢çš„ä¸€è¡Œï¼š1git:x:1001:1001:,,,:/home/git:/bin/bash æ”¹ä¸ºï¼š1git:x:1001:1001:,,,:/home/git:/usr/bin/git-shell è¿™æ ·ï¼Œgitç”¨æˆ·å¯ä»¥æ­£å¸¸é€šè¿‡sshä½¿ç”¨gitï¼Œä½†æ— æ³•ç™»å½•shellï¼Œå› ä¸ºæˆ‘ä»¬ä¸ºgitç”¨æˆ·æŒ‡å®šçš„git-shellæ¯æ¬¡ä¸€ç™»å½•å°±è‡ªåŠ¨é€€å‡ºã€‚ ç¬¬å…­æ­¥ï¼Œå…‹éš†è¿œç¨‹ä»“åº“ï¼šçŽ°åœ¨ï¼Œå¯ä»¥é€šè¿‡git cloneå‘½ä»¤å…‹éš†è¿œç¨‹ä»“åº“äº†ï¼Œåœ¨å„è‡ªçš„ç”µè„‘ä¸Šè¿è¡Œï¼š123$ git clone git@server:/srv/sample.gitCloning into &apos;sample&apos;...warning: You appear to have cloned an empty repository.]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[python3-Macå®‰è£…Python3]]></title>
    <url>%2F2019%2F01%2F21%2Fpython3-Mac%E5%AE%89%E8%A3%85Python3%2F</url>
    <content type="text"><![CDATA[å› ä¸ºPythonæ˜¯è·¨å¹³å°çš„ï¼Œå®ƒå¯ä»¥è¿è¡Œåœ¨Windowsã€Macå’Œå„ç§Linux/Unixç³»ç»Ÿä¸Šã€‚åœ¨Windowsä¸Šå†™Pythonç¨‹åºï¼Œæ”¾åˆ°Linuxä¸Šä¹Ÿæ˜¯èƒ½å¤Ÿè¿è¡Œçš„ã€‚è¦å¼€å§‹å­¦ä¹ Pythonç¼–ç¨‹ï¼Œé¦–å…ˆå°±å¾—æŠŠPythonå®‰è£…åˆ°ä½ çš„ç”µè„‘é‡Œã€‚å®‰è£…åŽï¼Œä½ ä¼šå¾—åˆ°Pythonè§£é‡Šå™¨ï¼ˆå°±æ˜¯è´Ÿè´£è¿è¡ŒPythonç¨‹åºçš„ï¼‰ï¼Œä¸€ä¸ªå‘½ä»¤è¡Œäº¤äº’çŽ¯å¢ƒï¼Œè¿˜æœ‰ä¸€ä¸ªç®€å•çš„é›†æˆå¼€å‘çŽ¯å¢ƒã€‚ å®‰è£…Python3ç³»ç»Ÿè‡ªå¸¦çš„Pythonç‰ˆæœ¬æ˜¯2.7ã€‚è¦å®‰è£…æœ€æ–°çš„Python 3.7ï¼Œæœ‰ä¸¤ä¸ªæ–¹æ³•ï¼š æ–¹æ³•ä¸€ï¼šä»ŽPythonå®˜ç½‘ä¸‹è½½Python 3.7çš„å®‰è£…ç¨‹åºï¼ˆç½‘é€Ÿæ…¢çš„åŒå­¦è¯·ç§»æ­¥å›½å†…é•œåƒï¼‰ï¼ŒåŒå‡»è¿è¡Œå¹¶å®‰è£…ï¼› æ–¹æ³•äºŒï¼šå¦‚æžœå®‰è£…äº†Homebrewï¼Œç›´æŽ¥é€šè¿‡å‘½ä»¤brew install python3å®‰è£…å³å¯ã€‚ ç›´æŽ¥è¿è¡Œ.pyæ–‡ä»¶åœ¨æ–‡ä»¶å¼€å¤´æ·»åŠ ï¼š1#!/usr/bin/env python3 ç„¶åŽé€šè¿‡å‘½ä»¤ç»™æ–‡ä»¶æƒé™ï¼š1chmod a+x hello.py å°±å¯ä»¥é€šè¿‡å‘½ä»¤./hello.pyç›´æŽ¥è¿è¡Œ.pyæ–‡ä»¶äº†ã€‚]]></content>
      <categories>
        <category>åŽå°</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CentOS7+Python3+Django]]></title>
    <url>%2F2019%2F01%2F21%2FCentOS7-Python3-Django%2F</url>
    <content type="text"><![CDATA[CentOS 7ä¸­å¸ƒç½®Python3å’ŒDjangoCentos7ä¸­é»˜è®¤å®‰è£…äº†python2.7.5ï¼Œå› ä¸ºä¸€äº›å‘½ä»¤è¦ç”¨å®ƒï¼Œæ¯”å¦‚ï¼šyumï¼›å®ƒä½¿ç”¨çš„æ˜¯python2.7.5ã€‚å½“æˆ‘ä»¬åœ¨å‘½ä»¤è¡Œé‡Œè¾“å…¥ 1python -V å°±å¯ä»¥çœ‹åˆ°ç‰ˆæœ¬ä¸º2.7.5ã€‚ å®‰è£…å„ç§ä¾èµ–åŒ…ï¼š 12yum -y groupinstall "Development tools"yum -y install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel db4-devel libpcap-devel xz-devel libffi-devel gcc automake autoconf libtool make wget å®‰è£…python3å› ä¸ºæˆ‘ä»¬è¦å®‰è£…python3ç‰ˆæœ¬ï¼Œæ‰€ä»¥pythonè¦æŒ‡å‘python3æ‰è¡Œï¼Œç›®å‰è¿˜æ²¡æœ‰å®‰è£…python3ï¼Œå…ˆå¤‡ä»½ï¼Œå¤‡ä»½ä¹‹å‰å…ˆå®‰è£…ç›¸å…³åŒ…ï¼Œç”¨äºŽä¸‹è½½ç¼–è¯‘python3 1yum install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gcc make è¿™å‡ ä¸ªåŒ…å¿…é¡»å¾—å®‰è£…ï¼Œå¦åˆ™å®‰è£…python3æ—¶å¯èƒ½ä¼šå‡ºçŽ°å„ç§é”™è¯¯ã€‚è¿è¡Œä¸‹é¢ä¸¤ä¸ªå‘½ä»¤ï¼Œè¿›è¡Œå¤‡ä»½ 12cd /usr/binmv python python.bak ä¸‹è½½python3.6.3 1wget https://www.python.org/ftp/python/3.6.3/Python-3.6.3.tar.xz è§£åŽ‹ 1tar -xvJf Python-3.6.3.tar.xz è¿›å…¥è§£åŽ‹å¥½çš„python3.6.3æ–‡ä»¶å¤¹ 1cd Python-3.6.3 ç¼–è¯‘å®‰è£… 123./configure prefix=/usr/local/python3makemake install å®‰è£…å®Œæ¯•ï¼Œ/usr/local/ç›®å½•ä¸‹å°±ä¼šæœ‰python3äº†ã€‚ å®žçŽ°Python3å’ŒPython2çš„å…±å­˜æ·»åŠ Python3çš„è½¯é“¾ 1ln -s /usr/local/python3/bin/python3 /usr/bin/python è¿™ä¸ªæ—¶å€™åœ¨æ‰§è¡Œå‘½ä»¤python -Vå’Œpython2 -Vï¼Œå°±èƒ½çœ‹åˆ°python3å’Œpython2çš„ç‰ˆæœ¬äº†ã€‚ æ·»åŠ pip3çš„è½¯é“¾ 1ln -s /usr/local/python3/bin/pip3 /usr/bin/pip å› ä¸ºæ‰§è¡Œyuméœ€è¦Python2çš„ç‰ˆæœ¬ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜æœ‰ä¿®æ”¹yumçš„é…ç½®ï¼Œæ‰§è¡Œï¼š 1vi /usr/bin/yum æŠŠç¬¬ä¸€è¡Œ#! /usr/bin/pythonä¿®æ”¹ä¸º#! /usr/bin/python2 åŒç† 1vi /usr/libexec/urlgrabber-ext-down æ–‡ä»¶é‡Œé¢çš„#! /usr/bin/pythonä¹Ÿè¦ä¿®æ”¹ä¸º#! /usr/bin/python2 å®‰è£…Djangoé¡¹ç›®ä¸­éœ€è¦çš„pythonç›¸å…³åŒ…å®‰è£…pythonç›¸å…³åŒ…éœ€è¦ç”¨åˆ°pythonä¸­çš„pipå‘½ä»¤ 12345678910pip install Djangopip install PyMySQLpip install Scrapypip install beautifulsoup4pip install bs4pip install lxmlpip install numpypip install requestspip install simplejsonpip install urllib3 æ­¤æ—¶ï¼Œpythonæ‰€éœ€è¦çš„åŒ…å·²ç»éƒ½å®‰è£…å¥½äº†ã€‚ å®‰è£…MySQLä¸‹è½½MySQLæºå®‰è£…åŒ… 1wget http://dev.mysql.com/get/mysql57-community-release-el7-8.noarch.rpm å®‰è£…MySQLæº 12yum localinstall mysql57-community-release-el7-8.noarch.rpmyum install mysql-devel å®‰è£…MySQL 1yum install mysql-community-server å¯åŠ¨MySQLæœåŠ¡ 1systemctl start mysqld æŸ¥çœ‹MySQLçŠ¶æ€ 1systemctl status mysqld å¼€æœºå¯åŠ¨ 1systemctl enable mysqld ä¿®æ”¹rootæœ¬åœ°ç™»å½•å¯†ç  123grep 'temporary password' /var/log/mysqld.logmysql -uroot -pset password for 'root'@'localhost'=password('!2Qw32sd'); æ³¨æ„ï¼šmysql5.7é»˜è®¤å®‰è£…äº†å¯†ç å®‰å…¨æ£€æŸ¥æ’ä»¶ï¼ˆvalidate_passwordï¼‰ï¼Œé»˜è®¤å¯†ç æ£€æŸ¥ç­–ç•¥è¦æ±‚å¯†ç å¿…é¡»åŒ…å«ï¼šå¤§å°å†™å­—æ¯ã€æ•°å­—å’Œç‰¹æ®Šç¬¦å·ï¼Œå¹¶ä¸”é•¿åº¦ä¸èƒ½å°‘äºŽ8ä½ã€‚å¦åˆ™ä¼šæç¤ºERROR 1819 (HY000): Your password does not satisfy the current policy requirementsé”™è¯¯ é…ç½®é»˜è®¤ç¼–ç ä¸ºutf8 ä¿®æ”¹/etc/my.cnfé…ç½®æ–‡ä»¶ï¼Œåœ¨[mysqld]ä¸‹æ·»åŠ ç¼–ç é…ç½®ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 123[mysqld]character_set_server=utf8init_connect='SET NAMES utf8' å¯¼å…¥djangoå’Œmysqlæ•°æ®åº“å¯¼å…¥djangoé¡¹ç›®ç”±äºŽæˆ‘é¡¹ç›®æ”¾åœ¨ç äº‘ä¸Šé¢ï¼Œç„¶åŽCentOSåˆè‡ªå¸¦gitï¼Œæˆ‘çš„æ•°æ®åº“æ–‡ä»¶ä¹Ÿæ¯”è¾ƒå°ï¼Œæ‰€ä»¥ä¹Ÿæ”¾åœ¨djangoé¡¹ç›®ä¸­äº†ï¼Œç”¨gitä¸‹è½½ä¸‹æ¥: 1234sudo su rootmkdir projectcd projectgit clone https://gitee.com/dafeige/django-restframework-demo.git æ­¤æ—¶ï¼Œæˆ‘çš„æ•°æ®åº“æ–‡ä»¶è·¯å¾„æ˜¯ï¼šproject/django-restframework-demo/tutorial/test_python.sqlï¼Œç”±äºŽéœ€è¦å°†æ­¤sqlæ–‡ä»¶å¯¼å…¥åˆ°mysqlæ•°æ®ä¸­ï¼Œéœ€è¦ç»™æ­¤æ–‡ä»¶åŠ æƒé™: 1chmod 777 project/django-restframework-demo/tutorial/test_python.sql å¯¼å…¥sqlæ•°æ®åº“æ–‡ä»¶è¿›å…¥æ•°æ®åº“ 1mysql -u root -p å¯¼å…¥sqlæ–‡ä»¶ 123create database test_python;use test_python;source project/django-restframework-demo/tutorial/test_python.sql; éƒ¨ç½²djangoå·¥ç¨‹è¿›å…¥åˆ°å·¥ç¨‹ä¸­ 123sudo su rootcd project/django-restframework-demo/tutorialpython manage.py runserver 0.0.0.0:80 &amp; æœ€åŽé¢çš„â€&amp;â€ï¼Œè¿™ç¬¦å·è¡¨ç¤ºåœ¨åŽå°è¿è¡Œè¯¥è¿›ç¨‹ã€‚è¿™é‡Œçš„IPåœ°å€å¦‚æžœç”¨å…¬ç½‘IP ä¼šè¿è¡Œä¸äº†ï¼Œè€Œç”¨0.0.0.0åˆ™å¤–ç½‘å’Œ127.0.0.1éƒ½èƒ½å¤Ÿè®¿é—®ã€‚]]></content>
      <categories>
        <category>æœåŠ¡å™¨</category>
      </categories>
      <tags>
        <tag>æœåŠ¡å™¨</tag>
        <tag>Python3</tag>
        <tag>Django</tag>
        <tag>CentOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Gitæ ‡ç­¾ç®¡ç†]]></title>
    <url>%2F2019%2F01%2F21%2FGit%E6%A0%87%E7%AD%BE%E7%AE%A1%E7%90%86%2F</url>
    <content type="text"><![CDATA[å‘å¸ƒä¸€ä¸ªç‰ˆæœ¬æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸å…ˆåœ¨ç‰ˆæœ¬åº“ä¸­æ‰“ä¸€ä¸ªæ ‡ç­¾ï¼ˆtagï¼‰ï¼Œè¿™æ ·ï¼Œå°±å”¯ä¸€ç¡®å®šäº†æ‰“æ ‡ç­¾æ—¶åˆ»çš„ç‰ˆæœ¬ã€‚å°†æ¥æ— è®ºä»€ä¹ˆæ—¶å€™ï¼Œå–æŸä¸ªæ ‡ç­¾çš„ç‰ˆæœ¬ï¼Œå°±æ˜¯æŠŠé‚£ä¸ªæ‰“æ ‡ç­¾çš„æ—¶åˆ»çš„åŽ†å²ç‰ˆæœ¬å–å‡ºæ¥ã€‚æ‰€ä»¥ï¼Œæ ‡ç­¾ä¹Ÿæ˜¯ç‰ˆæœ¬åº“çš„ä¸€ä¸ªå¿«ç…§ã€‚ åˆ›å»ºæ ‡ç­¾åœ¨Gitä¸­æ‰“æ ‡ç­¾éžå¸¸ç®€å•ï¼Œé¦–å…ˆï¼Œåˆ‡æ¢åˆ°éœ€è¦æ‰“æ ‡ç­¾çš„åˆ†æ”¯ä¸Šï¼š12345$ git branch* dev master$ git checkout masterSwitched to branch &apos;master&apos; ç„¶åŽï¼Œæ•²å‘½ä»¤git tag &lt;name&gt;å°±å¯ä»¥æ‰“ä¸€ä¸ªæ–°æ ‡ç­¾ï¼š1$ git tag v1.0 å¯ä»¥ç”¨å‘½ä»¤git tagæŸ¥çœ‹æ‰€æœ‰æ ‡ç­¾ï¼š12$ git tagv1.0 é»˜è®¤æ ‡ç­¾æ˜¯æ‰“åœ¨æœ€æ–°æäº¤çš„commitä¸Šçš„ã€‚æœ‰æ—¶å€™ï¼Œå¦‚æžœå¿˜äº†æ‰“æ ‡ç­¾ï¼Œæ¯”å¦‚ï¼ŒçŽ°åœ¨å·²ç»æ˜¯å‘¨äº”äº†ï¼Œä½†åº”è¯¥åœ¨å‘¨ä¸€æ‰“çš„æ ‡ç­¾æ²¡æœ‰æ‰“ï¼Œæ€Žä¹ˆåŠžï¼Ÿ æ–¹æ³•æ˜¯æ‰¾åˆ°åŽ†å²æäº¤çš„commit idï¼Œç„¶åŽæ‰“ä¸Šå°±å¯ä»¥äº†ï¼š12345678910111213141516$ git log --pretty=oneline --abbrev-commit12a631b (HEAD -&gt; master, tag: v1.0, origin/master) merged bug fix 1014c805e2 fix bug 101e1e9c68 merge with no-fff52c633 add mergecf810e4 conflict fixed5dc6824 &amp; simple14096d0 AND simpleb17d20e branch testd46f35e remove test.txtb84166e add test.txt519219b git tracks changese43a48b understand how stage works1094adb append GPLe475afc add distributedeaadf4e wrote a readme file æ¯”æ–¹è¯´è¦å¯¹add mergeè¿™æ¬¡æäº¤æ‰“æ ‡ç­¾ï¼Œå®ƒå¯¹åº”çš„commit idæ˜¯f52c633ï¼Œæ•²å…¥å‘½ä»¤ï¼š1$ git tag v0.9 f52c633 å‘½ä»¤git tag &lt;tagname&gt;ç”¨äºŽæ–°å»ºä¸€ä¸ªæ ‡ç­¾ï¼Œé»˜è®¤ä¸ºHEADï¼Œä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªcommit idï¼› å‘½ä»¤git tag -a &lt;tagname&gt; -m &quot;blablabla...&quot;å¯ä»¥æŒ‡å®šæ ‡ç­¾ä¿¡æ¯ï¼› å‘½ä»¤git tagå¯ä»¥æŸ¥çœ‹æ‰€æœ‰æ ‡ç­¾ã€‚ å‘½ä»¤git push origin &lt;tagname&gt;å¯ä»¥æŽ¨é€ä¸€ä¸ªæœ¬åœ°æ ‡ç­¾ï¼› å‘½ä»¤git push origin --tagså¯ä»¥æŽ¨é€å…¨éƒ¨æœªæŽ¨é€è¿‡çš„æœ¬åœ°æ ‡ç­¾ï¼› å‘½ä»¤git tag -d &lt;tagname&gt;å¯ä»¥åˆ é™¤ä¸€ä¸ªæœ¬åœ°æ ‡ç­¾ï¼› å‘½ä»¤git push origin :refs/tags/&lt;tagname&gt;å¯ä»¥åˆ é™¤ä¸€ä¸ªè¿œç¨‹æ ‡ç­¾ã€‚]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Gitåˆ†æ”¯ç®¡ç†]]></title>
    <url>%2F2019%2F01%2F21%2FGit%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%2F</url>
    <content type="text"><![CDATA[åˆ†æ”¯å°±æ˜¯ç§‘å¹»ç”µå½±é‡Œé¢çš„å¹³è¡Œå®‡å®™ï¼Œå½“ä½ æ­£åœ¨ç”µè„‘å‰åŠªåŠ›å­¦ä¹ Gitçš„æ—¶å€™ï¼Œå¦ä¸€ä¸ªä½ æ­£åœ¨å¦ä¸€ä¸ªå¹³è¡Œå®‡å®™é‡ŒåŠªåŠ›å­¦ä¹ SVNã€‚å¦‚æžœä¸¤ä¸ªå¹³è¡Œå®‡å®™äº’ä¸å¹²æ‰°ï¼Œé‚£å¯¹çŽ°åœ¨çš„ä½ ä¹Ÿæ²¡å•¥å½±å“ã€‚ä¸è¿‡ï¼Œåœ¨æŸä¸ªæ—¶é—´ç‚¹ï¼Œä¸¤ä¸ªå¹³è¡Œå®‡å®™åˆå¹¶äº†ï¼Œç»“æžœï¼Œä½ æ—¢å­¦ä¼šäº†Gitåˆå­¦ä¼šäº†SVNï¼ åˆ›å»ºäºŽåˆå¹¶åˆ†æ”¯æŸ¥çœ‹åˆ†æ”¯ï¼šgit branch åˆ›å»ºåˆ†æ”¯ï¼šgit branch &lt;name&gt; åˆ‡æ¢åˆ†æ”¯ï¼šgit checkout &lt;name&gt; åˆ›å»º+åˆ‡æ¢åˆ†æ”¯ï¼šgit checkout -b &lt;name&gt; åˆå¹¶æŸåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯ï¼šgit merge &lt;name&gt; åˆ é™¤åˆ†æ”¯ï¼šgit branch -d &lt;name&gt; ##è§£å†³å†²çªå½“ä¸¤ä¸ªåˆ†æ”¯åŒæ—¶åšäº†ä¿®æ”¹ï¼Œè¿™ä¸ªæ—¶å€™åˆå¹¶åˆ†æ”¯ä¼šå‡ºçŽ°å†²çªã€‚ å¯ä»¥æŸ¥çœ‹å†²çªæ–‡ä»¶ Gitç”¨&lt;&lt;&lt;&lt;&lt;&lt;&lt;ï¼Œ=======ï¼Œ&gt;&gt;&gt;&gt;&gt;&gt;&gt;æ ‡è®°å‡ºä¸åŒåˆ†æ”¯çš„å†…å®¹ ä¿®æ”¹åŽå†æäº¤ï¼Œç”¨git log --graph --pretty=oneline --abbrev-commitå‘½ä»¤æŸ¥çœ‹åˆ†æ”¯çš„åˆå¹¶æƒ…å†µã€‚ åˆ†æ”¯ç®¡ç†ç­–ç•¥é€šå¸¸ï¼Œåˆå¹¶åˆ†æ”¯æ—¶ï¼Œå¦‚æžœå¯èƒ½ï¼ŒGitä¼šç”¨Fast forwardæ¨¡å¼ï¼Œä½†è¿™ç§æ¨¡å¼ä¸‹ï¼Œåˆ é™¤åˆ†æ”¯åŽï¼Œä¼šä¸¢æŽ‰åˆ†æ”¯ä¿¡æ¯ã€‚ å¦‚æžœè¦å¼ºåˆ¶ç¦ç”¨Fast forwardæ¨¡å¼ï¼ŒGitå°±ä¼šåœ¨mergeæ—¶ç”Ÿæˆä¸€ä¸ªæ–°çš„commitï¼Œè¿™æ ·ï¼Œä»Žåˆ†æ”¯åŽ†å²ä¸Šå°±å¯ä»¥çœ‹å‡ºåˆ†æ”¯ä¿¡æ¯ã€‚1git merge --no-ff -m &quot;merge with no-ff&quot; dev --no-ffå‚æ•°ï¼Œè¡¨ç¤ºç¦ç”¨Fast forwardã€‚ å› ä¸ºæœ¬æ¬¡åˆå¹¶è¦åˆ›å»ºä¸€ä¸ªæ–°çš„commitï¼Œæ‰€ä»¥åŠ ä¸Š-må‚æ•°ï¼ŒæŠŠcommitæè¿°å†™è¿›åŽ»ã€‚ åˆå¹¶åŽï¼Œæˆ‘ä»¬ç”¨git logæŸ¥çœ‹åˆ†æ”¯åŽ†å²ã€‚ åœ¨å®žé™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬åº”è¯¥æŒ‰ç…§å‡ ä¸ªåŸºæœ¬åŽŸåˆ™è¿›è¡Œåˆ†æ”¯ç®¡ç†ï¼š é¦–å…ˆï¼Œmasteråˆ†æ”¯åº”è¯¥æ˜¯éžå¸¸ç¨³å®šçš„ï¼Œä¹Ÿå°±æ˜¯ä»…ç”¨æ¥å‘å¸ƒæ–°ç‰ˆæœ¬ï¼Œå¹³æ—¶ä¸èƒ½åœ¨ä¸Šé¢å¹²æ´»ï¼› é‚£åœ¨å“ªå¹²æ´»å‘¢ï¼Ÿå¹²æ´»éƒ½åœ¨devåˆ†æ”¯ä¸Šï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œdevåˆ†æ”¯æ˜¯ä¸ç¨³å®šçš„ï¼Œåˆ°æŸä¸ªæ—¶å€™ï¼Œæ¯”å¦‚1.0ç‰ˆæœ¬å‘å¸ƒæ—¶ï¼Œå†æŠŠdevåˆ†æ”¯åˆå¹¶åˆ°masterä¸Šï¼Œåœ¨masteråˆ†æ”¯å‘å¸ƒ1.0ç‰ˆæœ¬ï¼› ä½ å’Œä½ çš„å°ä¼™ä¼´ä»¬æ¯ä¸ªäººéƒ½åœ¨devåˆ†æ”¯ä¸Šå¹²æ´»ï¼Œæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„åˆ†æ”¯ï¼Œæ—¶ä¸æ—¶åœ°å¾€devåˆ†æ”¯ä¸Šåˆå¹¶å°±å¯ä»¥äº†ã€‚ æ‰€ä»¥ï¼Œå›¢é˜Ÿåˆä½œçš„åˆ†æ”¯çœ‹èµ·æ¥å°±åƒè¿™æ ·ï¼š bugåˆ†æ”¯å¦‚æžœå½“å‰ä½ æ­£åœ¨è¿›è¡Œå¼€å‘å·¥ä½œï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦fixä¸€ä¸ªbugï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨git stashå‘½ä»¤å…ˆæŠŠå½“å‰çš„å·¥ä½œçŽ°åœºä¿å­˜ã€‚ ç„¶åŽåˆ‡æ¢åˆ°éœ€è¦ä¿®å¤bugçš„åˆ†æ”¯ï¼Œåˆ›å»ºä¸´æ—¶åˆ†æ”¯ã€‚ ä¿®å¤å®Œæ¯•åŽï¼Œå°†ä¸´æ—¶åˆ†æ”¯åˆå¹¶åˆ°éœ€è¦ä¿®å¤çš„bugåˆ†æ”¯ï¼Œå®Œæˆbugçš„ä¿®å¤ã€‚ ç”¨git stash listå‘½ä»¤æŸ¥çœ‹ä¿å­˜çš„å·¥ä½œçŽ°åœºã€‚ å·¥ä½œçŽ°åœºè¿˜åœ¨ï¼ŒGitæŠŠstashå†…å®¹å­˜åœ¨æŸä¸ªåœ°æ–¹äº†ï¼Œä½†æ˜¯éœ€è¦æ¢å¤ä¸€ä¸‹ï¼Œæœ‰ä¸¤ä¸ªåŠžæ³•ï¼š ä¸€æ˜¯ç”¨git stash applyæ¢å¤ï¼Œä½†æ˜¯æ¢å¤åŽï¼Œstashå†…å®¹å¹¶ä¸åˆ é™¤ï¼Œä½ éœ€è¦ç”¨git stash dropæ¥åˆ é™¤ï¼› å¦ä¸€ç§æ–¹å¼æ˜¯ç”¨git stash popï¼Œæ¢å¤çš„åŒæ—¶æŠŠstashå†…å®¹ä¹Ÿåˆ äº†ã€‚ å¤šäººåä½œè¦æŸ¥çœ‹è¿œç¨‹åº“çš„ä¿¡æ¯ï¼Œç”¨git remoteæˆ–è€…ï¼Œç”¨git remote -væ˜¾ç¤ºæ›´è¯¦ç»†çš„ä¿¡æ¯ æŽ¨é€åˆ†æ”¯æŽ¨é€ä¸»åˆ†æ”¯1$ git push origin master æŽ¨é€å…¶ä»–åˆ†æ”¯ï¼Œæ¯”å¦‚devï¼Œå°±æ”¹æˆï¼š1$ git push origin dev æŠ“å–åˆ†æ”¯ä½¿ç”¨git cloneå°†è¿œç¨‹ä»“åº“å…‹éš†åˆ°æœ¬åœ°ï¼Œä½¿ç”¨git branchæŸ¥çœ‹åˆ†æ”¯ï¼Œä¼šå‘çŽ°åªæœ‰masteråˆ†æ”¯12$ git branch* master å¦‚æžœè¦åœ¨devåˆ†æ”¯ä¸Šå¼€å‘ï¼Œå°±å¿…é¡»åˆ›å»ºè¿œç¨‹originçš„devåˆ†æ”¯åˆ°æœ¬åœ°ï¼Œç”¨è¿™ä¸ªå‘½ä»¤åˆ›å»ºæœ¬åœ°devåˆ†æ”¯ï¼š1$ git checkout -b dev origin/dev å¦‚æžœä½ çš„å°ä¼™ä¼´å·²ç»å‘origin/devåˆ†æ”¯æŽ¨é€äº†ä»–çš„æäº¤ï¼Œè€Œç¢°å·§ä½ ä¹Ÿå¯¹åŒæ ·çš„æ–‡ä»¶ä½œäº†ä¿®æ”¹ï¼ŒæŽ¨é€çš„æ—¶å€™ä¹Ÿè®¸ä¼šå‘ç”Ÿå†²çªã€‚ å…ˆç”¨git pullæŠŠæœ€æ–°çš„æäº¤ä»Žorigin/devæŠ“ä¸‹æ¥ï¼Œç„¶åŽï¼Œåœ¨æœ¬åœ°åˆå¹¶ï¼Œè§£å†³å†²çªï¼Œå†æŽ¨é€ã€‚ å¦‚æžœgit pullä¹Ÿå¤±è´¥äº†ï¼ŒåŽŸå› æ˜¯æ²¡æœ‰æŒ‡å®šæœ¬åœ°devåˆ†æ”¯ä¸Žè¿œç¨‹origin/devåˆ†æ”¯çš„é“¾æŽ¥ï¼Œæ ¹æ®æç¤ºï¼Œè®¾ç½®devå’Œorigin/devçš„é“¾æŽ¥ï¼š12$ git branch --set-upstream-to=origin/dev devBranch &apos;dev&apos; set up to track remote branch &apos;dev&apos; from &apos;origin&apos;. å¤šäººåä½œçš„å·¥ä½œæ¨¡å¼é€šå¸¸æ˜¯è¿™æ ·ï¼š é¦–å…ˆï¼Œå¯ä»¥è¯•å›¾ç”¨git push origin &lt;branch-name&gt;æŽ¨é€è‡ªå·±çš„ä¿®æ”¹ï¼› å¦‚æžœæŽ¨é€å¤±è´¥ï¼Œåˆ™å› ä¸ºè¿œç¨‹åˆ†æ”¯æ¯”ä½ çš„æœ¬åœ°æ›´æ–°ï¼Œéœ€è¦å…ˆç”¨git pullè¯•å›¾åˆå¹¶ï¼› å¦‚æžœåˆå¹¶æœ‰å†²çªï¼Œåˆ™è§£å†³å†²çªï¼Œå¹¶åœ¨æœ¬åœ°æäº¤ï¼› æ²¡æœ‰å†²çªæˆ–è€…è§£å†³æŽ‰å†²çªåŽï¼Œå†ç”¨git push origin &lt;branch-name&gt;æŽ¨é€å°±èƒ½æˆåŠŸï¼ å¦‚æžœgit pullæç¤ºno tracking informationï¼Œåˆ™è¯´æ˜Žæœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯çš„é“¾æŽ¥å…³ç³»æ²¡æœ‰åˆ›å»ºï¼Œç”¨å‘½ä»¤git branch --set-upstream-to &lt;branch-name&gt; origin/&lt;branch-name&gt;ã€‚ è¿™å°±æ˜¯å¤šäººåä½œçš„å·¥ä½œæ¨¡å¼ï¼Œä¸€æ—¦ç†Ÿæ‚‰äº†ï¼Œå°±éžå¸¸ç®€å•ã€‚ rebaserebaseæ“ä½œå¯ä»¥æŠŠæœ¬åœ°æœªpushçš„åˆ†å‰æäº¤åŽ†å²æ•´ç†æˆç›´çº¿ï¼› rebaseçš„ç›®çš„æ˜¯ä½¿å¾—æˆ‘ä»¬åœ¨æŸ¥çœ‹åŽ†å²æäº¤çš„å˜åŒ–æ—¶æ›´å®¹æ˜“ï¼Œå› ä¸ºåˆ†å‰çš„æäº¤éœ€è¦ä¸‰æ–¹å¯¹æ¯”ã€‚]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[GitåŸºç¡€]]></title>
    <url>%2F2019%2F01%2F21%2FGit%E5%9F%BA%E7%A1%80%2F</url>
    <content type="text"><![CDATA[Gitæ˜¯ä»€ä¹ˆï¼ŸGitæ˜¯ç›®å‰ä¸–ç•Œä¸Šæœ€å…ˆè¿›çš„åˆ†å¸ƒå¼ç‰ˆæœ¬æŽ§åˆ¶ç³»ç»Ÿï¼ˆæ²¡æœ‰ä¹‹ä¸€ï¼‰ã€‚ åœ¨Macä¸Šå®‰è£…Gitåœ¨Macä¸Šå®‰è£…Gitæœ‰ä¸¤ç§æ–¹æ³•ï¼š ç¬¬ä¸€ç§ï¼šå…ˆå®‰è£…Homebrewï¼Œç„¶åŽé€šè¿‡homebrewæ¥å®‰è£…Gitï¼Œè¯¦æƒ…å¯ä»¥å‚è€ƒhomebrewçš„æ–‡æ¡£ã€‚ ç¬¬äºŒç§ï¼šç›´æŽ¥å®‰è£…Xcodeï¼ŒXcodeé›†æˆäº†Gitï¼Œä¸è¿‡é»˜è®¤æ²¡æœ‰å®‰è£…ï¼Œä½ éœ€è¦è¿è¡ŒXcodeï¼Œé€‰æ‹©èœå•â€œXcodeâ€-&gt;â€œPreferencesâ€ï¼Œåœ¨å¼¹å‡ºçª—å£ä¸­æ‰¾åˆ°â€œDownloadsâ€ï¼Œé€‰æ‹©â€œCommand Line Toolsâ€ï¼Œç‚¹â€œInstallâ€å°±å¯ä»¥å®Œæˆå®‰è£…äº†ã€‚ åˆ›å»ºç‰ˆæœ¬åº“ä»€ä¹ˆæ˜¯ç‰ˆæœ¬åº“å‘¢ï¼Ÿç‰ˆæœ¬åº“åˆåä»“åº“ï¼Œè‹±æ–‡årepositoryï¼Œä½ å¯ä»¥ç®€å•ç†è§£æˆä¸€ä¸ªç›®å½•ï¼Œè¿™ä¸ªç›®å½•é‡Œé¢çš„æ‰€æœ‰æ–‡ä»¶éƒ½å¯ä»¥è¢«Gitç®¡ç†èµ·æ¥ï¼Œæ¯ä¸ªæ–‡ä»¶çš„ä¿®æ”¹ã€åˆ é™¤ï¼ŒGitéƒ½èƒ½è·Ÿè¸ªï¼Œä»¥ä¾¿ä»»ä½•æ—¶åˆ»éƒ½å¯ä»¥è¿½è¸ªåŽ†å²ï¼Œæˆ–è€…åœ¨å°†æ¥æŸä¸ªæ—¶åˆ»å¯ä»¥â€œè¿˜åŽŸâ€ã€‚ æ‰€ä»¥ï¼Œåˆ›å»ºä¸€ä¸ªç‰ˆæœ¬åº“éžå¸¸ç®€å•ï¼Œé¦–å…ˆï¼Œé€‰æ‹©ä¸€ä¸ªåˆé€‚çš„åœ°æ–¹ï¼Œåˆ›å»ºä¸€ä¸ªç©ºç›®å½•ï¼š1234$ mkdir MyGitPost$ cd MyGitPost$ pwd/Users/username/Documents/MyGitPost ç¬¬äºŒæ­¥ï¼Œé€šè¿‡git initå‘½ä»¤bæŠŠè¿™ä¸ªmç›®å½•å˜æˆGitå¯ç®¡ç†çš„ä»“åº“ã€‚12$ git initInitialized empty Git repository in /Users/username/Documents/MyGitPost/.git/ æŠŠæ–‡ä»¶æ·»åŠ åˆ°ç‰ˆæœ¬åº“é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç”¨äºŽæµ‹è¯•çš„æ–‡ä»¶1$ touch readme.txt ç„¶åŽï¼Œæ‰“å¼€reademe.txtæ–‡ä»¶è¿›è¡Œç¼–è¾‘1$ vi readme.txt å†…å®¹å¦‚ä¸‹ï¼š1è¿™æ˜¯ä¸€ä¸ªç”¨äºŽæµ‹è¯•Gitçš„æ–‡æ¡£ã€‚ ç„¶åŽé€šè¿‡ä¸¤æ­¥æ¥å°†æ–‡ä»¶æäº¤åˆ°Gitä»“åº“ï¼šç¬¬ä¸€æ­¥ï¼šç”¨å‘½ä»¤git addå‘Šè¯‰Gitï¼ŒæŠŠæ–‡ä»¶æ·»åŠ åˆ°ä»“åº“1$ git add readme.txt æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤ï¼Œæ²¡æœ‰ä»»ä½•æ˜¾ç¤ºï¼Œè¿™å°±å¯¹äº†ï¼ŒUnixçš„å“²å­¦æ˜¯â€œæ²¡æœ‰æ¶ˆæ¯å°±æ˜¯å¥½æ¶ˆæ¯â€ï¼Œè¯´æ˜Žæ·»åŠ æˆåŠŸã€‚ ç¬¬äºŒæ­¥ï¼Œç”¨å‘½ä»¤git commitå‘Šè¯‰Gitï¼ŒæŠŠæ–‡ä»¶æäº¤åˆ°ä»“åº“ï¼š1234$ git commit -m &quot;wrote a readme file&quot;[master (root-commit) 2f26a28] wrote a readme file 1 file changed, 2 insertions(+) create mode 100644 readme.txt -måŽé¢è¾“å…¥çš„æ˜¯æœ¬æ¬¡æäº¤çš„è¯´æ˜Žï¼Œå¯ä»¥è¾“å…¥ä»»æ„å†…å®¹ï¼Œå½“ç„¶æœ€å¥½æ˜¯æœ‰æ„ä¹‰çš„ï¼Œè¿™æ ·ä½ å°±èƒ½ä»ŽåŽ†å²è®°å½•é‡Œæ–¹ä¾¿åœ°æ‰¾åˆ°æ”¹åŠ¨è®°å½•ã€‚ git commitå‘½ä»¤æ‰§è¡ŒæˆåŠŸåŽä¼šå‘Šè¯‰ä½ ï¼Œ1 file changedï¼š1ä¸ªæ–‡ä»¶è¢«æ”¹åŠ¨ï¼ˆæˆ‘ä»¬æ–°æ·»åŠ çš„readme.txtæ–‡ä»¶ï¼‰ï¼›2 insertionsï¼šæ’å…¥äº†ä¸¤è¡Œå†…å®¹ï¼ˆreadme.txtæœ‰ä¸¤è¡Œå†…å®¹ï¼‰ã€‚ ç‰ˆæœ¬ç®¡ç†çŽ°åœ¨ï¼Œæˆ‘ä»¬ä¿®æ”¹readme.txtçš„å†…å®¹ï¼š1è¿™æ˜¯ä¿®æ”¹çš„å†…å®¹ è¿è¡Œgit statusæ¥çœ‹çœ‹ä¿®æ”¹åŽçš„ç»“æžœï¼š123456789$ git statusOn branch masterChanges not staged for commit: (use &quot;git add &lt;file&gt;...&quot; to update what will be committed) (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory) modified: readme.txtno changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;) git statuså‘½ä»¤å¯ä»¥è®©æˆ‘ä»¬æ—¶åˆ»æŽŒæ¡ä»“åº“å½“å‰çš„çŠ¶æ€ï¼Œä¸Šé¢çš„å‘½ä»¤è¾“å‡ºå‘Šè¯‰æˆ‘ä»¬ï¼Œreadme.txtè¢«ä¿®æ”¹è¿‡äº†ï¼Œä½†è¿˜æ²¡æœ‰å‡†å¤‡æäº¤çš„ä¿®æ”¹ã€‚ ä½¿ç”¨git diffæ¥æŸ¥çœ‹12345678diff --git a/readme.txt b/readme.txtindex 46d49bf..75de425 100644--- a/readme.txt+++ b/readme.txt@@ -1,2 +1,2 @@è¿™æ˜¯ä¸€ä¸ªç”¨äºŽæµ‹è¯•Gitçš„æ–‡æ¡£ã€‚+è¿™æ˜¯ä¿®æ”¹çš„å†…å®¹(END) ç„¶åŽå°±æ˜¯é€šè¿‡git addå’Œgit commitçš„å‘½ä»¤æäº¤ä¿®æ”¹å†…å®¹ï¼Œåœ¨æ‰§è¡Œgit commitä¹‹å‰å¯ä»¥ä½¿ç”¨git statuså†æ¬¡æŸ¥çœ‹då½“å‰ä»“åº“çš„çŠ¶æ€ã€‚ ç‰ˆæœ¬å›žé€€åœ¨æˆ‘ä»¬å¤šæ¬¡ä¿®æ”¹æ–‡ä»¶ï¼Œæ¯æ¬¡commitéƒ½ä¼šç”Ÿæˆä¸€ä¸ªå¿«ç…§ï¼Œå¦‚æžœä½ å¯¹æ–‡ä»¶è¿›è¡Œäº†ä¸æ­£å½“çš„æ“ä½œï¼Œæˆ–è€…è¯¯åˆ äº†å†…å®¹ï¼Œå¯ä»¥ä»Žæœ€è¿‘çš„å¿«ç…§ä¸­æ¢å¤ã€‚ ä½¿ç”¨git logæ¥æŸ¥çœ‹æ¯æ¬¡commitçš„å¿«ç…§ã€‚123456789101112$ git logcommit 707183727c57ee8fb68199521a9b014e088af091 (HEAD -&gt; master)Author: Sheldon &lt;ty24089@163.com&gt;Date: Sat Jan 19 12:38:28 2019 +0800 ä¿®æ”¹readmeæ–‡ä»¶å†…å®¹commit 2f26a2852751767536b17a2f748c2081847c3578Author: Sheldon &lt;ty24089@163.com&gt;Date: Sat Jan 19 12:04:45 2019 +0800 wrote a readme file å¦‚æžœå«Œè¾“å‡ºä¿¡æ¯å¤ªå¤šï¼Œçœ‹å¾—çœ¼èŠ±ç¼­ä¹±çš„ï¼Œå¯ä»¥è¯•è¯•åŠ ä¸Š--pretty=onelineå‚æ•°ï¼š123$ git log --pretty=oneline707183727c57ee8fb68199521a9b014e088af091 (HEAD -&gt; master) ä¿®æ”¹readmeæ–‡ä»¶å†…å®¹2f26a2852751767536b17a2f748c2081847c3578 wrote a readme file ä½¿ç”¨git resetæ¥å›žé€€åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬ã€‚12$ git reset --hard HEAD^HEAD is now at 2f26a28 wrote a readme file å¦‚æžœæƒ³æ¢å¤çš„æ–°çš„å†…å®¹ï¼Œä½¿ç”¨git reflogæŸ¥çœ‹æ¯ä¸€æ¬¡å‘½ä»¤çš„è®°å½•ï¼Œç„¶åŽåœ¨é€šè¿‡git reset --hard commit_idå‘½ä»¤æ¥æ¢å¤æƒ³è¦çš„å¿«ç…§ã€‚ å·¥ä½œåŒºå’Œæš‚å­˜åŒºå·¥ä½œåŒºå°±æ˜¯å¯ä»¥çœ‹çš„åˆ°çš„ç›®å½•ï¼Œæ¯”å¦‚åœ¨ä¸Šè¾¹åˆ›å»ºçš„MyGitPostæ–‡ä»¶å¤¹å°±æ˜¯å·¥ä½œåŒºã€‚ å·¥ä½œåŒºæœ‰ä¸€ä¸ªéšè—ç›®å½•.gitï¼Œè¿™ä¸ªä¸ç®—å·¥ä½œåŒºï¼Œè€Œæ˜¯Gitçš„ç‰ˆæœ¬åº“ã€‚ Gitçš„ç‰ˆæœ¬åº“é‡Œå­˜äº†å¾ˆå¤šä¸œè¥¿ï¼Œå…¶ä¸­æœ€é‡è¦çš„å°±æ˜¯ç§°ä¸ºstageï¼ˆæˆ–è€…å«indexï¼‰çš„æš‚å­˜åŒºï¼Œè¿˜æœ‰Gitä¸ºæˆ‘ä»¬è‡ªåŠ¨åˆ›å»ºçš„ç¬¬ä¸€ä¸ªåˆ†æ”¯masterï¼Œä»¥åŠæŒ‡å‘masterçš„ä¸€ä¸ªæŒ‡é’ˆå«HEADã€‚ æ’¤é”€ä¿®æ”¹å¦‚æžœåœ¨ä¿®æ”¹äº†æ–‡ä»¶ï¼Œä½†è¿˜æ²¡æœ‰git addï¼Œè¿™ä¸ªæ—¶å€™ï¼Œä½ ä¸æƒ³è¦è¿™ä¸ªæ–‡ä»¶çš„ä¿®æ”¹äº†ï¼Œæƒ³æ¢å¤æœªä¿®æ”¹å‰çš„å†…å®¹ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨git checkout -- fileå‘½ä»¤ä¸¢å¼ƒå·¥ä½œåŒºçš„ä¿®æ”¹ã€‚è¿™é‡Œæœ‰ä¸¤ç§æƒ…å†µï¼š ä¸€ç§æ˜¯æ–‡ä»¶è‡ªä¿®æ”¹åŽè¿˜æ²¡æœ‰è¢«æ”¾åˆ°æš‚å­˜åŒºï¼ŒçŽ°åœ¨ï¼Œæ’¤é”€ä¿®æ”¹å°±å›žåˆ°å’Œç‰ˆæœ¬åº“ä¸€æ¨¡ä¸€æ ·çš„çŠ¶æ€ï¼› ä¸€ç§æ˜¯æ–‡ä»¶å·²ç»æ·»åŠ åˆ°æš‚å­˜åŒºåŽï¼Œåˆä½œäº†ä¿®æ”¹ï¼ŒçŽ°åœ¨ï¼Œæ’¤é”€ä¿®æ”¹å°±å›žåˆ°æ·»åŠ åˆ°æš‚å­˜åŒºåŽçš„çŠ¶æ€ã€‚ æ€»ä¹‹ï¼Œå°±æ˜¯è®©è¿™ä¸ªæ–‡ä»¶å›žåˆ°æœ€è¿‘ä¸€æ¬¡git commitæˆ–git addæ—¶çš„çŠ¶æ€ã€‚ å¦‚æžœåœ¨ä¿®æ”¹äº†æ–‡ä»¶ï¼Œå¹¶ä¸”æäº¤åˆ°äº†æš‚å­˜åŒºï¼Œé‚£ä¹ˆå¯ä»¥ç”¨å‘½ä»¤git reset HEAD &lt;file&gt;å¯ä»¥æŠŠæš‚å­˜åŒºçš„ä¿®æ”¹æ’¤é”€æŽ‰ï¼ˆunstageï¼‰ï¼Œé‡æ–°æ”¾å›žå·¥ä½œåŒºã€‚ git resetå‘½ä»¤æ—¢å¯ä»¥å›žé€€ç‰ˆæœ¬ï¼Œä¹Ÿå¯ä»¥æŠŠæš‚å­˜åŒºçš„ä¿®æ”¹å›žé€€åˆ°å·¥ä½œåŒºã€‚å½“æˆ‘ä»¬ç”¨HEADæ—¶ï¼Œè¡¨ç¤ºæœ€æ–°çš„ç‰ˆæœ¬ã€‚ å†ç”¨git statusæŸ¥çœ‹ä¸€ä¸‹ï¼ŒçŽ°åœ¨æš‚å­˜åŒºæ˜¯å¹²å‡€çš„ï¼Œå·¥ä½œåŒºæœ‰ä¿®æ”¹ã€‚ ä½¿ç”¨git checkout -- fileå°±å¯ä»¥æ¢å¤å·¥ä½œåŒºçš„ä¿®æ”¹ã€‚ åˆ é™¤æ–‡ä»¶å‘½ä»¤git rmç”¨äºŽåˆ é™¤ä¸€ä¸ªæ–‡ä»¶ã€‚]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[hexo+nextè¯¦ç»†é…ç½®]]></title>
    <url>%2F2019%2F01%2F21%2Fhexo-next%E8%AF%A6%E7%BB%86%E9%85%8D%E7%BD%AE%2F</url>
    <content type="text"><![CDATA[hexoå®‰è£…å¥½åŽï¼Œé»˜è®¤çš„ä¸»é¢˜æ˜¯landscapeï¼Œå¦‚æžœä¸å–œæ¬¢ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è¿›è¡Œæ›´æ¢ã€‚æœ¬æ–‡ä¸»è¦é…ç½®Next(GitHubï¼Œå®˜æ–¹æ–‡æ¡£)ä¸»é¢˜ã€‚ Nextå®‰è£…ä¸Žå¯ç”¨ä¸»é¢˜å®‰è£…Nextåˆ‡æ¢åˆ°Blogä¸»ç›®å½•æ–‡ä»¶å¤¹ä¸‹ é€šè¿‡gitå®‰è£… 12$ cd your-hexo-site$ git clone https://github.com/iissnan/hexo-theme-next themes/next å¯ç”¨ä¸»é¢˜ä¸Žæ‰€æœ‰ Hexo ä¸»é¢˜å¯ç”¨çš„æ¨¡å¼ä¸€æ ·ã€‚ å½“ å…‹éš†/ä¸‹è½½ å®ŒæˆåŽï¼Œæ‰“å¼€ _config.yml(ç«™ç‚¹é…ç½®æ–‡ä»¶)ï¼Œ æ‰¾åˆ° theme å­—æ®µï¼Œå¹¶å°†å…¶å€¼æ›´æ”¹ä¸º nextã€‚ éªŒè¯ä¸»é¢˜é¦–å…ˆå¯åŠ¨ Hexo æœ¬åœ°ç«™ç‚¹ï¼Œå¹¶å¼€å¯è°ƒè¯•æ¨¡å¼ï¼ˆå³åŠ ä¸Š â€“debugï¼‰ï¼Œæ•´ä¸ªå‘½ä»¤æ˜¯ hexo s --debugã€‚ åœ¨æœåŠ¡å¯åŠ¨çš„è¿‡ç¨‹ï¼Œæ³¨æ„è§‚å¯Ÿå‘½ä»¤è¡Œè¾“å‡ºæ˜¯å¦æœ‰ä»»ä½•å¼‚å¸¸ä¿¡æ¯ï¼Œå¦‚æžœä½ ç¢°åˆ°é—®é¢˜ï¼Œè¿™äº›ä¿¡æ¯å°†å¸®åŠ©ä»–äººæ›´å¥½çš„å®šä½é”™è¯¯ã€‚ å½“å‘½ä»¤è¡Œè¾“å‡ºä¸­æç¤ºå‡ºï¼š1INFO Hexo is running at http://0.0.0.0:4000/. Press Ctrl+C to stop. æ­¤æ—¶å³å¯ä½¿ç”¨æµè§ˆå™¨è®¿é—® http://localhost:4000ï¼Œæ£€æŸ¥ç«™ç‚¹æ˜¯å¦æ­£ç¡®è¿è¡Œã€‚ è®¾ç½®ä¸»é¢˜ç›®å‰ NexT æ”¯æŒå››ç§ Schemeï¼Œä»–ä»¬æ˜¯ï¼š12345# Schemes# scheme: Muse# scheme: Mist# scheme: Pisces# scheme: Gemini Muse - é»˜è®¤ Schemeï¼Œè¿™æ˜¯ NexT æœ€åˆçš„ç‰ˆæœ¬ï¼Œé»‘ç™½ä¸»è°ƒï¼Œå¤§é‡ç•™ç™½ Mist - Muse çš„ç´§å‡‘ç‰ˆæœ¬ï¼Œæ•´æ´æœ‰åºçš„å•æ å¤–è§‚ Pisces - åŒæ  Schemeï¼Œå°å®¶ç¢§çŽ‰ä¼¼çš„æ¸…æ–° Gemini - åŒæ  Schemeï¼Œæ¯”Piscesç•¥å¤§ Scheme çš„åˆ‡æ¢é€šè¿‡æ›´æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œæœç´¢ scheme å…³é”®å­—ã€‚ ä½ ä¼šçœ‹åˆ°æœ‰ä¸‰è¡Œ scheme çš„é…ç½®ï¼Œå°†ä½ éœ€ç”¨å¯ç”¨çš„ scheme å‰é¢æ³¨é‡Š # åŽ»é™¤å³å¯ã€‚ è®¾ç½®èœå•123456789menu: home: / || home about: /about/ || user tags: /tags/ || tags categories: /categories/ || th archives: /archives/ || archive # schedule: /schedule/ || calendar # sitemap: /sitemap.xml || sitemap # commonweal: /404/ || heartbeat é”®å€¼ è®¾å®šå€¼ æ˜¾ç¤ºæ–‡æœ¬ home home: / ä¸»é¡µ archives archives: /archives å½’æ¡£é¡µ categories categories: /categories åˆ†ç±»é¡µï¼ˆéœ€è¦æ‰‹åŠ¨åˆ›å»ºé¡µé¢ï¼‰ tags tags: /tags æ ‡ç­¾é¡µï¼ˆéœ€è¦æ‰‹åŠ¨åˆ›å»ºé¡µé¢ï¼‰ about about: /about å…³äºŽé¡µé¢ï¼ˆéœ€è¦æ‰‹åŠ¨åˆ›å»ºé¡µé¢ï¼‰ commonweal commonweal: /404.html å…¬ç›Š 404ï¼ˆéœ€è¦æ‰‹åŠ¨åˆ›å»ºé¡µé¢ï¼‰ è®¾ç½®ä¾§æ ä¿®æ”¹ `ä¸»é¢˜é…ç½®æ–‡ä»¶ ä¸­çš„ sidebar å­—æ®µæ¥æŽ§åˆ¶ä¾§æ çš„è¡Œä¸ºã€‚ä¾§æ çš„è®¾ç½®åŒ…æ‹¬ä¸¤ä¸ªéƒ¨åˆ†ï¼Œå…¶ä¸€æ˜¯ä¾§æ çš„ä½ç½®ï¼Œ å…¶äºŒæ˜¯ä¾§æ æ˜¾ç¤ºçš„æ—¶æœºã€‚ è®¾ç½®ä¾§æ çš„ä½ç½®ï¼Œä¿®æ”¹ sidebar.position çš„å€¼ï¼Œæ”¯æŒçš„é€‰é¡¹æœ‰ï¼š left - é å·¦æ”¾ç½® right - é å³æ”¾ç½®12sidebar: position: left è®¾ç½®ä¾§æ æ˜¾ç¤ºçš„æ—¶æœºï¼Œä¿®æ”¹ sidebar.display çš„å€¼ï¼Œæ”¯æŒçš„é€‰é¡¹æœ‰ï¼š post - é»˜è®¤è¡Œä¸ºï¼Œåœ¨æ–‡ç« é¡µé¢ï¼ˆæ‹¥æœ‰ç›®å½•åˆ—è¡¨ï¼‰æ—¶æ˜¾ç¤º always - åœ¨æ‰€æœ‰é¡µé¢ä¸­éƒ½æ˜¾ç¤º hide - åœ¨æ‰€æœ‰é¡µé¢ä¸­éƒ½éšè—ï¼ˆå¯ä»¥æ‰‹åŠ¨å±•å¼€ï¼‰ remove - å®Œå…¨ç§»é™¤12sidebar: display: post è®¾ç½®åŠ¨æ€èƒŒæ™¯ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­æ‰¾åˆ°canvas_nestï¼Œè®¾ç½®æˆtureå°±OKå•¦ã€‚12# Canvas-nestcanvas_nest: ture åœ¨å³ä¸Šè§’æˆ–è€…å·¦ä¸Šè§’å®žçŽ°fork me on githubåœ¨GitHub Ribbonsæˆ–GitHub Cornersé€‰æ‹©ä¸€æ¬¾ä½ å–œæ¬¢çš„æŒ‚é¥°ï¼Œæ‹·è´æ–¹æ¡†å†…çš„ä»£ç  å°†åˆšåˆšå¤åˆ¶çš„æŒ‚é¥°ä»£ç ï¼Œæ·»åŠ åˆ°Blog/themes/next/layout/_layout.swigæ–‡ä»¶ä¸­ï¼Œæ·»åŠ åˆ°&lt;div class=&quot;headband&quot;&gt;&lt;/div&gt;çš„ä¸‹æ–¹ã€‚ è®¾ç½®RSSNexT ä¸­ RSS æœ‰ä¸‰ä¸ªè®¾ç½®é€‰é¡¹ï¼Œæ»¡è¶³ç‰¹å®šçš„ä½¿ç”¨åœºæ™¯ã€‚ æ›´æ”¹ ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œè®¾å®š rss å­—æ®µçš„å€¼ï¼š falseï¼šç¦ç”¨ RSSï¼Œä¸åœ¨é¡µé¢ä¸Šæ˜¾ç¤º RSS è¿žæŽ¥ã€‚ ç•™ç©ºï¼šä½¿ç”¨ Hexo ç”Ÿæˆçš„ Feed é“¾æŽ¥ã€‚ ä½ å¯ä»¥éœ€è¦å…ˆå®‰è£… hexo-generator-feed æ’ä»¶ã€‚ å…·ä½“çš„é“¾æŽ¥åœ°å€ï¼šé€‚ç”¨äºŽå·²ç»çƒ§åˆ¶è¿‡ Feed çš„æƒ…å½¢ã€‚ ä¿®æ”¹æ–‡ç« å†…é“¾æŽ¥æ–‡æœ¬æ ·å¼ä¿®æ”¹Blog/themes/next/source/css/_common/components/post/post.stylï¼Œåœ¨æœ«å°¾æ·»åŠ CSSæ ·å¼ï¼š 1234567891011// æ–‡ç« å†…é“¾æŽ¥æ–‡æœ¬æ ·å¼.post-body p a&#123; color: #0593d3; //åŽŸå§‹é“¾æŽ¥é¢œè‰² border-bottom: none; border-bottom: 1px solid #0593d3; //åº•éƒ¨åˆ†å‰²çº¿é¢œè‰² &amp;:hover &#123; color: #fc6423; //é¼ æ ‡ç»è¿‡é¢œè‰² border-bottom: none; border-bottom: 1px solid #fc6423; //åº•éƒ¨åˆ†å‰²çº¿é¢œè‰² &#125;&#125; ä¿®æ”¹åº•éƒ¨æ ‡ç­¾æ ·å¼ä¿®æ”¹Blog\themes\next\layout\_macro\post.swigä¸­æ–‡ä»¶ï¼Œcommand+fæœç´¢rel=&quot;tag&quot;&gt;#ï¼Œå°†#æ›¿æ¢æˆ&lt;i class=&quot;fa fa-tag&quot;&gt;&lt;/i&gt;ã€‚ åœ¨æ–‡ç« æœ«å°¾æ·»åŠ â€œæ–‡ç« ç»“æŸâ€æ ‡è®° åœ¨è·¯å¾„Blog\themes\next\layout\_macroæ–‡ä»¶å¤¹ä¸­æ–°å»ºpassage-end-tag.swigæ–‡ä»¶ã€‚ åœ¨passage-end-tag.swigæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼Œç›´æŽ¥ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ï¼Œç²˜è´´ä»¥ä¸‹å†…å®¹åŽä¿å­˜ 12345&lt;div&gt; &#123;% if not is_index %&#125; &lt;div style=&quot;text-align:center;color: #ccc;font-size:14px;&quot;&gt;-------------æ„Ÿè°¢æ‚¨çš„é˜…è¯»&lt;i class=&quot;fa fa-paw&quot;&gt;&lt;/i&gt;-------------&lt;/div&gt; &#123;% endif %&#125;&lt;/div&gt; æ‰“å¼€Blog\themes\next\layout\_macro\post.swigï¼Œåœ¨post-bodyä¹‹åŽï¼Œpost-footerä¹‹å‰ï¼ˆpost-footerä¹‹å‰ä¸¤ä¸ªDIVï¼‰ï¼Œæ·»åŠ ä»¥ä¸‹ä»£ç ï¼š 12345&lt;div&gt; &#123;% if not is_index %&#125; &#123;% include &apos;passage-end-tag.swig&apos; %&#125; &#123;% endif %&#125;&lt;/div&gt; å…·ä½“æ·»åŠ ä½ç½®ï¼š12345678910111213141516171819&lt;div&gt;&#123;% if not is_index %&#125; &#123;% include &apos;passage-end-tag.swig&apos; %&#125;&#123;% endif %&#125;&lt;/div&gt;&#123;% if (theme.alipay or theme.wechatpay or theme.bitcoin) and not is_index %&#125; &lt;div&gt; &#123;% include &apos;reward.swig&apos; %&#125; &lt;/div&gt;&#123;% endif %&#125;&#123;% if theme.post_copyright.enable and not is_index %&#125; &lt;div&gt; &#123;% include &apos;post-copyright.swig&apos; with &#123; post: post &#125; %&#125; &lt;/div&gt;&#123;% endif %&#125;&lt;footer class=&quot;post-footer&quot;&gt; ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶_config.ymlï¼Œåœ¨æœ«å°¾æ·»åŠ ï¼š 123# æ–‡ç« æœ«å°¾æ·»åŠ â€œæœ¬æ–‡ç»“æŸâ€æ ‡è®°passage_end_tag: enabled: true æ˜¾ç¤ºæ•ˆæžœï¼š ä¿®æ”¹ä½œè€…å¤´åƒå¹¶æ—‹è½¬æ‰“å¼€\themes\next\source\css\_common\components\sidebar\sidebar-author.stylï¼Œåœ¨é‡Œé¢æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354.site-author-image &#123; display: block; margin: 0 auto; padding: $site-author-image-padding; max-width: $site-author-image-width; height: $site-author-image-height; border: $site-author-image-border-width solid $site-author-image-border-color; /* å¤´åƒåœ†å½¢ */ border-radius: 80px; -webkit-border-radius: 80px; -moz-border-radius: 80px; box-shadow: inset 0 -1px 0 #333sf; /* è®¾ç½®å¾ªçŽ¯åŠ¨ç”» [animation: (play)åŠ¨ç”»åç§° (2s)åŠ¨ç”»æ’­æ”¾æ—¶é•¿å•ä½ç§’æˆ–å¾®ç§’ (ase-out)åŠ¨ç”»æ’­æ”¾çš„é€Ÿåº¦æ›²çº¿ä¸ºä»¥ä½Žé€Ÿç»“æŸ (1s)ç­‰å¾…1ç§’ç„¶åŽå¼€å§‹åŠ¨ç”» (1)åŠ¨ç”»æ’­æ”¾æ¬¡æ•°(infiniteä¸ºå¾ªçŽ¯æ’­æ”¾) ]*/ /* é¼ æ ‡ç»è¿‡å¤´åƒæ—‹è½¬360åº¦ */ -webkit-transition: -webkit-transform 1.0s ease-out; -moz-transition: -moz-transform 1.0s ease-out; transition: transform 1.0s ease-out;&#125;img:hover &#123; /* é¼ æ ‡ç»è¿‡åœæ­¢å¤´åƒæ—‹è½¬ -webkit-animation-play-state:paused; animation-play-state:paused;*/ /* é¼ æ ‡ç»è¿‡å¤´åƒæ—‹è½¬360åº¦ */ -webkit-transform: rotateZ(360deg); -moz-transform: rotateZ(360deg); transform: rotateZ(360deg);&#125;/* Z è½´æ—‹è½¬åŠ¨ç”» */@-webkit-keyframes play &#123; 0% &#123; -webkit-transform: rotateZ(0deg); &#125; 100% &#123; -webkit-transform: rotateZ(-360deg); &#125;&#125;@-moz-keyframes play &#123; 0% &#123; -moz-transform: rotateZ(0deg); &#125; 100% &#123; -moz-transform: rotateZ(-360deg); &#125;&#125;@keyframes play &#123; 0% &#123; transform: rotateZ(0deg); &#125; 100% &#123; transform: rotateZ(-360deg); &#125;&#125; ä¸»é¡µæ–‡ç« æ·»åŠ é˜´å½±æ•ˆæžœæ•ˆæžœå›¾ï¼š å…·ä½“å®žçŽ°æ–¹æ³•ï¼š æ‰“å¼€\themes\next\source\css\_custom\custom.styl,å‘é‡Œé¢åŠ å…¥ï¼š12345678// ä¸»é¡µæ–‡ç« æ·»åŠ é˜´å½±æ•ˆæžœ .post &#123; margin-top: 60px; margin-bottom: 60px; padding: 25px; -webkit-box-shadow: 0 0 5px rgba(202, 203, 203, .5); -moz-box-shadow: 0 0 5px rgba(202, 203, 204, .5); &#125; è®¾ç½®ç½‘ç«™çš„å›¾æ ‡Faviconåœ¨easyiconæˆ–è€…é˜¿é‡Œå·´å·´çŸ¢é‡å›¾æ ‡åº“æ‰¾ä¸€å¼ ä½ å–œæ¬¢çš„å›¾æ ‡ï¼ˆå¤§ï¼š32x32 å°ï¼š16x16ï¼‰ï¼Œå°†ä¸‹è½½ä¸‹æ¥çš„å°å›¾å’Œä¸­å›¾æ”¾åœ¨Blog/themes/next/source/imagesï¼Œå°†é»˜è®¤çš„ä¸¤å¼ å›¾ç‰‡æ›¿æ¢æŽ‰ã€‚å‘½åå’Œé»˜è®¤çš„ä¸€æ ·ä¹Ÿå¯ä»¥è‡ªå·±å®šä¹‰ï¼š åº•éƒ¨éšè—ç”±Hexoå¼ºåŠ›é©±åŠ¨ã€ä¸»é¢˜â€“NexT.Mistæ‰“å¼€Blog/themes/next/layout/_partials/footer.swigï¼Œæ³¨é‡ŠæŽ‰ç›¸åº”ä»£ç ã€‚12345678910111213141516171819202122232425262728293031//ç”¨ä¸‹é¢çš„ç¬¦å·æ³¨é‡Šï¼Œæ³¨é‡Šä»£ç ç”¨ä¸‹é¢æ‹¬å·æ‹¬èµ·æ¥&lt;!-- --&gt;&lt;!--&lt;span class=&quot;post-meta-divider&quot;&gt;|&lt;/span&gt;&#123;% if theme.footer.powered %&#125; &lt;div class=&quot;powered-by&quot;&gt;&#123;# #&#125;&#123;&#123; __(&apos;footer.powered&apos;, &apos;&lt;a class=&quot;theme-link&quot; target=&quot;_blank&quot; href=&quot;https://hexo.io&quot;&gt;Hexo&lt;/a&gt;&apos;) &#125;&#125;&#123;##&#125;&lt;/div&gt;&#123;% endif %&#125;&#123;% if theme.footer.powered and theme.footer.theme.enable %&#125; &lt;span class=&quot;post-meta-divider&quot;&gt;|&lt;/span&gt;&#123;% endif %&#125;&#123;% if theme.footer.theme.enable %&#125; &lt;div class=&quot;theme-info&quot;&gt;&#123;# #&#125;&#123;&#123; __(&apos;footer.theme&apos;) &#125;&#125; &amp;mdash; &#123;# #&#125;&lt;a class=&quot;theme-link&quot; target=&quot;_blank&quot; href=&quot;https://github.com/iissnan/hexo-theme-next&quot;&gt;&#123;# #&#125;NexT.&#123;&#123; theme.scheme &#125;&#125;&#123;# #&#125;&lt;/a&gt;&#123;% if theme.footer.theme.version %&#125; v&#123;&#123; theme.version &#125;&#125;&#123;% endif %&#125;&#123;##&#125;&lt;/div&gt;&#123;% endif %&#125;&#123;% if theme.footer.custom_text %&#125; &lt;div class=&quot;footer-custom&quot;&gt;&#123;# #&#125;&#123;&#123; theme.footer.custom_text &#125;&#125;&#123;##&#125;&lt;/div&gt;&#123;% endif %&#125;--&gt; æ·»åŠ ä¾§æ æŽ¨èé˜…è¯»ç¼–è¾‘ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œå¦‚ä¸‹é…ç½®å³å¯ï¼š12345678# Blog rollslinks_icon: linklinks_title: æŽ¨èé˜…è¯»#links_layout: blocklinks_layout: inlinelinks: Swift 4: https://developer.apple.com/swift/ Objective-C: https://developer.apple.com/documentation/objectivec Hexoåšå®¢æ·»åŠ ç«™å†…æœç´¢ NexTä¸»é¢˜æ”¯æŒé›†æˆ Swiftypeã€ å¾®æœç´¢ã€Local Search å’Œ Algoliaã€‚ä¸‹é¢ä»‹ç»Local Searchçš„å®‰è£…å§ã€‚ åˆ‡æ¢åˆ°æ ¹ç›®å½• å®‰è£… hexo-generator-search1npm install hexo-generator-search --save å®‰è£… hexo-generator-searchdb1npm install hexo-generator-searchdb --save ç¼–è¾‘ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š12345search: path: search.xml field: post format: html limit: 10000 ç¼–è¾‘ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œè®¾ç½®Local searchenableä¸ºture123456789# Local search# Dependencies: https://github.com/flashlab/hexo-generator-searchlocal_search: enable: ture # if auto, trigger search by changing input # if manual, trigger search by pressing enter key or search button trigger: auto # show top n results per article, show all results by setting to -1 top_n_per_article: 1 å‚è€ƒæ–‡ç«  hexoçš„nextä¸»é¢˜ä¸ªæ€§åŒ–æ•™ç¨‹:æ‰“é€ ç‚«é…·ç½‘ç«™ Hexo-NexTé…ç½®è¶…ç‚«ç½‘é¡µæ•ˆæžœ]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>Next</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ­å»ºä¸ªäººss-ssræœåŠ¡å™¨]]></title>
    <url>%2F2017%2F10%2F01%2F%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BAss-ssr%E6%9C%8D%E5%8A%A1%E5%99%A8%2F</url>
    <content type="text"><![CDATA[èŽ·å–SSRå®¢æˆ·ç«¯ Windowså®¢æˆ·ç«¯åœ°å€ download å¤‡ç”¨åœ°å€ Macå®¢æˆ·ç«¯åœ°å€ download å¤‡ç”¨åœ°å€ Linuxå®¢æˆ·ç«¯ä¸€é”®å®‰è£…é…ç½® ä½¿ç”¨è„šæœ¬ (ä½¿ç”¨æ–¹æ³•è§æ³¨é‡Š) æˆ–è€…é‡‡ç”¨å›¾å½¢ç•Œé¢çš„linux ssrå®¢æˆ·ç«¯ å®‰å“ SSRå®¢æˆ·ç«¯ ä¸‹è½½åœ°å€ å¤‡ç”¨ä¸‹è½½åœ°å€ å¼€å§‹æ­å»º æ­å»ºæ­¥éª¤åˆ†ä¸ºä¸‰æ­¥ï¼š1.è´­ä¹°VPSæœåŠ¡å™¨2.ä¸€é”®éƒ¨ç½²VPSæœåŠ¡å™¨3.ä¸€é”®åŠ é€ŸVPSæœåŠ¡å™¨ ï¼ˆè°·æ­ŒBBRåŠ é€Ÿï¼ŒæŽ¨èï¼‰ ç¬¬ä¸€æ­¥ï¼šè´­ä¹°VPSæœåŠ¡å™¨VPSæœåŠ¡å™¨éœ€è¦é€‰æ‹©å›½å¤–çš„ï¼Œé¦–é€‰å›½é™…çŸ¥åçš„vultrï¼Œé€Ÿåº¦ä¸é”™ã€ç¨³å®šä¸”æ€§ä»·æ¯”é«˜ã€‚ vultræ³¨å†Œåœ°å€ï¼š http://www.vultr.com/?ref=7048874 ï¼ˆå…¨çƒ15ä¸ªæœåŠ¡å™¨ä½ç½®å¯é€‰ï¼ŒKVMæ¡†æž¶ï¼‰ 12345678910ä»·æ ¼:2.5ç¾Žå…ƒ/æœˆçš„æœåŠ¡å™¨é…ç½®ä¿¡æ¯ï¼šå•æ ¸ 512Må†…å­˜ 20G SSDç¡¬ç›˜ 100Må¸¦å®½ 500Gæµé‡/æœˆ5ç¾Žå…ƒ/æœˆçš„æœåŠ¡å™¨é…ç½®ä¿¡æ¯ï¼šå•æ ¸ 1Gå†…å­˜ 25G SSDç¡¬ç›˜ 100Må¸¦å®½ 1000Gæµé‡/æœˆ10ç¾Žå…ƒ/æœˆçš„æœåŠ¡å™¨é…ç½®ä¿¡æ¯ï¼šå•æ ¸ 2Gå†…å­˜ 40G SSDç¡¬ç›˜ 100Må¸¦å®½ 2000Gæµé‡/æœˆ20ç¾Žå…ƒ/æœˆçš„æœåŠ¡å™¨é…ç½®ä¿¡æ¯ï¼š2cpu 4Gå†…å­˜ 60G SSDç¡¬ç›˜ 100Må¸¦å®½ 3000Gæµé‡/æœˆ40ç¾Žå…ƒ/æœˆçš„æœåŠ¡å™¨é…ç½®ä¿¡æ¯ï¼š4cpu 8Gå†…å­˜ 100G SSDç¡¬ç›˜ 100Må¸¦å®½ 4000Gæµé‡/æœˆ vultrå®žé™…ä¸Šæ˜¯æŠ˜ç®—æˆå°æ—¶æ¥è®¡è´¹çš„ï¼Œæ¯”å¦‚æœåŠ¡å™¨æ˜¯5ç¾Žå…ƒ1ä¸ªæœˆï¼Œé‚£ä¹ˆæ¯å°æ—¶æ”¶è´¹ä¸º5/30/24=0.0069ç¾Žå…ƒ ä¼šè‡ªåŠ¨ä»Žè´¦å·ä¸­æ‰£è´¹ï¼Œåªè¦ä¿è¯è´¦å·æœ‰é’±å³å¯ã€‚å¦‚æžœä½ éƒ¨ç½²çš„æœåŠ¡å™¨å®žæµ‹åŽä¸ç†æƒ³ï¼Œä½ å¯ä»¥æŠŠå®ƒåˆ æŽ‰ï¼ˆdestroyï¼‰ï¼Œé‡æ–°æ¢ä¸ªåœ°åŒºçš„æœåŠ¡å™¨æ¥éƒ¨ç½²ï¼Œå¾ˆæ–¹ä¾¿ã€‚ è®¡è´¹ä»Žä½ å¼€é€šæœåŠ¡å™¨å¼€å§‹ç®—çš„ï¼Œä¸ç®¡ä½ æœ‰æ²¡æœ‰ä½¿ç”¨ï¼Œå³ä½¿æœåŠ¡å™¨å¤„äºŽå…³æœºçŠ¶æ€ä»ç„¶ä¼šè®¡è´¹ï¼Œå¦‚æžœä½ æ²¡æœ‰å¼€é€šæœåŠ¡å™¨å°±ä¸ç®—ã€‚æ¯”å¦‚ä½ ä»Šå¤©æ—©ä¸Šå¼€é€šäº†æœåŠ¡å™¨ï¼Œä½†ä½ æœ‰äº‹æƒ…ï¼Œæ™šä¸Šæ‰éƒ¨ç½²ï¼Œé‚£ä¹ˆè¿™æ®µæ—¶é—´æ˜¯ä¼šè®¡è´¹çš„ã€‚åŒç†ï¼Œå¦‚æžœä½ æ—©ä¸Šåˆ æŽ‰æœåŠ¡å™¨ï¼Œç¬¬äºŒå¤©æ‰å¼€é€šæ–°çš„æœåŠ¡å™¨ï¼Œé‚£ä¹ˆè¿™æ®µæ—¶é—´æ˜¯ä¸ä¼šè®¡è´¹çš„ã€‚ æ¸©é¦¨æé†’ï¼šåŒæ ·çš„æœåŠ¡å™¨ä½ç½®ï¼Œä¸åŒçš„å®½å¸¦ç±»åž‹å’Œåœ°åŒºæ‰€æ­å»ºçš„è´¦å·çš„ç¿»å¢™é€Ÿåº¦ä¼šä¸åŒï¼Œæ‰€ä»¥æœ€å¥½äº²æµ‹ä¸€ä¸‹ã€‚ è´­ä¹°vpsæœåŠ¡å™¨æ—¶ï¼ŒæœåŠ¡å™¨åœ°å€ä¼˜å…ˆé€‰æ‹©ï¼šç¾Žå›½ç¡…è°·ï¼ˆSilicon Valleyï¼‰ã€ç¾Žå›½è¾¾æ‹‰æ–¯(Dallas)ç­‰ï¼Œè¿‘æœŸä¸æŽ¨èç”¨æ´›æ‰çŸ¶å’Œæ—¥æœ¬çš„æœåŠ¡å™¨ï¼Œå› ä¸ºè¿™ä¸¤ä¸ªåœ°åŒºè¿‘æœŸèƒ½å¤Ÿå¼€åˆ°çš„å¥½ipçš„å¯èƒ½æ€§å¾ˆä½Žã€‚æŽ¨èé€‰æ‹©CentOS 6.X64ä½çš„ç³»ç»Ÿï¼ˆç³»ç»Ÿç‰ˆæœ¬ä¸è¦é€‰çš„å¤ªé«˜ï¼Œä¸è¦é€‰centos7ï¼centos7é»˜è®¤çš„é˜²ç«å¢™å¯èƒ½ä¼šå¹²æ‰°ssrçš„æ­£å¸¸è¿žæŽ¥ï¼ï¼‰ã€‚å®Œæˆè´­ä¹°åŽï¼Œæ‰¾åˆ°ç³»ç»Ÿçš„å¯†ç è®°ä¸‹æ¥ï¼Œéƒ¨ç½²æœåŠ¡å™¨æ—¶éœ€è¦ç”¨åˆ°ã€‚å¦‚å›¾ï¼š é»˜è®¤æ˜¯centos7ç³»ç»Ÿï¼Œç‚¹å‡»å›¾ä¸­çš„CentOSå‡ ä¸ªå­—ï¼Œä¼šå¼¹å‡ºcentos6ï¼Œç„¶åŽé€‰ä¸­å®ƒï¼vpsæ“ä½œç³»ç»Ÿä¸è¦é€‰cento7ï¼Œå› ä¸ºé€‰å®ƒå¾ˆå¯èƒ½ä¼šå½±å“ssrçš„æ­£å¸¸è¿žæŽ¥ã€‚ ç¬¬äºŒæ­¥ï¼šè¿œç¨‹è¿žæŽ¥VPSæœåŠ¡å™¨Macè¿žæŽ¥è¿œç¨‹æœåŠ¡å™¨: æ‰“å¼€terminal,è¾“å…¥ssh root@ipåœ°å€;rootä¸ºè¿œç¨‹æœåŠ¡å™¨çš„username,ipåœ°å€ä¸ºè¿œç¨‹æœåŠ¡å™¨çš„ip. è”é€šåŽ,æç¤ºè¾“å…¥å¯†ç ,ç„¶åŽè¾“å…¥æœåŠ¡å™¨çš„å¯†ç . å¼€å§‹éƒ¨ç½²ssrä»£ç  Windowsè¿žæŽ¥è¿œç¨‹æœåŠ¡å™¨:è´­ä¹°æœåŠ¡å™¨åŽï¼Œéœ€è¦éƒ¨ç½²ä¸€ä¸‹ã€‚å› ä¸ºä½ ä¹°çš„æ˜¯è™šæ‹Ÿä¸œè¥¿ï¼Œè€Œä¸”åˆè¿œåœ¨å›½å¤–ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå«Xshellçš„è½¯ä»¶æ¥è¿œç¨‹éƒ¨ç½²ã€‚Xshell windowsç‰ˆä¸‹è½½åœ°å€ï¼š å·´åˆ«é¸Ÿäº‘ç›˜ä¸‹è½½ æå–å¯†ç ï¼š38693 å›½å¤–äº‘ç›˜ä¸‹è½½ ç™¾åº¦è½¯ä»¶ä¸­å¿ƒ ä¸‹è½½xshellè½¯ä»¶å¹¶å®‰è£…åŽï¼Œæ‰“å¼€è½¯ä»¶ é€‰æ‹©æ–‡ä»¶ï¼Œæ–°å»º éšä¾¿å–ä¸ªåå­—ï¼Œç„¶åŽæŠŠä½ çš„æœåŠ¡å™¨ipå¡«ä¸Š è¿žæŽ¥å›½å¤–ipå³æœåŠ¡å™¨æ—¶ï¼Œè½¯ä»¶ä¼šå…ˆåŽæé†’ä½ è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œç”¨æˆ·ålinuxç³»ç»Ÿé»˜è®¤éƒ½æ˜¯rootï¼Œå¯†ç æ˜¯è´­ä¹°æœåŠ¡å™¨åŽçš„centç³»ç»Ÿçš„å¯†ç ã€‚ å¦‚æžœå¼€å¥½äº†æœåŠ¡å™¨ï¼Œå‘çŽ°xshellæ­»æ´»è¿žä¸ä¸Šï¼Œå¤šåŠæ˜¯å¼€çš„æœåŠ¡å™¨ipè¢«å¢™äº†ï¼Œé‡åˆ°è¿™ç§æƒ…å†µï¼ŒæŠŠæœåŠ¡å™¨åˆ æŽ‰ï¼Œé‡æ–°å¼€ä¸ªæ–°çš„æœåŠ¡å™¨å³å¯ï¼Œå¯ä»¥æ˜¯åŒåœ°åŒºçš„ä¹Ÿå¯ä»¥é€‰æ‹©å…¶å®ƒåœ°åŒºã€‚ è¿žæŽ¥æˆåŠŸåŽï¼Œä¼šå‡ºçŽ°å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä¹‹åŽå°±å¯ä»¥å¤åˆ¶ç²˜è´´ä»£ç éƒ¨ç½²äº†ã€‚ åˆ†äº«ä¸¤ä¸ªå¥½ç”¨çš„ä»£ç ï¼Œé€‰æ‹©å…¶ä¸­ä¸€ä¸ªå³å¯ã€‚å»ºè®®ä¸¤ä¸ªè„šæœ¬å…ˆå¤§è‡´éƒ½çœ‹ä¸€ä¸‹åŠŸèƒ½,ç„¶åŽå†é€‰æ‹©ã€‚ ç¬¬ä¸‰æ­¥: éƒ¨ç½²ssrä»£ç ç¬¬1ç§æ–¹å¼:1234567yum -y install wgetwget --no-check-certificate https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocksR.shchmod +x shadowsocksR.sh./shadowsocksR.sh 2&gt;&amp;1 | tee shadowsocksR.log ä¸Šé¢çš„ä»£ç æ€»å…±æœ‰4è¡Œï¼ˆæ˜¾ç¤º5è¡Œï¼‰ï¼Œå¤åˆ¶æ—¶è¦ä¸€èµ·å¤åˆ¶ä¸‹æ¥ï¼Œä»¥ä¸‹è„šæœ¬ç±»ä¼¼ã€‚å¦‚æžœè¦å¸è½½ç›´æŽ¥è¾“å…¥å‘½ä»¤ï¼š./shadowsocks-go.sh uninstall æ¼”ç¤ºå¼€å§‹ï¼šå¤åˆ¶ä»£ç ç²˜è´´åˆ°vpsæœåŠ¡å™¨é‡Œï¼ŒæŒ‰å›žè½¦é”®ï¼Œè¿›å…¥éƒ¨ç½²ã€‚ æŒ‰ç…§å¦‚ä¸‹æç¤ºï¼Œè¾“å…¥æƒ³è®¾ç½®çš„å¯†ç ï¼ŒæŒ‰å›žè½¦é”®è¿›å…¥ä¸‹ä¸€æ­¥ (å¯†ç å»ºè®®ç”¨å­—æ¯ï¼Œå›¾ä¸­çš„å¯†ç åªæ˜¯ä½œä¸ºæ¼”ç¤ºç”¨)æŒ‰ç…§å¦‚ä¸‹æç¤ºï¼Œè¾“å…¥æƒ³è®¾ç½®çš„ç«¯å£ï¼ˆ3ï½ž4ä½å³å¯ï¼‰ï¼ŒæŒ‰å›žè½¦é”®è¿›å…¥ä¸‹ä¸€æ­¥æŒ‰ç…§å¦‚ä¸‹æç¤ºï¼Œé€‰æ‹©æƒ³è®¾ç½®çš„åŠ å¯†æ–¹å¼ï¼Œæ‹¬å·é‡Œé¢æ˜¯é»˜è®¤çš„åŠ å¯†æ–¹å¼ï¼Œæƒ³è®¾ç½®é»˜è®¤çš„è¯ç›´æŽ¥æŒ‰å›žè½¦é”®ã€‚è¿™é‡Œé€‰æ‹©æ•°å­—2ï¼ˆå’Œé»˜è®¤ä¸€æ ·ï¼‰çš„aes-256-cfbçš„åŠ å¯†æ–¹å¼æŒ‰ç…§å¦‚ä¸‹æç¤ºï¼Œé€‰æ‹©é¡¹è®¾ç½®çš„åè®®æ’ä»¶ï¼Œé»˜ç„¶çš„æ˜¯originï¼ˆæ”¯æŒSSå®¢æˆ·ç«¯ï¼Œä¸æŽ¨èï¼‰ï¼Œæˆ‘ä»¬é€‰æ‹©SSRå®¢æˆ·ç«¯çš„åè®®æ’ä»¶ï¼š3æŒ‰ç…§å¦‚ä¸‹æç¤ºï¼Œé€‰æ‹©é¡¹è®¾ç½®çš„æ··æ·†æ’ä»¶ï¼Œé»˜ç„¶çš„æ˜¯plainï¼ˆæ”¯æŒSSå®¢æˆ·ç«¯ï¼Œä¸æŽ¨èï¼‰ï¼Œæˆ‘ä»¬é€‰æ‹©SSRå®¢æˆ·ç«¯çš„æ··æ·†æ’ä»¶ï¼š6æŒ‰ç…§å¦‚ä¸‹æç¤ºï¼ŒæŒ‰ä»»æ„é”®è¿›è¡Œè‡ªåŠ¨éƒ¨ç½² ä¸Šå›¾è¡¨ç¤ºéƒ¨ç½²æˆåŠŸã€‚ä»Žä¸Šå¾€ä¸‹ä¾æ¬¡ä¸ºSSRå¸å·çš„IPã€ç«¯å£ã€å¯†ç ã€åè®®æ’ä»¶ã€æ··æ·†æ’ä»¶å’ŒåŠ å¯†æ–¹å¼ã€‚ æœ€åŽå¯ä»¥é‡å¯æœåŠ¡å™¨ç¡®ä¿éƒ¨ç½²ç”Ÿæ•ˆã€‚é‡å¯éœ€è¦åœ¨å‘½ä»¤æ é‡Œè¾“å…¥reboot ï¼Œè¾“å…¥å‘½ä»¤åŽç¨å¾®ç­‰å¾…ä¸€ä¼šæœåŠ¡å™¨å°±ä¼šè‡ªåŠ¨é‡å¯ï¼Œä¸€èˆ¬é‡å¯è¿‡ç¨‹éœ€è¦2ï½ž5åˆ†é’Ÿï¼Œé‡å¯è¿‡ç¨‹ä¸­Xshellä¼šè‡ªåŠ¨æ–­å¼€è¿žæŽ¥ï¼Œç­‰VPSé‡å¯å¥½åŽæ‰å¯ä»¥ç”¨Xshellè½¯ä»¶è¿›è¡Œè¿žæŽ¥ã€‚å¦‚æžœéƒ¨ç½²è¿‡ç¨‹ä¸­å¡åœ¨æŸä¸ªä½ç½®è¶…è¿‡10åˆ†é’Ÿï¼Œå¯ä»¥ç”¨xshellè½¯ä»¶æ–­å¼€ï¼Œç„¶åŽé‡æ–°è¿žæŽ¥ä½ çš„ipï¼Œå†å¤åˆ¶ä»£ç è¿›è¡Œéƒ¨ç½²ã€‚ è¿™ä¸ªè„šæœ¬çš„å›¾æ–‡æ¼”ç¤ºå°±ç»“æŸäº†ï¼Œå›¾ä¸­çš„IPä»…ä½œæ¼”ç¤ºç”¨ï¼Œæ•™ç¨‹å‘å¸ƒåŽä¼šå¤±æ•ˆã€‚æœ‰äººæƒ³äº†ï¼Œæˆ‘ä»¥åŽæœ‰æƒ³ä¿®æ”¹å¯†ç æˆ–è€…ç«¯å£çš„éœ€æ±‚æ€Žä¹ˆåŠžï¼Ÿè¿™ä¸ªè„šæœ¬ä¿®æ”¹å¯†ç å’Œç«¯å£ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Œéœ€è¦æŠŠæœ€åˆçš„éƒ¨ç½²ä»£ç é‡æ–°è¾“å…¥ä¸€éï¼Œå³ä»Žå¤´åˆ°å°¾éƒ¨ç½²ä¸€éå³å¯ã€‚ ä¸‹é¢å†åˆ†äº«ç¬¬äºŒä¸ªè„šæœ¬ï¼Œè¿™ä¸ªè„šæœ¬è£…ä¸€éå³å¯ï¼Œæ–¹ä¾¿ä»¥åŽæƒ³ä¿®æ”¹å¯†ç ã€ç«¯å£ä»€ä¹ˆçš„ï¼Œè€Œä¸”åŠŸèƒ½æ›´å¤šã€‚ ç¬¬2ç§æ–¹å¼:CentOS/Debian/Ubuntu ShadowsocksRå•/å¤šç«¯å£ä¸€é”®ç®¡ç†è„šæœ¬ï¼š 123yum -y install wgetwget -N --no-check-certificate https://softs.fun/Bash/ssr.sh &amp;&amp; chmod +x ssr.sh &amp;&amp; bash ssr.sh å¤‡ç”¨ä¸‹è½½åœ°å€ï¼š 123yum -y install wgetwget -N --no-check-certificate https://raw.githubusercontent.com/ToyoDAdoubi/doubi/master/ssr.sh &amp;&amp; chmod +x ssr.sh &amp;&amp; bash ssr.sh å¤åˆ¶ä¸Šé¢çš„ä»£ç åˆ°VPSæœåŠ¡å™¨é‡Œï¼Œå®‰è£…è„šæœ¬åŽï¼Œä»¥åŽåªéœ€è¦è¿è¡Œè¿™ä¸ªå¿«æ·å‘½ä»¤å°±å¯ä»¥å‡ºçŽ°ä¸‹å›¾çš„ç•Œé¢è¿›è¡Œè®¾ç½®ï¼Œå¿«æ·ç®¡ç†å‘½ä»¤ä¸ºï¼šbash ssr.sh å¦‚ä¸Šå›¾å‡ºçŽ°ç®¡ç†ç•Œé¢åŽï¼Œè¾“å…¥æ•°å­—1æ¥å®‰è£…SSRæœåŠ¡ç«¯ã€‚å¦‚æžœè¾“å…¥1åŽä¸èƒ½è¿›å…¥ä¸‹ä¸€æ­¥ï¼Œé‚£ä¹ˆè¯·é€€å‡ºxshellï¼Œé‡æ–°è¿žæŽ¥vpsæœåŠ¡å™¨ï¼Œç„¶åŽè¾“å…¥å¿«æ·ç®¡ç†å‘½ä»¤bash ssr.sh å†å°è¯•ã€‚ æ ¹æ®ä¸Šå›¾æç¤ºï¼Œä¾æ¬¡è¾“å…¥è‡ªå·±æƒ³è®¾ç½®çš„ç«¯å£å’Œå¯†ç  (å¯†ç å»ºè®®ç”¨å­—æ¯ï¼Œå›¾ä¸­çš„å¯†ç åªæ˜¯ä½œä¸ºæ¼”ç¤ºç”¨)ï¼Œå›žè½¦é”®ç”¨äºŽç¡®è®¤ å¦‚ä¸Šå›¾ï¼Œé€‰æ‹©æƒ³è®¾ç½®çš„åŠ å¯†æ–¹å¼ï¼Œæ¯”å¦‚10ï¼ŒæŒ‰å›žè½¦é”®ç¡®è®¤ æŽ¥ä¸‹æ¥æ˜¯é€‰æ‹©åè®®æ’ä»¶ï¼Œå¦‚ä¸‹å›¾ï¼š é€‰æ‹©å¹¶ç¡®è®¤åŽï¼Œä¼šå‡ºçŽ°ä¸Šå›¾çš„ç•Œé¢ï¼Œæç¤ºä½ æ˜¯å¦é€‰æ‹©å…¼å®¹åŽŸç‰ˆï¼Œè¿™é‡Œçš„åŽŸç‰ˆæŒ‡çš„æ˜¯SSå®¢æˆ·ç«¯ï¼Œå¯ä»¥æ ¹æ®éœ€æ±‚è¿›è¡Œé€‰æ‹©ï¼ŒåŽŸåˆ™ä¸Šä¸æŽ¨èä½¿ç”¨SSå®¢æˆ·ç«¯ï¼Œæ¼”ç¤ºé€‰æ‹©n ä¹‹åŽè¿›è¡Œæ··æ·†æ’ä»¶çš„è®¾ç½®ï¼Œå¦‚ä¸‹é¢ è¿›è¡Œæ··æ·†æ’ä»¶çš„è®¾ç½®åŽï¼Œä¼šä¾æ¬¡æç¤ºä½ å¯¹è®¾å¤‡æ•°ã€å•çº¿ç¨‹é™é€Ÿå’Œç«¯å£æ€»é™é€Ÿè¿›è¡Œè®¾ç½®ï¼Œé»˜è®¤å€¼æ˜¯ä¸è¿›è¡Œé™åˆ¶ï¼Œä¸ªäººä½¿ç”¨çš„è¯ï¼Œé€‰æ‹©é»˜è®¤å³å¯ï¼Œå³ç›´æŽ¥æ•²å›žè½¦é”®ã€‚ ä¹‹åŽä»£ç å°±æ­£å¼è‡ªåŠ¨éƒ¨ç½²äº†ï¼Œåˆ°ä¸‹å›¾æ‰€ç¤ºçš„ä½ç½®ï¼Œæç¤ºä½ ä¸‹è½½æ–‡ä»¶ï¼Œè¾“å…¥ï¼šy è€å¿ƒç­‰å¾…ä¸€ä¼šï¼Œå‡ºçŽ°ä¸‹é¢çš„ç•Œé¢å³éƒ¨ç½²å®Œæˆï¼š æ ¹æ®ä¸Šå›¾å°±å¯ä»¥çœ‹åˆ°è‡ªå·±è®¾ç½®çš„SSRè´¦å·ä¿¡æ¯ï¼ŒåŒ…æ‹¬IPã€ç«¯å£ã€å¯†ç ã€åŠ å¯†æ–¹å¼ã€åè®®æ’ä»¶ã€æ··æ·†æ’ä»¶ã€‚å¦‚æžœä¹‹åŽæƒ³ä¿®æ”¹è´¦å·ä¿¡æ¯ï¼Œç›´æŽ¥è¾“å…¥å¿«æ·ç®¡ç†å‘½ä»¤ï¼šbash ssr.sh è¿›å…¥ç®¡ç†ç•Œé¢ï¼Œé€‰æ‹©ç›¸åº”çš„æ•°å­—æ¥è¿›è¡Œä¸€é”®ä¿®æ”¹ã€‚ä¾‹å¦‚ï¼š ç¬¬2ä¸ªè„šæœ¬çš„æ¼”ç¤ºç»“æŸã€‚ ç¬¬å››æ­¥ï¼šä¸€é”®åŠ é€ŸVPSæœåŠ¡å™¨æ­¤åŠ é€Ÿæ•™ç¨‹ä¸ºè°·æ­ŒBBRåŠ é€Ÿ ï¼Œvultrçš„æœåŠ¡å™¨å¯ä»¥è£…è°·æ­Œbbrã€‚ æŒ‰ç…§ç¬¬äºŒæ­¥çš„æ­¥éª¤ï¼Œé‡æ–°è¿žæŽ¥æœåŠ¡å™¨ipï¼Œç™»å½•æˆåŠŸåŽï¼Œåœ¨å‘½ä»¤æ é‡Œç²˜è´´ä»¥ä¸‹ä»£ç ï¼š ã€è°·æ­ŒBBRåŠ é€Ÿæ•™ç¨‹ã€‘ 1234567yum -y install wgetwget --no-check-certificate https://github.com/teddysun/across/raw/master/bbr.shchmod +x bbr.sh./bbr.sh æŠŠä¸Šé¢æ•´ä¸ªä»£ç å¤åˆ¶åŽç²˜è´´è¿›åŽ»ï¼Œä¸åŠ¨çš„æ—¶å€™æŒ‰å›žè½¦ï¼Œç„¶åŽè€å¿ƒç­‰å¾…ï¼Œæœ€åŽé‡å¯vpsæœåŠ¡å™¨å³å¯ã€‚ æ¼”ç¤ºå¼€å§‹ï¼Œå¦‚å›¾ï¼š å¤åˆ¶å¹¶ç²˜è´´ä»£ç åŽï¼ŒæŒ‰å›žè½¦é”®ç¡®è®¤ å¦‚ä¸‹å›¾æç¤ºï¼ŒæŒ‰ä»»æ„é”®ç»§ç»­éƒ¨ç½² éƒ¨ç½²åˆ°ä¸Šå›¾è¿™ä¸ªä½ç½®çš„æ—¶å€™ï¼Œç­‰å¾…3ï½ž6åˆ†é’Ÿ æœ€åŽè¾“å…¥yé‡å¯æœåŠ¡å™¨æˆ–è€…æ‰‹åŠ¨è¾“å…¥ä»£ç rebootæ¥ç¡®ä¿åŠ é€Ÿç”Ÿæ•ˆã€‚ è´­ä¹°vpsæœåŠ¡å™¨åŽï¼Œipæœ‰äº†ï¼Œé€šè¿‡éƒ¨ç½²ï¼Œç«¯å£ã€å¯†ç ã€åŠ å¯†æ–¹å¼ã€åè®®å’Œæ··æ·†ä¹Ÿæœ‰äº†ï¼Œæœ€åŽå°†è¿™äº›ä¿¡æ¯å¡«å…¥SSRå®¢æˆ·ç«¯å°±å¯ä»¥ç¿»å¢™å•¦ã€‚ æœ‰äº†è´¦å·åŽï¼Œæ‰“å¼€SSRå®¢æˆ·ç«¯ï¼Œå¡«ä¸Šä¿¡æ¯ï¼Œè¿™é‡Œä»¥windowsç‰ˆçš„SSRå®¢æˆ·ç«¯ä¸ºä¾‹å­ï¼š åœ¨å¯¹åº”çš„ä½ç½®ï¼Œå¡«ä¸ŠæœåŠ¡å™¨ipã€æœåŠ¡å™¨ç«¯å£ã€å¯†ç ã€åŠ å¯†æ–¹å¼ã€åè®®å’Œæ··æ·†ï¼Œæœ€åŽå°†æµè§ˆå™¨çš„ä»£ç†è®¾ç½®ä¸ºï¼ˆhttpï¼‰127.0.0.1 1080å³å¯ã€‚è´¦å·çš„ç«¯å£å·å°±æ˜¯ä½ è‡ªå·±è®¾ç½®çš„ï¼Œè€Œè¦ä¸Šç½‘çš„æµè§ˆå™¨çš„ç«¯å£å·æ˜¯1080ï¼Œå›ºå®šçš„ï¼Œè°·æ­Œæµè§ˆå™¨å¯ä»¥é€šè¿‡ SwitchyOmega æ’ä»¶æ¥è®¾ç½®ã€‚ æœ‰é—®é¢˜å¯ä»¥åœ¨è¿™ä¸ªå¸–å­ç•™è¨€ï¼Œæˆ–è€…è‡ªå·±ç½‘ä¸Šæœç´¢ä¸æ˜Žç™½çš„åœ°æ–¹ã€‚å¤šå®žè·µä¼šæ›´å¥½ã€‚ç¬¬ä¸€æ¬¡éƒ¨ç½²æ—¶ä¼šæ…¢ä¸€ç‚¹ï¼Œç†Ÿç»ƒäº†ä¹‹åŽï¼Œå°±å¾ˆå¿«äº†ã€‚ å¸¸è§é—®é¢˜å‚è€ƒè§£å†³æ–¹æ³•ï¼š1ã€ç”¨äº†ä¸€æ®µæ—¶é—´å‘çŽ°ssrè´¦å·ç”¨ä¸äº†äº†ï¼Ÿ å¤šåŠæ˜¯è¢«å¢™äº†ï¼Œå³ipå¤±æ•ˆã€‚é¦–å…ˆpingä¸€ä¸‹è‡ªå·±çš„ipï¼Œçœ‹çœ‹èƒ½ä¸èƒ½pingçš„é€šï¼Œpingä¸é€šé‚£ä¹ˆå°±æ˜¯ipè¢«å¢™äº†ï¼Œé‡åˆ°è¿™ç§æƒ…å†µé‡æ–°éƒ¨ç½²ä¸€ä¸ªæ–°çš„æœåŠ¡å™¨ï¼Œæ–°çš„æœåŠ¡å™¨å°±æ˜¯æ–°çš„ipã€‚å…³äºŽæ€Žä¹ˆping ipçš„æ–¹æ³•ï¼Œå¯ä»¥è‡ªè¡Œç½‘ä¸Šæœç´¢ï¼Œå¾ˆç®€å•ã€‚vultræœåŠ¡å•†å¼€é€šå’Œåˆ é™¤æœåŠ¡å™¨éžå¸¸æ–¹ä¾¿ï¼ˆæ–°æœåŠ¡å™¨å³æ–°ipã€‚å¤§å¤šæ•°vpsæœåŠ¡å•†éƒ½æ²¡æœ‰è¿™æ ·çš„æœåŠ¡ï¼Œä¸€èˆ¬çš„vpsæœåŠ¡å•†å¯èƒ½ä¼šæä¾›æ›´æ¢1æ¬¡ipçš„æœåŠ¡ï¼Œå¦‚æžœä½ ä¹°çš„æ˜¯åˆ«å®¶çš„vpsï¼Œä¸€å®šè¦äº†è§£æ˜¯å¦èƒ½å¤Ÿæ›´æ¢ipï¼Œå‡å¦‚ä¸èƒ½ï¼Œé‚£ä¹ˆä¸‡ä¸€ä½ çš„ipä¸å¹¸è¢«å¢™ï¼Œé’±å°±æ‰“æ°´æ¼‚äº†ï¼‰ã€‚ 2ã€åˆšæ­å»ºå¥½çš„ssrè´¦å·ï¼Œipèƒ½pingé€šï¼Œä½†æ˜¯è¿˜æ˜¯ç”¨ä¸äº†ï¼Ÿ é¦–é€‰ï¼ŒæŽ’é™¤æ€æ¯’è½¯ä»¶çš„å¹²æ‰°ï¼Œå°¤å…¶æ˜¯å›½äº§æ€æ¯’è½¯ä»¶ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºŽ360å®‰å…¨å«ç”Ÿã€360æ€æ¯’è½¯ä»¶ã€è…¾è®¯ç®¡å®¶ã€é‡‘å±±å«ç”Ÿç­‰ã€‚è¿™äº›ä¸œè¥¿å¾ˆå®¹æ˜“å¹²æ‰°ç¿»å¢™ä¸Šç½‘ï¼Œå¦‚æžœä½ çš„ç”µè„‘å®‰è£…äº†è¿™æ ·çš„ä¸œè¥¿ï¼Œå»ºè®®è‡³å°‘ç¿»å¢™æ—¶åˆ«ç”¨ã€‚å…¶æ¬¡ï¼Œæ£€æŸ¥ä¸‹SSRä¿¡æ¯æ˜¯å¦å¡«å†™æ­£ç¡®ã€‚æµè§ˆå™¨çš„ä»£ç†æ–¹å¼æ˜¯å¦æ˜¯ssrä»£ç†ï¼Œå³127.0.0.1 1080ç«¯å£ã€‚å¦‚æžœä»¥ä¸Šæ¡ä»¶éƒ½æŽ’é™¤ï¼Œè¿˜æ˜¯ç”¨ä¸äº†ï¼Œé‚£ä¹ˆå¯ä»¥æ›´æ¢ç«¯å£ã€åŠ å¯†æ–¹å¼ã€åè®®ã€æ··æ·†ï¼Œæˆ–è€…æ›´æ¢æœåŠ¡å™¨ä½ç½®ã€‚ 3ã€vpsçš„æœåŠ¡å™¨æ“ä½œç³»ç»Ÿä¸è¦ç”¨çš„å¤ªé«˜ï¼Œå¤ªé«˜å¯èƒ½ä¼šå› ä¸ºç³»ç»Ÿçš„é˜²ç«å¢™é—®é¢˜å¯¼è‡´æ­å»ºçš„SSRè´¦å·è¿žä¸ä¸Šï¼Œå¦‚æžœä½ ç”¨çš„centosç³»ç»Ÿï¼Œå»ºè®®ç”¨centos6ï¼Œä¸è¦ç”¨centos7ã€‚å¦‚æžœä½ å‰é¢ä¸å°å¿ƒè£…äº†centos7ç³»ç»Ÿï¼Œé‚£ä¹ˆåªèƒ½é‡è£…ç³»ç»Ÿæˆ–è€…é‡æ–°éƒ¨ç½²æ–°çš„vpsæœåŠ¡å™¨ã€‚ 4ã€å°çŸ¥è¯†ï¼švultræœåŠ¡å•†æä¾›çš„vpsæœåŠ¡å™¨æ˜¯å•å‘æµé‡è®¡ç®—ï¼Œæœ‰çš„vpsæœåŠ¡å•†æ˜¯åŒå‘æµé‡è®¡ç®—ï¼Œå•å‘æµé‡è®¡ç®—å¯¹äºŽç”¨æˆ·æ¥è¯´æ›´å®žæƒ ã€‚å› ä¸ºæˆ‘ä»¬æ˜¯åœ¨vpsæœåŠ¡å™¨ä¸Šéƒ¨ç½²SSRæœåŠ¡ç«¯åŽï¼Œå†ç”¨SSRå®¢æˆ·ç«¯ç¿»å¢™ï¼Œæ‰€ä»¥SSRæœåŠ¡ç«¯å°±ç›¸å½“äºŽä¸­è½¬ï¼Œæ¯”å¦‚æˆ‘ä»¬çœ‹ä¸€ä¸ªè§†é¢‘ï¼Œå¿…ç„¶ä¼šäº§ç”Ÿæµé‡ï¼Œå‡å¦‚æ¶ˆè€—æµé‡80Mï¼Œé‚£ä¹ˆVPSæœåŠ¡å™¨ä¼šäº§ç”Ÿä¸Šä¼ 80Må’Œä¸‹è½½80Mæµé‡ï¼ŒvultræœåŠ¡å•†åªè®¡ç®—å•å‘çš„80Mæµé‡ã€‚å¦‚æžœæ˜¯åŒå‘è®¡ç®—æµé‡ï¼Œé‚£ä¹ˆä¼šè®¡ç®—ä¸º160Mæµé‡ã€‚ 5ã€å¦‚æžœä½ æƒ³æŠŠæ­å»ºçš„è´¦å·ç»™å¤šäººä½¿ç”¨ï¼Œä¸ç”¨é¢å¤–è®¾ç½®ç«¯å£ï¼Œå› ä¸ºä¸€ä¸ªè´¦å·å°±å¯ä»¥å¤šäººä½¿ç”¨ã€‚ä¸€èˆ¬10ç¾Žå…ƒçš„æœåŠ¡å™¨å¯ä»¥åŒæ—¶æ”¯æŒ100äººåœ¨çº¿ä½¿ç”¨ã€‚å¦‚æžœä½ æƒ³é¢å¤–çš„è®¾ç½®ç«¯å£ï¼Œé‡‡ç”¨ç¬¬äºŒä¸ªéƒ¨ç½²è„šæœ¬ï¼Œåœ¨ç®¡ç†ç•Œé¢è¾“å…¥æ•°å­—9ï¼Œå°±å¯ä»¥è®¾ç½®å¤šç«¯å£äº†ã€‚]]></content>
      <categories>
        <category>æœåŠ¡å™¨</category>
      </categories>
      <tags>
        <tag>æœåŠ¡å™¨</tag>
        <tag>ssr</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå¼€å‘ä¹‹è§¦æ‘¸äº‹ä»¶]]></title>
    <url>%2F2016%2F04%2F27%2FiOS%E5%BC%80%E5%8F%91%E4%B9%8B%E8%A7%A6%E6%91%B8%E4%BA%8B%E4%BB%B6%2F</url>
    <content type="text"><![CDATA[æœ¬æ–‡ä»‹ç»äº†iOSä¸­ä½¿ç”¨é¢‘çŽ‡è¾ƒé«˜çš„è§¦æ‘¸äº‹ä»¶ï¼Œå¹¶é˜è¿°äº†äº‹ä»¶äº§ç”Ÿå’Œä¼ é€’çš„è¿‡ç¨‹ï¼Œä»¥åŠå“åº”è€…é“¾çš„äº‹ä»¶ä¼ é€’è¿‡ç¨‹ è§¦æ‘¸äº‹ä»¶ç®€ä»‹ åœ¨ç”¨æˆ·ä½¿ç”¨appè¿‡ç¨‹ä¸­ï¼Œä¼šäº§ç”Ÿå„ç§å„æ ·çš„äº‹ä»¶ iOSä¸­çš„äº‹ä»¶å¯ä»¥åˆ†ä¸º3å¤§ç±»åž‹ è§¦æ‘¸äº‹ä»¶ åŠ é€Ÿè®¡äº‹ä»¶ è¿œç¨‹æŽ§åˆ¶äº‹ä»¶ å“åº”è€…å¯¹è±¡ åœ¨iOSä¸­ä¸æ˜¯ä»»ä½•å¯¹è±¡éƒ½èƒ½å¤„ç†äº‹ä»¶ï¼Œåªæœ‰ç»§æ‰¿äº†UIResponderçš„å¯¹è±¡æ‰èƒ½æŽ¥æ”¶å¹¶å¤„ç†äº‹ä»¶ã€‚æˆ‘ä»¬ç§°ä¹‹ä¸ºâ€œå“åº”è€…å¯¹è±¡â€ UIApplicationã€UIViewControllerã€UIViewéƒ½ç»§æ‰¿è‡ªUIResponderï¼Œå› æ­¤å®ƒä»¬éƒ½æ˜¯å“åº”è€…å¯¹è±¡ï¼Œéƒ½èƒ½å¤ŸæŽ¥æ”¶å¹¶å¤„ç†äº‹ä»¶ UIResponder è§¦æ‘¸äº‹ä»¶ 1234-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event;-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event;-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event;-(void)touchesCancelled:(NSSet *)touches withEvent (UIEvent *)event; åŠ é€Ÿè®¡äº‹ä»¶ 123-(void)motionBegan:(UIEventSubtype)motion withEvent:(UIEvent *)event;-(void)motionEnded:(UIEventSubtype)motion withEvent:(UIEvent *)event;-(void)motionCancelled:(UIEventSubtype)motion withEvent:(UIEvent *)event; è¿œç¨‹æŽ§åˆ¶äº‹ä»¶ 1-(void)remoteControlReceivedWithEvent:(UIEvent *)event; UIViewçš„è§¦æ‘¸äº‹ä»¶å¤„ç† UIViewæ˜¯UIResponderçš„å­ç±»ï¼Œå¯ä»¥è¦†ç›–ä¸‹åˆ—4ä¸ªæ–¹æ³•å¤„ç†ä¸åŒçš„è§¦æ‘¸äº‹ä»¶: ä¸€æ ¹æˆ–è€…å¤šæ ¹æ‰‹æŒ‡å¼€å§‹è§¦æ‘¸viewï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨viewçš„ä¸‹é¢æ–¹æ³• 1-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event ä¸€æ ¹æˆ–è€…å¤šæ ¹æ‰‹æŒ‡åœ¨viewä¸Šç§»åŠ¨ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨viewçš„ä¸‹é¢æ–¹æ³•ï¼ˆéšç€æ‰‹æŒ‡çš„ç§»åŠ¨ï¼Œä¼šæŒç»­è°ƒç”¨è¯¥æ–¹æ³•ï¼‰ 1-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event ä¸€æ ¹æˆ–è€…å¤šæ ¹æ‰‹æŒ‡ç¦»å¼€viewï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨viewçš„ä¸‹é¢æ–¹æ³• 1-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event è§¦æ‘¸ç»“æŸå‰ï¼ŒæŸä¸ªç³»ç»Ÿäº‹ä»¶(ä¾‹å¦‚ç”µè¯å‘¼å…¥)ä¼šæ‰“æ–­è§¦æ‘¸è¿‡ç¨‹ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨viewçš„ä¸‹é¢æ–¹æ³• 1-(void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event æç¤ºï¼štouchesä¸­å­˜æ”¾çš„éƒ½æ˜¯UITouchå¯¹è±¡ UITouchå¯¹è±¡å’Œä½œç”¨ å½“ç”¨æˆ·ç”¨ä¸€æ ¹æ‰‹æŒ‡è§¦æ‘¸å±å¹•æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªä¸Žæ‰‹æŒ‡ç›¸å…³è”çš„UITouchå¯¹è±¡ ä¸€æ ¹æ‰‹æŒ‡å¯¹åº”ä¸€ä¸ªUITouchå¯¹è±¡ UITouchçš„ä½œç”¨ï¼šä¿å­˜ç€è·Ÿæ‰‹æŒ‡ç›¸å…³çš„ä¿¡æ¯ï¼Œæ¯”å¦‚è§¦æ‘¸çš„ä½ç½®ã€æ—¶é—´ã€é˜¶æ®µ å½“æ‰‹æŒ‡ç§»åŠ¨æ—¶ï¼Œç³»ç»Ÿä¼šæ›´æ–°åŒä¸€ä¸ªUITouchå¯¹è±¡ï¼Œä½¿ä¹‹èƒ½å¤Ÿä¸€ç›´ä¿å­˜è¯¥æ‰‹æŒ‡åœ¨çš„è§¦æ‘¸ä½ç½® å½“æ‰‹æŒ‡ç¦»å¼€å±å¹•æ—¶ï¼Œç³»ç»Ÿä¼šé”€æ¯ç›¸åº”çš„UITouchå¯¹è±¡*æç¤ºï¼šiPhoneå¼€å‘ä¸­ï¼Œè¦é¿å…ä½¿ç”¨åŒå‡»äº‹ä»¶ï¼* UITouchçš„å±žæ€§ è§¦æ‘¸äº§ç”Ÿæ—¶æ‰€å¤„çš„çª—å£ 1@property(nonatomic,readonly,retain) UIWindow *window; è§¦æ‘¸äº§ç”Ÿæ—¶æ‰€å¤„çš„è§†å›¾ 1@property(nonatomic,readonly,retain) UIView *view; çŸ­æ—¶é—´å†…ç‚¹æŒ‰å±å¹•çš„æ¬¡æ•°ï¼Œå¯ä»¥æ ¹æ®tapCountåˆ¤æ–­å•å‡»ã€åŒå‡»æˆ–æ›´å¤šçš„ç‚¹å‡» 1@property(nonatomic,readonly) NSUInteger tapCount; è®°å½•äº†è§¦æ‘¸äº‹ä»¶äº§ç”Ÿæˆ–å˜åŒ–æ—¶çš„æ—¶é—´ï¼Œå•ä½æ˜¯ç§’ 1@property(nonatomic,readonly) NSTimeInterval timestamp; å½“å‰è§¦æ‘¸äº‹ä»¶æ‰€å¤„çš„çŠ¶æ€ 1@property(nonatomic,readonly) UITouchPhase phase; UITouchçš„æ–¹æ³•1-(CGPoint)locationInView:(UIView *)view; è¿”å›žå€¼è¡¨ç¤ºè§¦æ‘¸åœ¨viewä¸Šçš„ä½ç½® è¿™é‡Œè¿”å›žçš„ä½ç½®æ˜¯é’ˆå¯¹viewçš„åæ ‡ç³»çš„ï¼ˆä»¥viewçš„å·¦ä¸Šè§’ä¸ºåŽŸç‚¹(0, 0)ï¼‰ è°ƒç”¨æ—¶ä¼ å…¥çš„viewå‚æ•°ä¸ºnilçš„è¯ï¼Œè¿”å›žçš„æ˜¯è§¦æ‘¸ç‚¹åœ¨UIWindowçš„ä½ç½® 1-(CGPoint)previousLocationInView:(UIView *)view; è¯¥æ–¹æ³•è®°å½•äº†å‰ä¸€ä¸ªè§¦æ‘¸ç‚¹çš„ä½ç½® UIEvent æ¯äº§ç”Ÿä¸€ä¸ªäº‹ä»¶ï¼Œå°±ä¼šäº§ç”Ÿä¸€ä¸ªUIEventå¯¹è±¡ UIEventï¼šç§°ä¸ºäº‹ä»¶å¯¹è±¡ï¼Œè®°å½•äº‹ä»¶äº§ç”Ÿçš„æ—¶åˆ»å’Œç±»åž‹ å¸¸è§å±žæ€§ äº‹ä»¶ç±»åž‹ 12@property(nonatomic,readonly) UIEventType type;@property(nonatomic,readonly) UIEventSubtype subtype; äº‹ä»¶äº§ç”Ÿçš„æ—¶é—´ 1@property(nonatomic,readonly) NSTimeInterval timestamp; UIEventè¿˜æä¾›äº†ç›¸åº”çš„æ–¹æ³•å¯ä»¥èŽ·å¾—åœ¨æŸä¸ªviewä¸Šé¢çš„è§¦æ‘¸å¯¹è±¡ï¼ˆUITouch) toucheså’Œeventå‚æ•° ä¸€æ¬¡å®Œæ•´çš„è§¦æ‘¸è¿‡ç¨‹ï¼Œä¼šç»åŽ†ä¸‰ä¸ªçŠ¶æ€ è§¦æ‘¸å¼€å§‹ 1-(void)touchBegan:(NSSet *)touches withEvent:(UIEvent *)event è§¦æ‘¸ç§»åŠ¨ 1-(void)touchMoved:(NSSet *)touches withEvent:(UIEvent *)event è§¦æ‘¸ç»“æŸ 1-(void)touchEnded:(NSSet *)touches withEvent:(UIEvent *)event è§¦æ‘¸å–æ¶ˆ 1-(void)touchCancelled:(NSSet *)touches withEvent:(UIEvent *)event 4ä¸ªè§¦æ‘¸äº‹ä»¶å¤„ç†æ–¹æ³•ä¸­ï¼Œéƒ½æœ‰NSSet toucheså’ŒUIEvent eventä¸¤ä¸ªå‚æ•° ä¸€æ¬¡å®Œæ•´çš„è§¦æ‘¸è¿‡ç¨‹ä¸­ï¼Œåªä¼šäº§ç”Ÿä¸€ä¸ªäº‹ä»¶å¯¹è±¡ï¼Œ4ä¸ªè§¦æ‘¸æ–¹æ³•éƒ½æ˜¯åŒä¸€ä¸ªeventå‚æ•° å¦‚æžœä¸¤æ ¹æ‰‹æŒ‡åŒæ—¶è§¦æ‘¸ä¸€ä¸ªviewï¼Œé‚£ä¹ˆviewåªä¼šè°ƒç”¨ä¸€æ¬¡touchesBegan:withEvent:æ–¹æ³•ï¼Œtoucheså‚æ•°ä¸­è£…ç€2ä¸ªUITouchå¯¹è±¡ å¦‚æžœè¿™ä¸¤æ ¹æ‰‹æŒ‡ä¸€å‰ä¸€åŽåˆ†å¼€è§¦æ‘¸åŒä¸€ä¸ªviewï¼Œé‚£ä¹ˆviewä¼šåˆ†åˆ«è°ƒç”¨2æ¬¡touchesBegan:withEvent:æ–¹æ³•ï¼Œå¹¶ä¸”æ¯æ¬¡è°ƒç”¨æ—¶çš„toucheså‚æ•°ä¸­åªåŒ…å«ä¸€ä¸ªUITouchå¯¹è±¡ æ ¹æ®touchesä¸­UITouchçš„ä¸ªæ•°å¯ä»¥åˆ¤æ–­å‡ºæ˜¯å•ç‚¹è§¦æ‘¸è¿˜æ˜¯å¤šç‚¹è§¦æ‘¸ äº‹ä»¶äº§ç”Ÿå’Œä¼ é€’ å‘ç”Ÿè§¦æ‘¸äº‹ä»¶åŽï¼Œç³»ç»Ÿä¼šå°†è¯¥äº‹ä»¶åŠ å…¥åˆ°ä¸€ä¸ªç”±UIApplicationç®¡ç†çš„äº‹ä»¶é˜Ÿåˆ—ä¸­ UIApplicationä¼šä»Žäº‹ä»¶é˜Ÿåˆ—ä¸­å–å‡ºæœ€å‰é¢çš„äº‹ä»¶ï¼Œå¹¶å°†äº‹ä»¶åˆ†å‘ä¸‹åŽ»ä»¥ä¾¿å¤„ç†ï¼Œé€šå¸¸ï¼Œå…ˆå‘é€äº‹ä»¶ç»™åº”ç”¨ç¨‹åºçš„ä¸»çª—å£ï¼ˆkeyWindowï¼‰ ä¸»çª—å£ä¼šåœ¨è§†å›¾å±‚æ¬¡ç»“æž„ä¸­æ‰¾åˆ°ä¸€ä¸ªæœ€åˆé€‚çš„è§†å›¾æ¥å¤„ç†è§¦æ‘¸äº‹ä»¶ï¼Œè¿™ä¹Ÿæ˜¯æ•´ä¸ªäº‹ä»¶å¤„ç†è¿‡ç¨‹çš„ç¬¬ä¸€æ­¥ æ‰¾åˆ°åˆé€‚çš„è§†å›¾æŽ§ä»¶åŽï¼Œå°±ä¼šè°ƒç”¨è§†å›¾æŽ§ä»¶çš„touchesæ–¹æ³•æ¥ä½œå…·ä½“çš„äº‹ä»¶å¤„ç† touchesBeganâ€¦ touchesMovedâ€¦ touchedEndedâ€¦ å¦‚æžœçˆ¶æŽ§ä»¶ä¸èƒ½æŽ¥æ”¶è§¦æ‘¸äº‹ä»¶ï¼Œé‚£ä¹ˆå­æŽ§ä»¶å°±ä¸å¯èƒ½æŽ¥æ”¶åˆ°è§¦æ‘¸äº‹ä»¶ UIViewä¸æŽ¥æ”¶è§¦æ‘¸äº‹ä»¶çš„ä¸‰ç§æƒ…å†µï¼š ä¸æŽ¥æ”¶ç”¨æˆ·äº¤äº’ userInteractionEnabled = NO éšè— hidden = YES é€æ˜Ž alpha = 0.0 ~ 0.01 æç¤ºï¼šUIImageViewçš„userInteractionEnabledé»˜è®¤å°±æ˜¯NOï¼Œå› æ­¤UIImageViewä»¥åŠå®ƒçš„å­æŽ§ä»¶é»˜è®¤æ˜¯ä¸èƒ½æŽ¥æ”¶è§¦æ‘¸äº‹ä»¶çš„ å“åº”è€…é“¾æ¡ å“åº”è€…é“¾æ¡ï¼šæ˜¯ç”±å¤šä¸ªå“åº”è€…å¯¹è±¡è¿žæŽ¥èµ·æ¥çš„é“¾æ¡ ä½œç”¨ï¼šèƒ½å¾ˆæ¸…æ¥šçš„çœ‹è§æ¯ä¸ªå“åº”è€…ä¹‹é—´çš„è”ç³»ï¼Œå¹¶ä¸”å¯ä»¥è®©ä¸€ä¸ªäº‹ä»¶å¤šä¸ªå¯¹è±¡å¤„ç†ã€‚ å“åº”è€…å¯¹è±¡ï¼šèƒ½å¤„ç†äº‹ä»¶çš„å¯¹è±¡ å“åº”è€…é“¾æ¡ç¤ºæ„å›¾ äº‹ä»¶ä¼ é€’çš„å®Œæ•´è¿‡ç¨‹ å…ˆå°†äº‹ä»¶å¯¹è±¡ç”±ä¸Šå¾€ä¸‹ä¼ é€’(ç”±çˆ¶æŽ§ä»¶ä¼ é€’ç»™å­æŽ§ä»¶)ï¼Œæ‰¾åˆ°æœ€åˆé€‚çš„æŽ§ä»¶æ¥å¤„ç†è¿™ä¸ªäº‹ä»¶ã€‚ è°ƒç”¨æœ€åˆé€‚æŽ§ä»¶çš„touchesâ€¦.æ–¹æ³• å¦‚æžœè°ƒç”¨äº†[super touchesâ€¦.];å°±ä¼šå°†äº‹ä»¶é¡ºç€å“åº”è€…é“¾æ¡å¾€ä¸Šä¼ é€’ï¼Œä¼ é€’ç»™ä¸Šä¸€ä¸ªå“åº”è€… æŽ¥ç€å°±ä¼šè°ƒç”¨ä¸Šä¸€ä¸ªå“åº”è€…çš„touchesâ€¦.æ–¹æ³• å¦‚ä½•åˆ¤æ–­ä¸Šä¸€ä¸ªå“åº”è€… å¦‚æžœå½“å‰è¿™ä¸ªviewæ˜¯æŽ§åˆ¶å™¨çš„view,é‚£ä¹ˆæŽ§åˆ¶å™¨å°±æ˜¯ä¸Šä¸€ä¸ªå“åº”è€… å¦‚æžœå½“å‰è¿™ä¸ªviewä¸æ˜¯æŽ§åˆ¶å™¨çš„view,é‚£ä¹ˆçˆ¶æŽ§ä»¶å°±æ˜¯ä¸Šä¸€ä¸ªå“åº”è€… å“åº”è€…é“¾çš„äº‹ä»¶ä¼ é€’è¿‡ç¨‹ å¦‚æžœviewçš„æŽ§åˆ¶å™¨å­˜åœ¨ï¼Œå°±ä¼ é€’ç»™æŽ§åˆ¶å™¨ï¼›å¦‚æžœæŽ§åˆ¶å™¨ä¸å­˜åœ¨ï¼Œåˆ™å°†å…¶ä¼ é€’ç»™å®ƒçš„çˆ¶è§†å›¾ åœ¨è§†å›¾å±‚æ¬¡ç»“æž„çš„æœ€é¡¶çº§è§†å›¾ï¼Œå¦‚æžœä¹Ÿä¸èƒ½å¤„ç†æ”¶åˆ°çš„äº‹ä»¶æˆ–æ¶ˆæ¯ï¼Œåˆ™å…¶å°†äº‹ä»¶æˆ–æ¶ˆæ¯ä¼ é€’ç»™windowå¯¹è±¡è¿›è¡Œå¤„ç† å¦‚æžœwindowå¯¹è±¡ä¹Ÿä¸å¤„ç†ï¼Œåˆ™å…¶å°†äº‹ä»¶æˆ–æ¶ˆæ¯ä¼ é€’ç»™UIApplicationå¯¹è±¡ å¦‚æžœUIApplicationä¹Ÿä¸èƒ½å¤„ç†è¯¥äº‹ä»¶æˆ–æ¶ˆæ¯ï¼Œåˆ™å°†å…¶ä¸¢å¼ƒ æ‰‹åŠ¿è¯†åˆ« ä¸ºäº†å®Œæˆæ‰‹åŠ¿è¯†åˆ«ï¼Œå¿…é¡»å€ŸåŠ©äºŽæ‰‹åŠ¿è¯†åˆ«å™¨â€”-UIGestureRecognizer;åˆ©ç”¨UIGestureRecognizerï¼Œèƒ½è½»æ¾è¯†åˆ«ç”¨æˆ·åœ¨æŸä¸ªviewä¸Šé¢åšçš„ä¸€äº›å¸¸è§æ‰‹åŠ¿ UIGestureRecognizeræ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®šä¹‰äº†æ‰€æœ‰æ‰‹åŠ¿çš„åŸºæœ¬è¡Œä¸ºï¼Œä½¿ç”¨å®ƒçš„å­ç±»æ‰èƒ½å¤„ç†å…·ä½“çš„æ‰‹åŠ¿ UITapGestureRecognizer(æ•²å‡») UIPinchGestureRecognizer(æåˆï¼Œç”¨äºŽç¼©æ”¾) UIPanGestureRecognizer(æ‹–æ‹½) UISwipeGestureRecognizer(è½»æ‰«) UIRotationGestureRecognizer(æ—‹è½¬) UILongPressGestureRecognizer(é•¿æŒ‰) æ¯ä¸€ä¸ªæ‰‹åŠ¿è¯†åˆ«å™¨çš„ç”¨æ³•éƒ½å·®ä¸å¤šï¼Œæ¯”å¦‚UITapGestureRecognizerçš„ä½¿ç”¨æ­¥éª¤å¦‚ä¸‹ï¼š åˆ›å»ºæ‰‹åŠ¿è¯†åˆ«å™¨å¯¹è±¡ 1UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] init]; è®¾ç½®æ‰‹åŠ¿è¯†åˆ«å™¨å¯¹è±¡çš„å…·ä½“å±žæ€§ 1234// è¿žç»­æ•²å‡»2æ¬¡tap.numberOfTapsRequired = 2;// éœ€è¦2æ ¹æ‰‹æŒ‡ä¸€èµ·æ•²å‡»tap.numberOfTouchesRequired = 2; æ·»åŠ æ‰‹åŠ¿è¯†åˆ«å™¨åˆ°å¯¹åº”çš„viewä¸Š 1[self.iconView addGestureRecognizer:tap]; ç›‘å¬æ‰‹åŠ¿çš„è§¦å‘ 1[tap addTarget:self action:@selector(tapIconView:)]; æ‰‹åŠ¿è¯†åˆ«çš„çŠ¶æ€ 12345678910111213141516typedef NS_ENUM(NSInteger, UIGestureRecognizerState) &#123; // æ²¡æœ‰è§¦æ‘¸äº‹ä»¶å‘ç”Ÿï¼Œæ‰€æœ‰æ‰‹åŠ¿è¯†åˆ«çš„é»˜è®¤çŠ¶æ€ UIGestureRecognizerStatePossible, // ä¸€ä¸ªæ‰‹åŠ¿å·²ç»å¼€å§‹ä½†å°šæœªæ”¹å˜æˆ–è€…å®Œæˆæ—¶ UIGestureRecognizerStateBegan, // æ‰‹åŠ¿çŠ¶æ€æ”¹å˜ UIGestureRecognizerStateChanged, // æ‰‹åŠ¿å®Œæˆ UIGestureRecognizerStateEnded, // æ‰‹åŠ¿å–æ¶ˆï¼Œæ¢å¤è‡³PossibleçŠ¶æ€ UIGestureRecognizerStateCancelled, // æ‰‹åŠ¿å¤±è´¥ï¼Œæ¢å¤è‡³PossibleçŠ¶æ€ UIGestureRecognizerStateFailed, // è¯†åˆ«åˆ°æ‰‹åŠ¿è¯†åˆ« UIGestureRecognizerStateRecognized = UIGestureRecognizerStateEnded&#125;;]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå¼€å‘ä¹‹æ ¸å¿ƒåŠ¨ç”»]]></title>
    <url>%2F2016%2F04%2F27%2FiOS%E5%BC%80%E5%8F%91%E4%B9%8B%E6%A0%B8%E5%BF%83%E5%8A%A8%E7%94%BB%2F</url>
    <content type="text"><![CDATA[Core Animation,ä¸­æ–‡ç¿»è¯‘ä¸ºæ ¸å¿ƒåŠ¨ç”»,å®ƒæ˜¯ä¸€ç»„éžå¸¸å¼ºå¤§çš„åŠ¨ç”»å¤„ç†API,ä½¿ç”¨å®ƒèƒ½åšå‡ºéžå¸¸ç»šä¸½çš„åŠ¨ç”»æ•ˆæžœ,è€Œä¸”å¾€å¾€äº‹åŠåŠŸå€.ä¹Ÿå°±æ˜¯è¯´,ä½¿ç”¨å°‘é‡çš„ä»£ç å°±å¯ä»¥å®žçŽ°éžå¸¸å¼ºå¤§çš„åŠŸèƒ½. Core Animationçš„åŠ¨ç”»æ‰§è¡Œè¿‡ç¨‹éƒ½æ˜¯åœ¨åŽå°æ“ä½œçš„,ä¸ä¼šé˜»å¡žä¸»çº¿ç¨‹ Core Animationæ˜¯ç›´æŽ¥ä½œç”¨åœ¨CALayerä¸Šçš„,å¹¶éžUIView æ‰€ä»¥åœ¨äº†è§£Core Animationä¹‹å‰,å…ˆè¦äº†è§£ä»€ä¹ˆæ˜¯CALayer CALayer åœ¨iOSä¸­,ä½ èƒ½çœ‹å¾—è§æ‘¸å¾—ç€çš„ä¸œè¥¿åŸºæœ¬ä¸Šéƒ½æ˜¯UIView,æ¯”å¦‚:æŒ‰é’®,æ–‡æœ¬æ ‡ç­¾ç­‰ç­‰;å…¶å®žUIViewä¹‹æ‰€ä»¥èƒ½æ˜¾ç¤ºåœ¨å±å¹•ä¸Š,å®Œå…¨æ˜¯å› ä¸ºå®ƒå†…éƒ¨çš„ä¸€ä¸ªå›¾å±‚ åœ¨åˆ›å»ºUIViewå¯¹è±¡æ—¶,UIViewå†…éƒ¨ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªå›¾å±‚(å³CALayerå¯¹è±¡),é€šè¿‡UIViewçš„layerå±žæ€§å¯ä»¥è®¿é—®è¿™ä¸ªå±‚ 12345678910111213141516171819202122232425@property(nonatomic,readonly,retain) CALayer *layer; ``` - å½“UIViewéœ€è¦æ˜¾ç¤ºåˆ°å±å¹•ä¸Šæ—¶ï¼Œä¼šè°ƒç”¨drawRect:æ–¹æ³•è¿›è¡Œç»˜å›¾ï¼Œå¹¶ä¸”ä¼šå°†æ‰€æœ‰å†…å®¹ç»˜åˆ¶åœ¨è‡ªå·±çš„å›¾å±‚ä¸Šï¼Œç»˜å›¾å®Œæ¯•åŽï¼Œç³»ç»Ÿä¼šå°†å›¾å±‚æ‹·è´åˆ°å±å¹•ä¸Šï¼ŒäºŽæ˜¯å°±å®Œæˆäº†UIViewçš„æ˜¾ç¤º;UIViewæœ¬èº«ä¸å…·å¤‡æ˜¾ç¤ºçš„åŠŸèƒ½ï¼Œæ˜¯å®ƒå†…éƒ¨çš„å±‚æ‰æœ‰æ˜¾ç¤ºåŠŸèƒ½- CALayerçš„ä¸€äº›å±žæ€§```objc//å®½åº¦å’Œé«˜åº¦@property CGRect bounds;//ä½ç½®(é»˜è®¤æŒ‡ä¸­ç‚¹ï¼Œå…·ä½“ç”±anchorPointå†³å®š)@property CGPoint position;//é”šç‚¹(x,yçš„èŒƒå›´éƒ½æ˜¯0-1)ï¼Œå†³å®šäº†positionçš„å«ä¹‰@property CGPoint anchorPoint;//èƒŒæ™¯é¢œè‰²(CGColorRefç±»åž‹)@property CGColorRef backgroundColor;//å½¢å˜å±žæ€§@property CATransform3D transform;//è¾¹æ¡†é¢œè‰²(CGColorRefç±»åž‹)@property CGColorRef borderColor;//è¾¹æ¡†å®½åº¦@property CGFloat borderWidth;//åœ†è§’åŠå¾„@property CGColorRef borderColor;//å†…å®¹(æ¯”å¦‚è®¾ç½®ä¸ºå›¾ç‰‡CGImageRef)@property(retain) id contents; UIViewå’ŒCALayerçš„é€‰æ‹© é€šè¿‡CALayerï¼Œå°±èƒ½åšå‡ºè·ŸUIImageViewä¸€æ ·çš„ç•Œé¢æ•ˆæžœæ—¢ç„¶CALayerå’ŒUIViewéƒ½èƒ½å®žçŽ°ç›¸åŒçš„æ˜¾ç¤ºæ•ˆæžœï¼Œé‚£ç©¶ç«Ÿè¯¥é€‰æ‹©è°å¥½å‘¢ï¼Ÿå…¶å®žï¼Œå¯¹æ¯”CALayerï¼ŒUIViewå¤šäº†ä¸€ä¸ªäº‹ä»¶å¤„ç†çš„åŠŸèƒ½ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒCALayerä¸èƒ½å¤„ç†ç”¨æˆ·çš„è§¦æ‘¸äº‹ä»¶ï¼Œè€ŒUIViewå¯ä»¥.æ‰€ä»¥ï¼Œå¦‚æžœæ˜¾ç¤ºå‡ºæ¥çš„ä¸œè¥¿éœ€è¦è·Ÿç”¨æˆ·è¿›è¡Œäº¤äº’çš„è¯ï¼Œç”¨UIViewï¼›å¦‚æžœä¸éœ€è¦è·Ÿç”¨æˆ·è¿›è¡Œäº¤äº’ï¼Œç”¨UIViewæˆ–è€…CALayeréƒ½å¯ä»¥.å½“ç„¶ï¼ŒCALayerçš„æ€§èƒ½ä¼šé«˜ä¸€äº›ï¼Œå› ä¸ºå®ƒå°‘äº†äº‹ä»¶å¤„ç†çš„åŠŸèƒ½ï¼Œæ›´åŠ è½»é‡çº§. positionå’ŒanchorPoint 1@property CGPoint position; ç”¨æ¥è®¾ç½®CALayeråœ¨çˆ¶å±‚ä¸­çš„ä½ç½® ä»¥çˆ¶å±‚çš„å·¦ä¸Šè§’ä¸ºåŽŸç‚¹(0, 0) 1@property CGPoint anchorPoint; ç§°ä¸ºâ€œå®šä½ç‚¹â€ã€â€œé”šç‚¹â€ å†³å®šç€CALayerèº«ä¸Šçš„å“ªä¸ªç‚¹ä¼šåœ¨positionå±žæ€§æ‰€æŒ‡çš„ä½ç½® ä»¥è‡ªå·±çš„å·¦ä¸Šè§’ä¸ºåŽŸç‚¹(0, 0) å®ƒçš„xã€yå–å€¼èŒƒå›´éƒ½æ˜¯0~1ï¼Œé»˜è®¤å€¼ä¸ºï¼ˆ0.5, 0.5ï¼‰ éšå¼åŠ¨ç”» æ¯ä¸€ä¸ªUIViewå†…éƒ¨éƒ½é»˜è®¤å…³è”ç€ä¸€ä¸ªCALayerï¼Œæˆ‘ä»¬å¯ç”¨ç§°è¿™ä¸ªLayerä¸ºRoot Layerï¼ˆæ ¹å±‚ï¼‰ æ‰€æœ‰çš„éžRoot Layerï¼Œä¹Ÿå°±æ˜¯æ‰‹åŠ¨åˆ›å»ºçš„CALayerå¯¹è±¡ï¼Œéƒ½å­˜åœ¨ç€éšå¼åŠ¨ç”» ä»€ä¹ˆæ˜¯éšå¼åŠ¨ç”»ï¼Ÿ å½“å¯¹éžRoot Layerçš„éƒ¨åˆ†å±žæ€§è¿›è¡Œä¿®æ”¹æ—¶ï¼Œé»˜è®¤ä¼šè‡ªåŠ¨äº§ç”Ÿä¸€äº›åŠ¨ç”»æ•ˆæžœ è€Œè¿™äº›å±žæ€§ç§°ä¸ºAnimatable Properties(å¯åŠ¨ç”»å±žæ€§) åˆ—ä¸¾å‡ ä¸ªå¸¸è§çš„Animatable Propertiesï¼š boundsï¼šç”¨äºŽè®¾ç½®CALayerçš„å®½åº¦å’Œé«˜åº¦ã€‚ä¿®æ”¹è¿™ä¸ªå±žæ€§ä¼šäº§ç”Ÿç¼©æ”¾åŠ¨ç”» backgroundColorï¼šç”¨äºŽè®¾ç½®CALayerçš„èƒŒæ™¯è‰²ã€‚ä¿®æ”¹è¿™ä¸ªå±žæ€§ä¼šäº§ç”ŸèƒŒæ™¯è‰²çš„æ¸å˜åŠ¨ç”» positionï¼šç”¨äºŽè®¾ç½®CALayerçš„ä½ç½®ã€‚ä¿®æ”¹è¿™ä¸ªå±žæ€§ä¼šäº§ç”Ÿå¹³ç§»åŠ¨ç”» å¯ä»¥é€šè¿‡åŠ¨ç”»äº‹åŠ¡(CATransaction)å…³é—­é»˜è®¤çš„éšå¼åŠ¨ç”»æ•ˆæžœ 1234[CATransaction begin];[CATransaction setDisableActions:YES];self.myview.layer.position = CGPointMake(10, 10);[CATransaction commit]; Core Animation æ ¸å¿ƒåŠ¨ç”»ä¸­æ‰€æœ‰ç±»éƒ½éµå®ˆCAMediaTiming CAAnaimationæ˜¯ä¸ªæŠ½è±¡ç±»ï¼Œä¸å…·å¤‡åŠ¨ç”»æ•ˆæžœï¼Œå¿…é¡»ç”¨å®ƒçš„å­ç±»æ‰æœ‰åŠ¨ç”»æ•ˆæžœ CAAnimationGroupå’ŒCATransitionæ‰æœ‰åŠ¨ç”»æ•ˆæžœ CAAnimationGroupæ˜¯ä¸ªåŠ¨ç”»ç»„ï¼Œå¯ä»¥åŒæ—¶è¿›è¡Œç¼©æ”¾ï¼Œæ—‹è½¬ã€‚ CATransitionæ˜¯è½¬åœºåŠ¨ç”»ï¼Œç•Œé¢ä¹‹é—´è·³è½¬éƒ½å¯ä»¥ç”¨è½¬åœºåŠ¨ç”»ã€‚ CAPropertyAnimationä¹Ÿæ˜¯ä¸ªæŠ½è±¡ç±»ï¼Œæœ¬èº«ä¸å…·å¤‡åŠ¨ç”»æ•ˆæžœï¼Œåªæœ‰å­ç±»æ‰æœ‰ CABasicAnimationå’ŒCAKeyframeAnimation CABasicAnimationåŸºæœ¬åŠ¨ç”»ï¼Œåšä¸€äº›ç®€å•æ•ˆæžœ CAKeyframeAnimationå¸§åŠ¨ç”»ï¼Œåšä¸€äº›è¿žç»­çš„æµç•…çš„åŠ¨ç”» å¼€å‘æ­¥éª¤ å¦‚æžœä¸æ˜¯xcode5ä¹‹åŽçš„ç‰ˆæœ¬ï¼Œä½¿ç”¨å®ƒéœ€è¦å…ˆæ·»QuartzCore.frameworkå’Œå¼•å…¥å¯¹åº”çš„æ¡†æž¶ é¦–å…ˆå¾—æœ‰CALayer åˆå§‹åŒ–ä¸€ä¸ªCAAnimationå¯¹è±¡ï¼Œå¹¶è®¾ç½®ä¸€äº›åŠ¨ç”»ç›¸å…³å±žæ€§ é€šè¿‡è°ƒç”¨CALayerçš„addAnimation:forKey:æ–¹æ³•ï¼Œå¢žåŠ CAAnimationå¯¹è±¡åˆ°CALayerä¸­ï¼Œè¿™æ ·å°±èƒ½å¼€å§‹æ‰§è¡ŒåŠ¨ç”»äº† é€šè¿‡è°ƒç”¨CALayerçš„removeAnimationForKey:æ–¹æ³•å¯ä»¥åœæ­¢CALayerä¸­çš„åŠ¨ç”» CAAnimation ç®€ä»‹ æ˜¯æ‰€æœ‰åŠ¨ç”»å¯¹è±¡çš„çˆ¶ç±»ï¼Œè´Ÿè´£æŽ§åˆ¶åŠ¨ç”»çš„æŒç»­æ—¶é—´å’Œé€Ÿåº¦ï¼Œæ˜¯ä¸ªæŠ½è±¡ç±»ï¼Œä¸èƒ½ç›´æŽ¥ä½¿ç”¨ï¼Œåº”è¯¥ä½¿ç”¨å®ƒå…·ä½“çš„å­ç±» å±žæ€§è¯´æ˜Žï¼š(çº¢è‰²ä»£è¡¨æ¥è‡ªCAMediaTimingåè®®çš„å±žæ€§) durationï¼šåŠ¨ç”»çš„æŒç»­æ—¶é—´ repeatCountï¼šé‡å¤æ¬¡æ•°ï¼Œæ— é™å¾ªçŽ¯å¯ä»¥è®¾ç½®HUGE_VALFæˆ–è€…MAXFLOAT repeatDurationï¼šé‡å¤æ—¶é—´ removedOnCompletionï¼šé»˜è®¤ä¸ºYESï¼Œä»£è¡¨åŠ¨ç”»æ‰§è¡Œå®Œæ¯•åŽå°±ä»Žå›¾å±‚ä¸Šç§»é™¤ï¼Œå›¾å½¢ä¼šæ¢å¤åˆ°åŠ¨ç”»æ‰§è¡Œå‰çš„çŠ¶æ€ã€‚å¦‚æžœæƒ³è®©å›¾å±‚ä¿æŒæ˜¾ç¤ºåŠ¨ç”»æ‰§è¡ŒåŽçš„çŠ¶æ€ï¼Œé‚£å°±è®¾ç½®ä¸ºNOï¼Œä¸è¿‡è¿˜è¦è®¾ç½®fillModeä¸ºkCAFillModeForwards fillModeï¼šå†³å®šå½“å‰å¯¹è±¡åœ¨éžactiveæ—¶é—´æ®µçš„è¡Œä¸ºã€‚æ¯”å¦‚åŠ¨ç”»å¼€å§‹ä¹‹å‰æˆ–è€…åŠ¨ç”»ç»“æŸä¹‹åŽ beginTimeï¼šå¯ä»¥ç”¨æ¥è®¾ç½®åŠ¨ç”»å»¶è¿Ÿæ‰§è¡Œæ—¶é—´ï¼Œè‹¥æƒ³å»¶è¿Ÿ2sï¼Œå°±è®¾ç½®ä¸ºCACurrentMediaTime()+2ï¼ŒCACurrentMediaTime()ä¸ºå›¾å±‚çš„å½“å‰æ—¶é—´ timingFunctionï¼šé€Ÿåº¦æŽ§åˆ¶å‡½æ•°ï¼ŒæŽ§åˆ¶åŠ¨ç”»è¿è¡Œçš„èŠ‚å¥ delegateï¼šåŠ¨ç”»ä»£ç† 12345678910#pragma mark æš‚åœCALayerçš„åŠ¨ç”»-(void)pauseLayer:(CALayer*)layer&#123; CFTimeInterval pausedTime = [layer convertTime:CACurrentMediaTime() fromLayer:nil]; // è®©CALayerçš„æ—¶é—´åœæ­¢èµ°åŠ¨ layer.speed = 0.0; // è®©CALayerçš„æ—¶é—´åœç•™åœ¨pausedTimeè¿™ä¸ªæ—¶åˆ» layer.timeOffset = pausedTime;&#125; 12345678910111213141516#pragma mark æ¢å¤CALayerçš„åŠ¨ç”»-(void)resumeLayer:(CALayer*)layer&#123; CFTimeInterval pausedTime = layer.timeOffset; // 1. è®©CALayerçš„æ—¶é—´ç»§ç»­è¡Œèµ° layer.speed = 1.0; // 2. å–æ¶ˆä¸Šæ¬¡è®°å½•çš„åœç•™æ—¶åˆ» layer.timeOffset = 0.0; // 3. å–æ¶ˆä¸Šæ¬¡è®¾ç½®çš„æ—¶é—´ layer.beginTime = 0.0; // 4. è®¡ç®—æš‚åœçš„æ—¶é—´(è¿™é‡Œä¹Ÿå¯ä»¥ç”¨CACurrentMediaTime()-pausedTime) CFTimeInterval timeSincePause = [layer convertTime:CACurrentMediaTime() fromLayer:nil] - pausedTime; // 5. è®¾ç½®ç›¸å¯¹äºŽçˆ¶åæ ‡ç³»çš„å¼€å§‹æ—¶é—´(å¾€åŽé€€timeSincePause) layer.beginTime = timeSincePause;&#125; åŠ¨ç”»å¡«å……æ¨¡å¼ fillModeå±žæ€§å€¼ï¼ˆè¦æƒ³fillModeæœ‰æ•ˆï¼Œæœ€å¥½è®¾ç½®removedOnCompletion = NOï¼‰ kCAFillModeRemoved è¿™ä¸ªæ˜¯é»˜è®¤å€¼ï¼Œä¹Ÿå°±æ˜¯è¯´å½“åŠ¨ç”»å¼€å§‹å‰å’ŒåŠ¨ç”»ç»“æŸåŽï¼ŒåŠ¨ç”»å¯¹layeréƒ½æ²¡æœ‰å½±å“ï¼ŒåŠ¨ç”»ç»“æŸåŽï¼Œlayerä¼šæ¢å¤åˆ°ä¹‹å‰çš„çŠ¶æ€ kCAFillModeForwards å½“åŠ¨ç”»ç»“æŸåŽï¼Œlayerä¼šä¸€ç›´ä¿æŒç€åŠ¨ç”»æœ€åŽçš„çŠ¶æ€ kCAFillModeBackwards åœ¨åŠ¨ç”»å¼€å§‹å‰ï¼Œåªéœ€è¦å°†åŠ¨ç”»åŠ å…¥äº†ä¸€ä¸ªlayerï¼Œlayerä¾¿ç«‹å³è¿›å…¥åŠ¨ç”»çš„åˆå§‹çŠ¶æ€å¹¶ç­‰å¾…åŠ¨ç”»å¼€å§‹ã€‚ kCAFillModeBoth è¿™ä¸ªå…¶å®žå°±æ˜¯ä¸Šé¢ä¸¤ä¸ªçš„åˆæˆ.åŠ¨ç”»åŠ å…¥åŽå¼€å§‹ä¹‹å‰ï¼Œlayerä¾¿å¤„äºŽåŠ¨ç”»åˆå§‹çŠ¶æ€ï¼ŒåŠ¨ç”»ç»“æŸåŽlayerä¿æŒåŠ¨ç”»æœ€åŽçš„çŠ¶æ€ é€Ÿåº¦æŽ§åˆ¶å‡½æ•° é€Ÿåº¦æŽ§åˆ¶å‡½æ•°(CAMediaTimingFunction) kCAMediaTimingFunctionLinearï¼ˆçº¿æ€§ï¼‰ï¼šåŒ€é€Ÿï¼Œç»™ä½ ä¸€ä¸ªç›¸å¯¹é™æ€çš„æ„Ÿè§‰ kCAMediaTimingFunctionEaseInï¼ˆæ¸è¿›ï¼‰ï¼šåŠ¨ç”»ç¼“æ…¢è¿›å…¥ï¼Œç„¶åŽåŠ é€Ÿç¦»å¼€ kCAMediaTimingFunctionEaseOutï¼ˆæ¸å‡ºï¼‰ï¼šåŠ¨ç”»å…¨é€Ÿè¿›å…¥ï¼Œç„¶åŽå‡é€Ÿçš„åˆ°è¾¾ç›®çš„åœ° kCAMediaTimingFunctionEaseInEaseOutï¼ˆæ¸è¿›æ¸å‡ºï¼‰ï¼šåŠ¨ç”»ç¼“æ…¢çš„è¿›å…¥ï¼Œä¸­é—´åŠ é€Ÿï¼Œç„¶åŽå‡é€Ÿçš„åˆ°è¾¾ç›®çš„åœ°ã€‚è¿™ä¸ªæ˜¯é»˜è®¤çš„åŠ¨ç”»è¡Œä¸ºã€‚ åŠ¨ç”»ä»£ç†æ–¹æ³• 1234567891011121314@interface NSObject (CAAnimationDelegate)/* Called when the animation begins its active duration. */- (void)animationDidStart:(CAAnimation *)anim;/* Called when the animation either completes its active duration or * is removed from the object it is attached to (i.e. the layer). 'flag' * is true if the animation reached the end of its active duration * without being removed. */- (void)animationDidStop:(CAAnimation *)anim finished:(BOOL)flag;@end 1. CAPropertyAnimation æ˜¯CAAnimationçš„å­ç±»ï¼Œä¹Ÿæ˜¯ä¸ªæŠ½è±¡ç±»ï¼Œè¦æƒ³åˆ›å»ºåŠ¨ç”»å¯¹è±¡ï¼Œåº”è¯¥ä½¿ç”¨å®ƒçš„ä¸¤ä¸ªå­ç±»ï¼š CABasicAnimation CAKeyframeAnimation å±žæ€§è¯´æ˜Žï¼š keyPathï¼šé€šè¿‡æŒ‡å®šCALayerçš„ä¸€ä¸ªå±žæ€§åç§°ä¸ºkeyPathï¼ˆNSStringç±»åž‹ï¼‰ï¼Œå¹¶ä¸”å¯¹CALayerçš„è¿™ä¸ªå±žæ€§çš„å€¼è¿›è¡Œä¿®æ”¹ï¼Œè¾¾åˆ°ç›¸åº”çš„åŠ¨ç”»æ•ˆæžœã€‚æ¯”å¦‚ï¼ŒæŒ‡å®š@â€œpositionâ€ä¸ºkeyPathï¼Œå°±ä¿®æ”¹CALayerçš„positionå±žæ€§çš„å€¼ï¼Œä»¥è¾¾åˆ°å¹³ç§»çš„åŠ¨ç”»æ•ˆæžœ CABasicAnimation åŸºæœ¬åŠ¨ç”»,æ˜¯CAPropertyAnimationçš„å­ç±» å±žæ€§è¯´æ˜Ž: fromValueï¼škeyPathç›¸åº”å±žæ€§çš„åˆå§‹å€¼ toValueï¼škeyPathç›¸åº”å±žæ€§çš„ç»“æŸå€¼ åŠ¨ç”»è¿‡ç¨‹è¯´æ˜Žï¼š éšç€åŠ¨ç”»çš„è¿›è¡Œï¼Œåœ¨é•¿åº¦ä¸ºdurationçš„æŒç»­æ—¶é—´å†…ï¼ŒkeyPathç›¸åº”å±žæ€§çš„å€¼ä»ŽfromValueæ¸æ¸åœ°å˜ä¸ºtoValue keyPathå†…å®¹æ˜¯CALayerçš„å¯åŠ¨ç”»Animatableå±žæ€§ å¦‚æžœfillMode=kCAFillModeForwardsåŒæ—¶removedOnComletion=NOï¼Œé‚£ä¹ˆåœ¨åŠ¨ç”»æ‰§è¡Œå®Œæ¯•åŽï¼Œå›¾å±‚ä¼šä¿æŒæ˜¾ç¤ºåŠ¨ç”»æ‰§è¡ŒåŽçš„çŠ¶æ€ã€‚ä½†åœ¨å®žè´¨ä¸Šï¼Œå›¾å±‚çš„å±žæ€§å€¼è¿˜æ˜¯åŠ¨ç”»æ‰§è¡Œå‰çš„åˆå§‹å€¼ï¼Œå¹¶æ²¡æœ‰çœŸæ­£è¢«æ”¹å˜ã€‚ å…³é”®å¸§åŠ¨ç”» å…³é”®å¸§åŠ¨ç”»ï¼Œä¹Ÿæ˜¯CAPropertyAnimationçš„å­ç±»ï¼Œä¸ŽCABasicAnimationçš„åŒºåˆ«æ˜¯ï¼š CABasicAnimationåªèƒ½ä»Žä¸€ä¸ªæ•°å€¼ï¼ˆfromValueï¼‰å˜åˆ°å¦ä¸€ä¸ªæ•°å€¼ï¼ˆtoValueï¼‰ï¼Œè€ŒCAKeyframeAnimationä¼šä½¿ç”¨ä¸€ä¸ªNSArrayä¿å­˜è¿™äº›æ•°å€¼ å±žæ€§è¯´æ˜Žï¼š valuesï¼šä¸Šè¿°çš„NSArrayå¯¹è±¡ã€‚é‡Œé¢çš„å…ƒç´ ç§°ä¸ºâ€œå…³é”®å¸§â€(keyframe)ã€‚åŠ¨ç”»å¯¹è±¡ä¼šåœ¨æŒ‡å®šçš„æ—¶é—´ï¼ˆdurationï¼‰å†…ï¼Œä¾æ¬¡æ˜¾ç¤ºvaluesæ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…³é”®å¸§ pathï¼šå¯ä»¥è®¾ç½®ä¸€ä¸ªCGPathRefã€CGMutablePathRefï¼Œè®©å›¾å±‚æŒ‰ç…§è·¯å¾„è½¨è¿¹ç§»åŠ¨ã€‚pathåªå¯¹CALayerçš„anchorPointå’Œpositionèµ·ä½œç”¨ã€‚å¦‚æžœè®¾ç½®äº†pathï¼Œé‚£ä¹ˆvalueså°†è¢«å¿½ç•¥ keyTimesï¼šå¯ä»¥ä¸ºå¯¹åº”çš„å…³é”®å¸§æŒ‡å®šå¯¹åº”çš„æ—¶é—´ç‚¹ï¼Œå…¶å–å€¼èŒƒå›´ä¸º0åˆ°1.0ï¼ŒkeyTimesä¸­çš„æ¯ä¸€ä¸ªæ—¶é—´å€¼éƒ½å¯¹åº”valuesä¸­çš„æ¯ä¸€å¸§ã€‚å¦‚æžœæ²¡æœ‰è®¾ç½®keyTimesï¼Œå„ä¸ªå…³é”®å¸§çš„æ—¶é—´æ˜¯å¹³åˆ†çš„ CABasicAnimationå¯çœ‹åšæ˜¯åªæœ‰2ä¸ªå…³é”®å¸§çš„CAKeyframeAnimation 2. CAAnimationGroup åŠ¨ç”»ç»„ï¼Œæ˜¯CAAnimationçš„å­ç±»ï¼Œå¯ä»¥ä¿å­˜ä¸€ç»„åŠ¨ç”»å¯¹è±¡ï¼Œå°†CAAnimationGroupå¯¹è±¡åŠ å…¥å±‚åŽï¼Œç»„ä¸­æ‰€æœ‰åŠ¨ç”»å¯¹è±¡å¯ä»¥åŒæ—¶å¹¶å‘è¿è¡Œ å±žæ€§è¯´æ˜Žï¼š animationsï¼šç”¨æ¥ä¿å­˜ä¸€ç»„åŠ¨ç”»å¯¹è±¡çš„NSArray é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸€ç»„åŠ¨ç”»å¯¹è±¡æ˜¯åŒæ—¶è¿è¡Œçš„ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è®¾ç½®åŠ¨ç”»å¯¹è±¡çš„beginTimeå±žæ€§æ¥æ›´æ”¹åŠ¨ç”»çš„å¼€å§‹æ—¶é—´ 3. CATransition CATransitionæ˜¯CAAnimationçš„å­ç±»ï¼Œç”¨äºŽåšè½¬åœºåŠ¨ç”»ï¼Œèƒ½å¤Ÿä¸ºå±‚æä¾›ç§»å‡ºå±å¹•å’Œç§»å…¥å±å¹•çš„åŠ¨ç”»æ•ˆæžœã€‚iOSæ¯”Mac OS Xçš„è½¬åœºåŠ¨ç”»æ•ˆæžœå°‘ä¸€ç‚¹ UINavigationControllerå°±æ˜¯é€šè¿‡CATransitionå®žçŽ°äº†å°†æŽ§åˆ¶å™¨çš„è§†å›¾æŽ¨å…¥å±å¹•çš„åŠ¨ç”»æ•ˆæžœ åŠ¨ç”»å±žæ€§: typeï¼šåŠ¨ç”»è¿‡æ¸¡ç±»åž‹ subtypeï¼šåŠ¨ç”»è¿‡æ¸¡æ–¹å‘ startProgressï¼šåŠ¨ç”»èµ·ç‚¹(åœ¨æ•´ä½“åŠ¨ç”»çš„ç™¾åˆ†æ¯”) endProgressï¼šåŠ¨ç”»ç»ˆç‚¹(åœ¨æ•´ä½“åŠ¨ç”»çš„ç™¾åˆ†æ¯”) è½¬åœºåŠ¨ç”»è¿‡æ¸¡æ•ˆæžœ ç±»åž‹å­—ç¬¦ä¸² æ•ˆæžœè¯´æ˜Ž å…³é”®å­— æ–¹å‘ fade äº¤å‰æ·¡åŒ–è¿‡æ¸¡ YES push æ–°è§†å›¾æŠŠæ—§è§†å›¾æŽ¨å‡ºåŽ» YES moveIn æ–°è§†å›¾ç§»åˆ°æ—§è§†å›¾ä¸Šé¢ YES reveal å°†æ—§è§†å›¾ç§»å¼€,æ˜¾ç¤ºä¸‹é¢çš„æ–°è§†å›¾ YES cube ç«‹æ–¹ä½“ç¿»æ»šæ•ˆæžœ oglFlip ä¸Šä¸‹å·¦å³ç¿»è½¬æ•ˆæžœ suckEffect æ”¶ç¼©æ•ˆæžœï¼Œå¦‚ä¸€å—å¸ƒè¢«æŠ½èµ° NO rippleEffect æ°´æ»´æ•ˆæžœ NO pageCurl å‘ä¸Šç¿»é¡µæ•ˆæžœ pageUnCurl å‘ä¸‹ç¿»é¡µæ•ˆæžœ facameraIrisHollowOpende ç›¸æœºé•œå¤´æ‰“å¼€æ•ˆæžœ NO cameraIrisHollowClose ç›¸æœºé•œå¤´å…³é—­æ•ˆæžœ NO ä½¿ç”¨UIViewåŠ¨ç”»å‡½æ•°å®žçŽ°è½¬åœºåŠ¨ç”»â€”â€”å•è§†å›¾ 1+ (void)transitionWithView:(UIView *)view duration:(NSTimeInterval)duration options:(UIViewAnimationOptions)options animations:(void (^)(void))animations completion:(void (^)(BOOL finished))completion; å‚æ•°è¯´æ˜Žï¼š durationï¼šåŠ¨ç”»çš„æŒç»­æ—¶é—´ viewï¼šéœ€è¦è¿›è¡Œè½¬åœºåŠ¨ç”»çš„è§†å›¾ optionsï¼šè½¬åœºåŠ¨ç”»çš„ç±»åž‹ animationsï¼šå°†æ”¹å˜è§†å›¾å±žæ€§çš„ä»£ç æ”¾åœ¨è¿™ä¸ªblockä¸­ completionï¼šåŠ¨ç”»ç»“æŸåŽï¼Œä¼šè‡ªåŠ¨è°ƒç”¨è¿™ä¸ªblock ä½¿ç”¨UIViewåŠ¨ç”»å‡½æ•°å®žçŽ°è½¬åœºåŠ¨ç”»â€”â€”åŒè§†å›¾ 1+ (void)transitionFromView:(UIView *)fromView toView:(UIView *)toView duration:(NSTimeInterval)duration options:(UIViewAnimationOptions)options completion:(void (^)(BOOL finished))completion; å‚æ•°è¯´æ˜Žï¼š durationï¼šåŠ¨ç”»çš„æŒç»­æ—¶é—´ optionsï¼šè½¬åœºåŠ¨ç”»çš„ç±»åž‹ animationsï¼šå°†æ”¹å˜è§†å›¾å±žæ€§çš„ä»£ç æ”¾åœ¨è¿™ä¸ªblockä¸­ completionï¼šåŠ¨ç”»ç»“æŸåŽï¼Œä¼šè‡ªåŠ¨è°ƒç”¨è¿™ä¸ªblock]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå¼€å‘ä¹‹æ··åˆå¼€å‘ç®€å•ä»‹ç»]]></title>
    <url>%2F2016%2F04%2F18%2FiOS%E5%BC%80%E5%8F%91%E4%B9%8B%E6%B7%B7%E5%90%88%E5%BC%80%E5%8F%91%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D%2F</url>
    <content type="text"><![CDATA[2014å¹´,åŽ†æ—¶8å¹´çš„HTMLæ ‡å‡†åˆ¶å®šå®Œæˆ.åˆ©ç”¨HTML5ç¼–å†™çš„UIç•Œé¢èƒ½è¿è¡Œåœ¨æ‰€æœ‰æ‹¥æœ‰æµè§ˆå™¨çš„å¹³å°ä¹‹ä¸Š,ä¸”å¼€å‘è¿…é€Ÿè€Œç®€å•.è¿™æ ·,æ··åˆå¼€å‘ä½¿å¾—iOSå¼€å‘å˜å¾—æ›´ç®€å•,æ›´å¿«æ· 1. Webå¼€å‘æ–°æ—¶ä»£ Web1.0 ä¸»æµæŠ€æœ¯:HTML+CSS Web2.0 ä¸»æµæŠ€æœ¯:Ajax(JavaScript/DOM/å¼‚æ­¥æ•°æ®è¯·æ±‚) Web3.0 ä¸»æµæŠ€æœ¯:HTML5+CSS3 HTML5äº®ç‚¹: Canvas\HTML5éŸ³è§†é¢‘\Webå­˜å‚¨ Geolocation \Workerså¤šçº¿ç¨‹å¤„ç† CSS3äº®ç‚¹: è®¾è®¡åŠ¨ç”»\2Då˜å½¢\Nå¤šæ–°ç‰¹æ€§ ç½‘é¡µçš„ç»„æˆ ä¸€ä¸ªæœ‰å…·ä½“åŠŸèƒ½çš„å®Œæ•´çš„ç½‘é¡µï¼Œä¸€èˆ¬ç”±3éƒ¨åˆ†ç»„æˆ HTMLç½‘é¡µçš„å…·ä½“å†…å®¹å’Œç»“æž„ CSSç½‘é¡µçš„æ ·å¼ï¼ˆç¾ŽåŒ–ç½‘é¡µæœ€é‡è¦çš„ä¸€å—ï¼‰ JavaScript(æŽŒæ¡)ç½‘é¡µçš„äº¤äº’æ•ˆæžœï¼Œæ¯”å¦‚å¯¹ç”¨æˆ·é¼ æ ‡äº‹ä»¶åšå‡ºå“åº” HTML\CSS\JavaScriptå­¦ä¹ èµ„æ–™ï¼šhttp://www.w3school.com.cn/ 2. HTML ä»€ä¹ˆæ˜¯HTML HTMLçš„å…¨ç§°æ˜¯HyperText Markup Languageï¼Œè¶…æ–‡æœ¬æ ‡è®°è¯­è¨€ å…¶å®žå®ƒå°±æ˜¯æ–‡æœ¬ï¼Œç”±æµè§ˆå™¨è´Ÿè´£å°†å®ƒè§£æžæˆå…·ä½“çš„ç½‘é¡µå†…å®¹ HTMLçš„ç»„æˆ è·ŸXMLç±»ä¼¼ï¼ŒHTMLç”±Nä¸ªæ ‡ç­¾ï¼ˆèŠ‚ç‚¹ã€å…ƒç´ ã€æ ‡è®°ï¼‰ç»„æˆ HTMLè¯­æ³•éžå¸¸æ¾æ•£ï¼Œç›®å‰çš„æœ€æ–°ç‰ˆæ˜¯5.0ï¼Œä¹Ÿå°±æ˜¯HTML 5 å¸¸è§çš„HTMLæ ‡ç­¾ æ ‡é¢˜ï¼šh1ã€h2ã€h3ã€h4ã€h5â€¦. æ®µè½ï¼šp æ¢è¡Œï¼šbr å®¹å™¨ï¼šdivã€spanï¼ˆç”¨æ¥å®¹çº³å…¶ä»–æ ‡ç­¾ï¼‰ è¡¨æ ¼ï¼štableã€trã€td åˆ—è¡¨ï¼šulã€olã€li å›¾ç‰‡ï¼šimg è¡¨å•ï¼šinput é“¾æŽ¥ï¼ša HTMLæ ‡ç­¾ç±»åž‹HTMLæœ‰Nå¤šæ ‡ç­¾ï¼Œæ ¹æ®æ˜¾ç¤ºçš„ç±»åž‹ï¼Œä¸»è¦å¯ä»¥åˆ†ä¸º3å¤§ç±» å—çº§æ ‡ç­¾ç‹¬å ä¸€è¡Œçš„æ ‡ç­¾èƒ½éšæ—¶è®¾ç½®å®½åº¦å’Œé«˜åº¦ï¼ˆæ¯”å¦‚divã€pã€h1ã€h2ã€ulã€liï¼‰ è¡Œå†…æ ‡ç­¾ï¼ˆå†…è”æ ‡ç­¾ï¼‰å¤šä¸ªè¡Œå†…æ ‡ç­¾èƒ½åŒæ—¶æ˜¾ç¤ºåœ¨ä¸€è¡Œå®½åº¦å’Œé«˜åº¦å–å†³äºŽå†…å®¹çš„å°ºå¯¸ï¼ˆæ¯”å¦‚spanã€aã€labelï¼‰ è¡Œå†…-å—çº§æ ‡ç­¾ï¼ˆå†…è”-å—çº§æ ‡ç­¾ï¼‰å¤šä¸ªè¡Œå†…-å—çº§æ ‡ç­¾å¯ä»¥æ˜¾ç¤ºåœ¨åŒä¸€è¡Œèƒ½éšæ—¶è®¾ç½®å®½åº¦å’Œé«˜åº¦ï¼ˆæ¯”å¦‚inputã€buttonï¼‰ CSSä¸­æœ‰ä¸ªdisplayå±žæ€§ï¼Œèƒ½ä¿®æ”¹æ ‡ç­¾çš„æ˜¾ç¤ºç±»åž‹ noneï¼šéšè—æ ‡ç­¾ blockï¼šè®©æ ‡ç­¾å˜ä¸ºå—çº§æ ‡ç­¾ inlineï¼šè®©æ ‡ç­¾å˜ä¸ºè¡Œå†…æ ‡ç­¾ inline-blockï¼šè®©æ ‡ç­¾å˜ä¸ºè¡Œå†…-å—çº§æ ‡ç­¾ï¼ˆå†…è”-å—çº§æ ‡ç­¾ï¼‰ HTML5æ–°å¢žæ ‡ç­¾ HTML5æ–°å¢žäº†27ä¸ªæ ‡ç­¾å…ƒç´ ,åºŸå¼ƒäº†16ä¸ªæ ‡ç­¾å…ƒç´ ,ä¸»è¦åŒ…æ‹¬ç»“æž„æ€§æ ‡ç­¾ã€çº§å—æ€§æ ‡ç­¾ã€è¡Œå†…è¯­ä¹‰æ€§æ ‡ç­¾ã€äº¤äº’æ€§æ ‡ç­¾ ç»“æž„æ€§æ ‡ç­¾è´Ÿè´£Webä¸Šä¸‹æ–‡ç»“æž„çš„å®šä¹‰ï¼Œç¡®ä¿HTMLæ–‡æ¡£ï¼ŒåŒ…æ‹¬ï¼š - article æ–‡ç« ä¸»ä½“å†…å®¹(ä¸€ç¯‡åšå®¢ã€ä¸€ç¯‡è®ºå›å¸–å­ã€ä¸€æ®µç”¨æˆ·è¯„è®ºã€æ’ä»¶) - header æ ‡è®°å¤´éƒ¨åŒºåŸŸå†…å®¹ - footer æ ‡è®°è„šéƒ¨åŒºåŸŸå†…å®¹ - section åŒºåŸŸç« èŠ‚è¡¨è¿° - nav èœå•å¯¼èˆª,é“¾æŽ¥å¯¼èˆª å—çº§æ€§æ ‡ç­¾å®ŒæˆWebé¡µé¢åŒºåŸŸçš„åˆ’åˆ†ï¼Œç¡®ä¿å†…å®¹çš„æœ‰æ•ˆåˆ†éš”ï¼ŒåŒ…æ‹¬ï¼š - aside æ³¨è®°,è´´å£«,ä¾§æ ,æ‘˜è¦,æ’å…¥çš„å¼•ç”¨ä½œä¸ºè¡¥å……ä¸»ä½“çš„å†…å®¹ - figure å¯¹å¤šä¸ªå…ƒç´ ç»„åˆå¹¶å±•ç¤ºçš„å…ƒç´ ,å¸¸ä¸Žfigcaptionè”åˆä½¿ç”¨ - code è¡¨ç¤ºä¸€æ®µä»£ç å— - dialog äººä¸Žäººä¹‹é—´å¯¹è¯,åŒ…å«dtå’Œddä¸¤ä¸ªç»„åˆå…ƒç´ ï¼ˆdtç”¨äºŽè¡¨ç¤ºè¯´è¯è€…ã€ddç”¨äºŽè¡¨ç¤ºè¯´è¯è€…çš„å†…å®¹ï¼‰ è¡Œå†…è¯­ä¹‰æ€§æ ‡ç­¾å®ŒæˆWebé¡µé¢å…·ä½“å†…å®¹çš„å¼•ç”¨å’Œè¡¨è¿°ï¼Œä¸°å¯Œå±•ç¤ºå†…å®¹ï¼ŒåŒ…æ‹¬ï¼š - meter ç‰¹å®šèŒƒå›´å†…çš„æ•°å€¼ï¼Œå¦‚å·¥èµ„ã€æ•°é‡ã€ç™¾åˆ†æ¯” - time æ—¶é—´å€¼ - progress è¿›åº¦æ¡ï¼Œå¯ç”¨maxã€minã€stepè¿›è¡ŒæŽ§åˆ¶ï¼Œå®Œæˆå¯¹è¿›åº¦çš„è¡¨ç¤ºå’Œç›‘å¬ - video è§†é¢‘å…ƒç´ ï¼Œç”¨äºŽè§†é¢‘æ’­æ”¾ï¼Œæ”¯æŒç¼“å†²é¢„è½½å’Œå¤šç§è§†é¢‘åª’ä½“æ ¼å¼ - audio éŸ³é¢‘å…ƒç´ ï¼Œç”¨äºŽéŸ³é¢‘æ’­æ”¾ï¼Œæ”¯æŒç¼“å†²é¢„è½½å’Œå¤šç§éŸ³é¢‘åª’ä½“æ ¼å¼ äº¤äº’æ€§æ ‡ç­¾åŠŸèƒ½æ€§å†…å®¹çš„è¡¨è¾¾ï¼Œæœ‰ä¸€å®šçš„å†…å®¹å’Œæ•°æ®çš„å…³è”ï¼Œæ˜¯å„ç§äº‹ä»¶çš„åŸºç¡€ï¼ŒåŒ…æ‹¬ï¼š - details è¡¨ç¤ºä¸€æ®µå…·ä½“çš„å†…å®¹ï¼Œé»˜è®¤ä¸æ˜¾ç¤ºï¼Œé€šè¿‡æŸç§æ–¹å¼ï¼ˆå•å‡»ï¼‰ä¸Žlegendäº¤äº’æ‰ä¼šæ˜¾ç¤º - datagrid æŽ§åˆ¶å®¢æˆ·ç«¯æ•°æ®ä¸Žæ˜¾ç¤ºï¼Œå¯ç”¨äºŽåŠ¨æ€è„šæœ¬åŠæ—¶æ›´æ–° - menu ç”¨äºŽäº¤äº’èœå• - command ç”¨æ¥å¤„ç†å‘½ä»¤æŒ‰é’® 3. CSS ä»€ä¹ˆæ˜¯CSS CSSçš„å…¨ç§°æ˜¯Cascading Style Sheetsï¼Œå±‚å æ ·å¼è¡¨ å®ƒç”¨æ¥æŽ§åˆ¶HTMLæ ‡ç­¾çš„æ ·å¼ï¼Œåœ¨ç¾ŽåŒ–ç½‘é¡µä¸­èµ·åˆ°éžå¸¸é‡è¦çš„ä½œç”¨ CSSçš„ç¼–å†™æ ¼å¼æ˜¯é”®å€¼å¯¹å½¢å¼çš„ï¼Œæ¯”å¦‚: 123456789color: red;background-color: blue;font-size: 20px;``` - å†’å·:å·¦è¾¹çš„æ˜¯å±žæ€§åï¼Œå†’å·:å³è¾¹çš„å±žæ€§å€¼&gt;CSSçš„3ç§ä¹¦å†™å½¢å¼- è¡Œå†…æ ·å¼ï¼šï¼ˆå†…è”æ ·å¼ï¼‰ç›´æŽ¥åœ¨æ ‡ç­¾çš„styleå±žæ€§ä¸­ä¹¦å†™ 1- é¡µå†…æ ·å¼ï¼šåœ¨æœ¬ç½‘é¡µçš„styleæ ‡ç­¾ä¸­ä¹¦å†™ body { color: red; } 1- å¤–éƒ¨æ ·å¼ï¼šåœ¨å•ç‹¬çš„CSSæ–‡ä»¶ä¸­ä¹¦å†™ï¼Œç„¶åŽåœ¨ç½‘é¡µä¸­ç”¨linkæ ‡ç­¾å¼•ç”¨ 123456789&gt;CSSçš„ä¸¤å¤§é‡ç‚¹1. å±žæ€§ é€šè¿‡å±žæ€§çš„å¤æ‚å åŠ æ‰èƒ½åšå‡ºæ¼‚äº®çš„ç½‘é¡µ - CSSæœ‰Nå¤šå±žæ€§ï¼Œæ ¹æ®ç»§æ‰¿æ€§ï¼Œä¸»è¦å¯ä»¥åˆ†ä¸º2å¤§ç±» - å¯ç»§æ‰¿å±žæ€§çˆ¶æ ‡ç­¾çš„å±žæ€§å€¼ä¼šä¼ é€’ç»™å­æ ‡ç­¾ä¸€èˆ¬æ˜¯æ–‡å­—æŽ§åˆ¶å±žæ€§ æ‰€æœ‰æ ‡ç­¾å¯ç»§æ‰¿visibilityã€cursorå†…è”æ ‡ç­¾å¯ç»§æ‰¿letter-spacingã€word-spacingã€white-spaceã€line-heightã€colorã€fontã€font-familyã€font-sizeã€font-styleã€font-variantã€font-weightã€text-decorationã€text-transformã€direction å—çº§æ ‡ç­¾å¯ç»§æ‰¿text-indentã€text-alignåˆ—è¡¨æ ‡ç­¾å¯ç»§æ‰¿list-styleã€list-style-typeã€list-style-positionã€list-style-image1234 - ä¸å¯ç»§æ‰¿å±žæ€§çˆ¶æ ‡ç­¾çš„å±žæ€§å€¼ä¸èƒ½ä¼ é€’ç»™å­æ ‡ç­¾ä¸€èˆ¬æ˜¯åŒºå—æŽ§åˆ¶å±žæ€§ displayã€marginã€borderã€paddingã€backgroundheightã€min-heightã€max-heightã€widthã€min-widthã€max-widthoverflowã€positionã€leftã€rightã€topã€bottomã€z-indexfloatã€cleartable-layoutã€vertical-alignpage-break-afterã€page-bread-beforeunicode-bidi1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768 2. é€‰æ‹©å™¨ é€šè¿‡é€‰æ‹©å™¨æ‰¾åˆ°å¯¹åº”çš„æ ‡ç­¾è®¾ç½®æ ·å¼*(å…·ä½“é€‰æ‹©å™¨å†…å®¹å’Œæ•™ç¨‹è¯·å‚è€ƒ:http://www.w3school.com.cn/css/index.asp)*&gt; CSSå¸ƒå±€- é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰çš„ç½‘é¡µæ ‡ç­¾éƒ½åœ¨æ ‡å‡†æµå¸ƒå±€ä¸­,ä»Žä¸Šåˆ°ä¸‹ï¼Œä»Žå·¦åˆ°å³- è„±ç¦»æ ‡å‡†æµçš„æ–¹æ³•æœ‰ - floatå±žæ€§ - floatå±žæ€§çš„å¸¸ç”¨å–å€¼æœ‰: `left`ï¼šè„±ç¦»æ ‡å‡†æµï¼Œæµ®åŠ¨åœ¨çˆ¶æ ‡ç­¾çš„æœ€å·¦è¾¹`right`ï¼šè„±ç¦»æ ‡å‡†æµï¼Œæµ®åŠ¨åœ¨çˆ¶æ ‡ç­¾çš„æœ€å³è¾¹ - positionå±žæ€§ ![positionå±žæ€§](http://upload-images.jianshu.io/upload_images/1879463-98d3215b81c3df23.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)&gt;CSS3æ–°å¢žç‰¹æ€§- **RGBAé€æ˜Žåº¦** RGB(çº¢è‰²R+ç»¿è‰²G+è“è‰²B),RGBAåˆ™åœ¨å…¶åŸºç¡€ä¸Šå¢žåŠ äº†Alphaé€šé“ï¼Œå¯ç”¨äºŽè®¾ç½®é€æ˜Žå€¼- **å—é˜´å½±ä¸Žåœ†è§’é˜´å½±** box-shadow text-shadow- **åœ†è§’** border-radius- **è¾¹æ¡†å›¾ç‰‡** border-image- **å½¢å˜** transform: none | &lt;transform-function&gt;[&lt;transform-fuction&gt;]### 4. ç›’å­æ¨¡åž‹![ç›’å­æ¨¡åž‹](http://upload-images.jianshu.io/upload_images/1879463-dcd26e170da66975.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)- ç½‘é¡µä¸Šçš„æ¯ä¸€ä¸ªæ ‡ç­¾éƒ½æ˜¯ä¸€ä¸ªç›’å­- æ¯ä¸ªç›’å­éƒ½æœ‰å››ä¸ªå±žæ€§ 1. å†…å®¹ï¼ˆcontentï¼‰![å†…å®¹å±žæ€§](http://upload-images.jianshu.io/upload_images/1879463-fd9b30c8df171c7b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240) 2. å¡«å……ï¼ˆpaddingï¼Œå†…è¾¹è·ï¼‰![å¡«å……å±žæ€§](http://upload-images.jianshu.io/upload_images/1879463-5689bf59b9e0f5fe.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240) 3. è¾¹æ¡†ï¼ˆborderï¼‰ï¼šç›’å­æœ¬èº« 4. è¾¹ç•Œï¼ˆmarginï¼Œå¤–è¾¹è·ï¼‰![è¾¹ç•Œå±žæ€§](http://upload-images.jianshu.io/upload_images/1879463-2803e390750974e0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)![æ ‡å‡†ç›’å­æ¨¡åž‹](http://upload-images.jianshu.io/upload_images/1879463-7d4bf71b5a129753.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)![IEç›’å­æ¨¡åž‹](http://upload-images.jianshu.io/upload_images/1879463-0ad03d90f842a6aa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)### 4. JavaScript&gt;ä»€ä¹ˆæ˜¯JavaScript- JavaScriptæ˜¯ä¸€é—¨å¹¿æ³›ç”¨äºŽæµè§ˆå™¨å®¢æˆ·ç«¯çš„è„šæœ¬è¯­è¨€ï¼Œç”±Netspaceå…¬å¸è®¾è®¡ï¼Œå½“æ—¶è·ŸSunå…¬å¸åˆä½œï¼Œæ‰€ä»¥åå­—èµ·å¾—åƒJavaã€‚ä¸šå†…ä¸€èˆ¬ç®€ç§°JS&gt;JSçš„å¸¸è§ç”¨é€”- HTML DOMæ“ä½œï¼ˆèŠ‚ç‚¹æ“ä½œï¼Œæ¯”å¦‚æ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤èŠ‚ç‚¹ï¼‰- ç»™HTMLç½‘é¡µå¢žåŠ åŠ¨æ€åŠŸèƒ½ï¼Œæ¯”å¦‚åŠ¨ç”»- äº‹ä»¶å¤„ç†ï¼šæ¯”å¦‚ç›‘å¬é¼ æ ‡ç‚¹å‡»ã€é¼ æ ‡æ»‘åŠ¨ã€é”®ç›˜è¾“å…¥&gt;JavaScriptçš„ä¹¦å†™æ–¹å¼- JSå¸¸è§çš„ä¹¦å†™æ–¹å¼æœ‰2ç§ - é¡µå†…JSï¼šåœ¨å½“å‰ç½‘é¡µçš„scriptæ ‡ç­¾ä¸­ç¼–å†™ 1- å¤–éƒ¨JS 1234&gt;Canvas- HTML &lt;canvas id=&quot;canvas&quot;&gt;&lt;/canvas&gt; 1- JS var canvas = document.getElementById(â€˜canvasâ€™); var context = canvas.getContext(â€˜2dâ€™);12345 - `context`æ˜¯ä¸€ä¸ªç»˜å›¾çš„ä¸Šä¸‹æ–‡çŽ¯å¢ƒ - `2d`æ˜¯äºŒç»´å›¾å½¢- Canvasç»˜åˆ¶ç›´çº¿ - èµ·ç‚¹ context.moveTo(100,100);123 - ç»ˆç‚¹``` context.lineTo(400, 400); ç»˜åˆ¶ 1 context.stroke(); è®¾ç½®çº¿æ¡é¢œè‰²å’Œå®½åº¦ 12 context.strokeStyle = &apos;red&apos;; context.lineWidth = 5; è®¾ç½®å¡«å……è‰² 1 context.fillStyle = &apos;blue&apos;; Canvasç»˜åˆ¶å¼§çº¿ 12345 context.arc( centerX, centerY, radius, startingAngle, endingAngle, anticlockwise=false ) centerX, centerY: åœ†å¿ƒçš„åæ ‡ radius: åŠå¾„ startingAngle, endingAngle: å¼€å§‹è§’åº¦,ç»“æŸè§’åº¦ anticlockwise: falseé¡ºæ—¶é’ˆ trueé€†æ—¶é’ˆ]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå¼€å‘ä¹‹æ•°æ®å­˜å‚¨]]></title>
    <url>%2F2016%2F04%2F12%2FiOS%E5%BC%80%E5%8F%91%E4%B9%8B%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%2F</url>
    <content type="text"><![CDATA[ä½œä¸ºç§»åŠ¨ç«¯å¼€å‘å·¥ç¨‹å¸ˆï¼Œæ‰€éœ€è¦çš„æ•°æ®å‡ ä¹Žå…¨éƒ¨éƒ½æ˜¯é€šè¿‡ç½‘ç»œèŽ·å–ï¼Œè€Œä¸”ç½‘ç»œè¯·æ±‚éƒ½æœ‰æ—¶è€—ï¼›åœ¨ç½‘ç»œå¥½çš„æƒ…å†µä¸‹è¿™ç§æ—¶è€—è™½ç„¶ä¸è¶³è€ƒè™‘ï¼Œä½†æ˜¯ä¸€æ—¦ç½‘ç»œçŽ¯å¢ƒä¸å¥½ï¼Œä¼šå¾ˆå½±å“äº§å“ä½“éªŒã€‚ç½‘ç»œçŽ¯å¢ƒæ— æ³•æŽ§åˆ¶ï¼Œä½†æ˜¯å¯¹äºŽä¸€äº›æ•°æ®ä¸ç»å¸¸å˜åŠ¨çš„ç½‘ç»œè¯·æ±‚æˆ–æ²¡å¿…è¦å®žæ—¶æ›´æ–°çš„æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©å°†ç½‘ç»œæ•°æ®ç¼“å­˜æœ¬åœ°ï¼Œé€‚æ—¶æ›´æ–°ã€‚ iOSåº”ç”¨æ•°æ®å­˜å‚¨çš„å¸¸ç”¨æ–¹å¼ XMLå±žæ€§åˆ—è¡¨(plist)å½’æ¡£ Preference(åå¥½è®¾ç½®) NSKeyedArchiverå½’æ¡£(NSCoding) SQLite 3 Core Data åº”ç”¨æ²™ç›’æ¯ä¸ªiOSåº”ç”¨éƒ½æœ‰è‡ªå·±çš„åº”ç”¨æ²™ç›’(åº”ç”¨æ²™ç›’å°±æ˜¯æ–‡ä»¶ç³»ç»Ÿç›®å½•),ä¸Žå…¶ä»–æ–‡ä»¶ç³»ç»Ÿéš”ç¦»,åº”ç”¨å¿…é¡»å¾…åœ¨è‡ªå·±çš„æ²™ç›’é‡Œ,å…¶ä»–åº”ç”¨ä¸èƒ½è®¿é—®æ²™ç›’ åº”ç”¨æ²™ç›’çš„æ–‡ä»¶ç³»ç»Ÿç›®å½•,å¦‚ä¸‹å›¾æ‰€ç¤º(å‡è®¾åº”ç”¨çš„åç§°å«Layer) åº”ç”¨æ²™ç›’ç»“æž„åˆ†æžåº”ç”¨ç¨‹åºåŒ…: (ä¸Šå›¾ä¸­çš„Layer)åŒ…å«äº†æ‰€æœ‰çš„èµ„æºæ–‡ä»¶å’Œå¯æ‰§è¡Œæ–‡ä»¶Documents: ä¿å­˜åº”ç”¨è¿è¡Œæ—¶ç”Ÿæˆçš„éœ€è¦æŒä¹…åŒ–çš„æ•°æ®,itunesåŒæ­¥è®¾å¤‡æ—¶ä¼šå¤‡ä»½è¯¥ç›®å½•,ä¾‹å¦‚:æ¸¸æˆåº”ç”¨å¯ä»¥å°†æ¸¸æˆå­˜æ¡£ä¿å­˜åœ¨è¯¥ç›®å½•tmp: ä¿å­˜åº”ç”¨è¿è¡Œæ—¶æ‰€éœ€çš„ä¸´æ—¶æ•°æ®, ä½¿ç”¨å®Œæ¯•åŽå†è§ç›¸åº”çš„æ–‡ä»¶ä»Žè¯¥ç›®å½•åˆ é™¤.åº”ç”¨æ²¡æœ‰è¿è¡Œæ—¶,ç³»ç»Ÿä¹Ÿå¯èƒ½ä¼šæ¸…é™¤è¯¥ç›®å½•ä¸‹çš„æ–‡ä»¶.itunesåŒæ­¥è®¾å¤‡çš„æ—¶å€™ä¸ä¼šå¤‡ä»½è¯¥æ–‡ä»¶å¤¹Library/Caches: ä¿å­˜åº”ç”¨è¿è¡Œæ—¶ç”Ÿæˆçš„éœ€è¦æŒä¹…åŒ–çš„æ•°æ®,iTunesåŒæ­¥è®¾å¤‡çš„æ—¶å€™ä¸ä¼šå¤‡ä»½è¯¥ç›®å½•.ä¸€èˆ¬å­˜å‚¨ä½“ç§¯å¤§,ä¸éœ€è¦å¤‡ä»½çš„éžé‡è¦æ•°æ®Library/Preferences: ä¿å­˜åº”ç”¨çš„æ‰€æœ‰åå¥½è®¾ç½®,iOSçš„settings(è®¾ç½®)åº”ç”¨ä¼šåœ¨è¯¥ç›®å½•ä¸­æŸ¥æ‰¾åº”ç”¨çš„è®¾ç½®ä¿¡æ¯.iTunesåŒæ­¥è®¾å¤‡æ—¶ä¼šå¤‡ä»½è¯¥ç›®å½• åº”ç”¨æ²™ç›’ç›®å½•çš„å¸¸è§èŽ·å–æ–¹å¼æ²™ç›’æ ¹ç›®å½•1NSString * home = NSHomeDirectory(); Documents(2ç§æ–¹å¼) åˆ©ç”¨æ²™ç›’æ ¹ç›®å½•æ‹¼æŽ¥â€Documentsâ€å­—ç¬¦ä¸² 12 NSString * home = NSHomeDirectory(); NSString * documents = [home stringByAppendingPathComponent:@"Documents"]; ä¸å»ºè®®é‡‡ç”¨,å› ä¸ºæ–°ç‰ˆæœ¬çš„æ“ä½œç³»ç»Ÿå¯èƒ½ä¼šä¿®æ”¹ç›®å½•å åˆ©ç”¨NSSearchPathForDirectoriesInDomainså‡½æ•° 12345//NSUserDomainMaskä»£è¡¨ä»Žç”¨æˆ·æ–‡ä»¶å¤¹ä¸‹æ‰¾//YES,ä»£è¡¨å±•å¼€è·¯å¾„ä¸­çš„æ³¢æµªå­—ç¬¦"~"NSArray * arr = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, NO);//åœ¨iOSä¸­,åªæœ‰ä¸€ä¸ªç›®å½•è·Ÿä¼ å…¥çš„å‚æ•°åŒ¹é…,æ‰€ä»¥è¿™ä¸ªé›†åˆé‡Œé¢åªæœ‰ä¸€ä¸ªå…ƒç´ NSString * documents = [arr objectAtIndex:0]; tmp1NSString * tmp = NSTemporaryDirectory(); Library/Caches(è·ŸDocumentsç›¸ä¼¼çš„2ç§æ–¹æ³•) åˆ©ç”¨æ²™ç›’æ ¹ç›®å½•æ‹¼æŽ¥â€Cachesâ€å­—ç¬¦ä¸² åˆ©ç”¨NSSearchPathForDirectoriesInDomainså‡½æ•° (å°†å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ”¹ä¸ºNSCachesDirectoryå³å¯) Library/Preferencesé€šè¿‡NSUserDefaultsç±»å­˜å–è¯¥ç›®å½•ä¸‹çš„è®¾ç½®ä¿¡æ¯ å±žæ€§åˆ—è¡¨å±žæ€§åˆ—è¡¨æ˜¯ä¸€ç§XMLæ ¼å¼çš„æ–‡ä»¶, æ‹“å±•åä¸ºplist å¦‚æžœå¯¹è±¡æ˜¯NSString\NSDictionary\NSArray\NSData\NSNumberç­‰ç±»åž‹, å°±å¯ä»¥ä½¿ç”¨writeToFile:atomically:æ–¹æ³•ç›´æŽ¥å°†å¯¹è±¡å†™åˆ°å±žæ€§åˆ—è¡¨æ–‡ä»¶ä¸­ å±žæ€§åˆ—è¡¨ - å½’æ¡£NSDictionary å°†ä¸€ä¸ªNSDictionaryå¯¹è±¡å½’æ¡£åˆ°ä¸€ä¸ªplistå±žæ€§åˆ—è¡¨ä¸­ 1234567//å°†æ•°æ®å°è£…æˆå­—å…¸NSMutableDictionary * dic = [NSMutableDictionary dictionary];[dic setObject:@"å°ç±³" forKey:@"name"];[dic setObject:@"11111111111" forKey:@"phone"];[dic setObject:@"6" forKey:@"size"];//å°†å­—å…¸æŒä¹…åŒ–åˆ°Documents/phone.plistæ–‡ä»¶ä¸­[dic writeToFile:path atomically:YES]; NSDictionaryçš„å­˜å‚¨å’Œè¯»å–è¿‡ç¨‹ åå¥½è®¾ç½®å¾ˆå¤šiOSåº”ç”¨éƒ½æ”¯æŒåå¥½è®¾ç½®,æ¯”å¦‚ä¿å­˜ç”¨æˆ·å\å¯†ç \å­—ä½“å¤§å°ç­‰è®¾ç½®, iOSæä¾›äº†ä¸€å¥—æ ‡å‡†çš„è§£å†³æ–¹æ¡ˆæ¥ä¸ºåº”ç”¨åŠ å…¥åå¥½è®¾ç½®åŠŸèƒ½ æ¯ä¸ªåº”ç”¨éƒ½æœ‰ä¸ªNSUserDefaultså®žä¾‹ï¼Œé€šè¿‡å®ƒæ¥å­˜å–åå¥½è®¾ç½® æ¯”å¦‚ï¼Œä¿å­˜ç”¨æˆ·åã€å­—ä½“å¤§å°ã€æ˜¯å¦è‡ªåŠ¨ç™»å½• 1234NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];[defaults setObject:@"flame" forKey:@"username"];[defaults setFloat:18.0f forKey:@"text_size"];[defaults setBool:YES forKey:@"auto_login"]; è¯»å–ä¸Šæ¬¡ä¿å­˜çš„è®¾ç½® 1234NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];NSString *username = [defaults stringForKey:@"username"];float textSize = [defaults floatForKey:@"text_size"];BOOL autoLogin = [defaults boolForKey:@"auto_login"]; æ³¨æ„ï¼šUserDefaultsè®¾ç½®æ•°æ®æ—¶ï¼Œä¸æ˜¯ç«‹å³å†™å…¥ï¼Œè€Œæ˜¯æ ¹æ®æ—¶é—´æˆ³å®šæ—¶åœ°æŠŠç¼“å­˜ä¸­çš„æ•°æ®å†™å…¥æœ¬åœ°ç£ç›˜ã€‚æ‰€ä»¥è°ƒç”¨äº†setæ–¹æ³•ä¹‹åŽæ•°æ®æœ‰å¯èƒ½è¿˜æ²¡æœ‰å†™å…¥ç£ç›˜åº”ç”¨ç¨‹åºå°±ç»ˆæ­¢äº†ã€‚å‡ºçŽ°ä»¥ä¸Šé—®é¢˜ï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨synchornizeæ–¹æ³•å¼ºåˆ¶å†™å…¥ 1[defaults synchornize]; NSKeyedArchiverå¦‚æžœå¯¹è±¡æ˜¯NSStringã€NSDictionaryã€NSArrayã€NSDataã€NSNumberç­‰ç±»åž‹ï¼Œå¯ä»¥ç›´æŽ¥ç”¨NSKeyedArchiverè¿›è¡Œå½’æ¡£å’Œæ¢å¤ ä¸æ˜¯æ‰€æœ‰çš„å¯¹è±¡éƒ½å¯ä»¥ç›´æŽ¥ç”¨è¿™ç§æ–¹æ³•è¿›è¡Œå½’æ¡£ï¼Œåªæœ‰éµå®ˆäº†NSCodingåè®®çš„å¯¹è±¡æ‰å¯ä»¥ NSCodingåè®®æœ‰2ä¸ªæ–¹æ³•ï¼š encodeWithCoder æ¯æ¬¡å½’æ¡£å¯¹è±¡æ—¶ï¼Œéƒ½ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚ä¸€èˆ¬åœ¨è¿™ä¸ªæ–¹æ³•é‡Œé¢æŒ‡å®šå¦‚ä½•å½’æ¡£å¯¹è±¡ä¸­çš„æ¯ä¸ªå®žä¾‹å˜é‡ï¼Œå¯ä»¥ä½¿ç”¨encodeObject:forKey:æ–¹æ³•å½’æ¡£å®žä¾‹å˜é‡ initWithCoder æ¯æ¬¡ä»Žæ–‡ä»¶ä¸­æ¢å¤(è§£ç )å¯¹è±¡æ—¶ï¼Œéƒ½ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚ä¸€èˆ¬åœ¨è¿™ä¸ªæ–¹æ³•é‡Œé¢æŒ‡å®šå¦‚ä½•è§£ç æ–‡ä»¶ä¸­çš„æ•°æ®ä¸ºå¯¹è±¡çš„å®žä¾‹å˜é‡ï¼Œå¯ä»¥ä½¿ç”¨decodeObject:forKeyæ–¹æ³•è§£ç å®žä¾‹å˜é‡ å½’æ¡£ä¸€ä¸ªNSArrayå¯¹è±¡åˆ°Documents/array.archive 12NSArray *array = [NSArray arrayWithObjects:@â€aâ€,@â€bâ€,nil];[NSKeyedArchiver archiveRootObject:array toFile:path]; æ¢å¤(è§£ç )NSArrayå¯¹è±¡ 1NSArray *array = [NSKeyedUnarchiver unarchiveObjectWithFile:path]; å½’æ¡£å¯¹è±¡NSKeyedArchiver-å½’æ¡£Personå¯¹è±¡ï¼ˆPerson.hï¼‰ 123456789101112131415161718192021222324252627@interface Person : NSObject&lt;NSCoding&gt;@property (nonatomic, copy) NSString *name;@property (nonatomic, assign) int age;@property (nonatomic, assign) float height;@end``` NSKeyedArchiver-å½’æ¡£Personå¯¹è±¡ï¼ˆPerson.mï¼‰```objc@implementation Person-(void)encodeWithCoder:(NSCoder *)encoder &#123; [encoder encodeObject:self.name forKey:@"name"]; [encoder encodeInt:self.age forKey:@"age"]; [encoder encodeFloat:self.height forKey:@"height"];&#125;-(id)initWithCoder:(NSCoder *)decoder &#123; self.name = [decoder decodeObjectForKey:@"name"]; self.age = [decoder decodeIntForKey:@"age"]; self.height = [decoder decodeFloatForKey:@"height"]; return self;&#125;-(void)dealloc &#123; [super dealloc]; [_name release];&#125;@end NSKeyedArchiver-å½’æ¡£Personå¯¹è±¡ï¼ˆç¼–ç å’Œè§£ç ï¼‰ å½’æ¡£(ç¼–ç ) 12345Person *person = [[[Person alloc] init] autorelease];person.name = @"TY";person.age = 27;person.height = 1.83f;[NSKeyedArchiver archiveRootObject:person toFile:path]; æ¢å¤(è§£ç ) 1Person *person = [NSKeyedUnarchiver unarchiveObjectWithFile:path]; NSKeyedArchiver-å½’æ¡£å¯¹è±¡çš„æ³¨æ„ å¦‚æžœçˆ¶ç±»ä¹Ÿéµå®ˆäº†NSCodingåè®®ï¼Œè¯·æ³¨æ„ï¼š åº”è¯¥åœ¨encodeWithCoder:æ–¹æ³•ä¸­åŠ ä¸Šä¸€å¥ 1[super encodeWithCode:encode]; ç¡®ä¿ç»§æ‰¿çš„å®žä¾‹å˜é‡ä¹Ÿèƒ½è¢«ç¼–ç ï¼Œå³ä¹Ÿèƒ½è¢«å½’æ¡£ åº”è¯¥åœ¨initWithCoder:æ–¹æ³•ä¸­åŠ ä¸Šä¸€å¥ 1self = [super initWithCoder:decoder]; ç¡®ä¿ç»§æ‰¿çš„å®žä¾‹å˜é‡ä¹Ÿèƒ½è¢«è§£ç ï¼Œå³ä¹Ÿèƒ½è¢«æ¢å¤ NSDataä½¿ç”¨archiveRootObject:toFile:æ–¹æ³•å¯ä»¥å°†ä¸€ä¸ªå¯¹è±¡ç›´æŽ¥å†™å…¥åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œä½†æœ‰æ—¶å€™å¯èƒ½æƒ³å°†å¤šä¸ªå¯¹è±¡å†™å…¥åˆ°åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œé‚£ä¹ˆå°±è¦ä½¿ç”¨NSDataæ¥è¿›è¡Œå½’æ¡£å¯¹è±¡NSDataå¯ä»¥ä¸ºä¸€äº›æ•°æ®æä¾›ä¸´æ—¶å­˜å‚¨ç©ºé—´ï¼Œä»¥ä¾¿éšåŽå†™å…¥æ–‡ä»¶ï¼Œæˆ–è€…å­˜æ”¾ä»Žç£ç›˜è¯»å–çš„æ–‡ä»¶å†…å®¹ã€‚å¯ä»¥ä½¿ç”¨[NSMutableData data]åˆ›å»ºå¯å˜æ•°æ®ç©ºé—´ NSData-å½’æ¡£2ä¸ªPersonå¯¹è±¡åˆ°åŒä¸€æ–‡ä»¶ä¸­ å½’æ¡£ï¼ˆç¼–ç ï¼‰ 1234567891011// æ–°å»ºä¸€å—å¯å˜æ•°æ®åŒºNSMutableData *data = [NSMutableData data];// å°†æ•°æ®åŒºè¿žæŽ¥åˆ°ä¸€ä¸ªNSKeyedArchiverå¯¹è±¡NSKeyedArchiver *archiver = [[[NSKeyedArchiver alloc] initForWritingWithMutableData:data] autorelease];// å¼€å§‹å­˜æ¡£å¯¹è±¡ï¼Œå­˜æ¡£çš„æ•°æ®éƒ½ä¼šå­˜å‚¨åˆ°NSMutableDataä¸­[archiver encodeObject:person1 forKey:@"person1"];[archiver encodeObject:person2 forKey:@"person2"];// å­˜æ¡£å®Œæ¯•(ä¸€å®šè¦è°ƒç”¨è¿™ä¸ªæ–¹æ³•)[archiver finishEncoding];// å°†å­˜æ¡£çš„æ•°æ®å†™å…¥æ–‡ä»¶[data writeToFile:path atomically:YES]; æ¢å¤ï¼ˆè§£ç ï¼‰ 12345678// ä»Žæ–‡ä»¶ä¸­è¯»å–æ•°æ®NSData *data = [NSData dataWithContentsOfFile:path];// æ ¹æ®æ•°æ®ï¼Œè§£æžæˆä¸€ä¸ªNSKeyedUnarchiverå¯¹è±¡NSKeyedUnarchiver *unarchiver = [[NSKeyedUnarchiver alloc] initForReadingWithData:data];Person *person1 = [unarchiver decodeObjectForKey:@"person1"];Person *person2 = [unarchiver decodeObjectForKey:@"person2"];// æ¢å¤å®Œæ¯•[unarchiver finishDecoding]; åˆ©ç”¨å½’æ¡£å®žçŽ°æ·±å¤åˆ¶ æ¯”å¦‚å¯¹ä¸€ä¸ªPersonå¯¹è±¡è¿›è¡Œæ·±å¤åˆ¶ 1234567// ä¸´æ—¶å­˜å‚¨person1çš„æ•°æ®NSData *data = [NSKeyedArchiver archivedDataWithRootObject:person1];// è§£æždataï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„Personå¯¹è±¡Student *person2 = [NSKeyedUnarchiver unarchiveObjectWithData:data];// åˆ†åˆ«æ‰“å°å†…å­˜åœ°å€NSLog(@"person1:0x%x", person1); // person1:0x7177a60NSLog(@"person2:0x%x", person2); // person2:0x7177cf0 SQLite3SQLite3æ˜¯ä¸€æ¬¾å¼€æºçš„åµŒå…¥å¼å…³ç³»åž‹æ•°æ®åº“ï¼Œå¯ç§»æ¤æ€§å¥½ã€æ˜“ä½¿ç”¨ã€å†…å­˜å¼€é”€å°SQLite3æ˜¯æ— ç±»åž‹çš„ï¼Œæ„å‘³ç€ä½ å¯ä»¥ä¿å­˜ä»»ä½•ç±»åž‹çš„æ•°æ®åˆ°ä»»æ„è¡¨çš„ä»»æ„å­—æ®µä¸­ã€‚æ¯”å¦‚ä¸‹åˆ—çš„åˆ›è¡¨è¯­å¥æ˜¯åˆæ³•çš„ï¼š create table t_person(name, age);ä¸ºäº†ä¿è¯å¯è¯»æ€§ï¼Œå»ºè®®è¿˜æ˜¯æŠŠå­—æ®µç±»åž‹åŠ ä¸Šï¼šcreate table t_person(name text, age integer); SQLite3å¸¸ç”¨çš„5ç§æ•°æ®ç±»åž‹ï¼štextã€integerã€floatã€booleanã€blob åœ¨iOSä¸­ä½¿ç”¨SQLite3ï¼Œé¦–å…ˆè¦æ·»åŠ åº“æ–‡ä»¶libsqlite3.dylibå’Œå¯¼å…¥ä¸»å¤´æ–‡ä»¶ 1#import &lt;sqlite3.h&gt; åˆ›å»ºã€æ‰“å¼€ã€å…³é—­æ•°æ®åº“ åˆ›å»ºæˆ–æ‰“å¼€æ•°æ®åº“ 123// pathä¸ºï¼š~/Documents/person.dbsqlite3 *db;int result = sqlite3_open([path UTF8String], &amp;db); ä»£ç è§£æž:sqlite3_open()å°†æ ¹æ®æ–‡ä»¶è·¯å¾„æ‰“å¼€æ•°æ®åº“ï¼Œå¦‚æžœä¸å­˜åœ¨ï¼Œåˆ™ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ•°æ®åº“ã€‚å¦‚æžœresultç­‰äºŽå¸¸é‡SQLITE_OKï¼Œåˆ™è¡¨ç¤ºæˆåŠŸæ‰“å¼€æ•°æ®åº“ sqlite3 *dbï¼šä¸€ä¸ªæ‰“å¼€çš„æ•°æ®åº“å®žä¾‹ æ•°æ®åº“æ–‡ä»¶çš„è·¯å¾„å¿…é¡»ä»¥Cå­—ç¬¦ä¸²(è€ŒéžNSString)ä¼ å…¥ å…³é—­æ•°æ®åº“ï¼š 1sqlite3_close(db); æ‰§è¡Œä¸è¿”å›žæ•°æ®çš„SQLè¯­å¥ æ‰§è¡Œåˆ›è¡¨è¯­å¥ 123char *errorMsg; // ç”¨æ¥å­˜å‚¨é”™è¯¯ä¿¡æ¯char *sql = "create table if not exists t_person(id integer primary key autoincrement, name text, age integer);";int result = sqlite3_exec(db, sql, NULL, NULL, &amp;errorMsg); ä»£ç è§£æžï¼šsqlite3_exec()å¯ä»¥æ‰§è¡Œä»»ä½•SQLè¯­å¥ï¼Œæ¯”å¦‚åˆ›è¡¨ã€æ›´æ–°ã€æ’å…¥å’Œåˆ é™¤æ“ä½œã€‚ä½†æ˜¯ä¸€èˆ¬ä¸ç”¨å®ƒæ‰§è¡ŒæŸ¥è¯¢è¯­å¥ï¼Œå› ä¸ºå®ƒä¸ä¼šè¿”å›žæŸ¥è¯¢åˆ°çš„æ•°æ® sqlite3_exec()è¿˜å¯ä»¥æ‰§è¡Œçš„è¯­å¥ï¼š å¼€å¯äº‹åŠ¡ï¼šbegin transaction; å›žæ»šäº‹åŠ¡ï¼šrollback; æäº¤äº‹åŠ¡ï¼šcommit; å¸¦å ä½ç¬¦æ’å…¥æ•°æ® 12345678910char *sql = "insert into t_person(name, age) values(?, ?);";sqlite3_stmt *stmt;if (sqlite3_prepare_v2(db, sql, -1, &amp;stmt, NULL) == SQLITE_OK) &#123; sqlite3_bind_text(stmt, 1, "æ¯é¸¡", -1, NULL); sqlite3_bind_int(stmt, 2, 27);&#125;if (sqlite3_step(stmt) != SQLITE_DONE) &#123; NSLog(@"æ’å…¥æ•°æ®é”™è¯¯");&#125;sqlite3_finalize(stmt); ä»£ç è§£æžï¼šsqlite3_prepare_v2()è¿”å›žå€¼ç­‰äºŽSQLITE_OKï¼Œè¯´æ˜ŽSQLè¯­å¥å·²ç»å‡†å¤‡æˆåŠŸï¼Œæ²¡æœ‰è¯­æ³•é—®é¢˜ sqlite3_bind_text()ï¼šå¤§éƒ¨åˆ†ç»‘å®šå‡½æ•°éƒ½åªæœ‰3ä¸ªå‚æ•° ç¬¬1ä¸ªå‚æ•°æ˜¯sqlite3_stmt *ç±»åž‹ ç¬¬2ä¸ªå‚æ•°æŒ‡å ä½ç¬¦çš„ä½ç½®ï¼Œç¬¬ä¸€ä¸ªå ä½ç¬¦çš„ä½ç½®æ˜¯1ï¼Œä¸æ˜¯0 ç¬¬3ä¸ªå‚æ•°æŒ‡å ä½ç¬¦è¦ç»‘å®šçš„å€¼ ç¬¬4ä¸ªå‚æ•°æŒ‡åœ¨ç¬¬3ä¸ªå‚æ•°ä¸­æ‰€ä¼ é€’æ•°æ®çš„é•¿åº¦ï¼Œå¯¹äºŽCå­—ç¬¦ä¸²ï¼Œå¯ä»¥ä¼ é€’-1ä»£æ›¿å­—ç¬¦ä¸²çš„é•¿åº¦ ç¬¬5ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå¯é€‰çš„å‡½æ•°å›žè°ƒï¼Œä¸€èˆ¬ç”¨äºŽåœ¨è¯­å¥æ‰§è¡ŒåŽå®Œæˆå†…å­˜æ¸…ç†å·¥ä½œ sqlite_step()ï¼šæ‰§è¡ŒSQLè¯­å¥ï¼Œè¿”å›žSQLITE_DONEä»£è¡¨æˆåŠŸæ‰§è¡Œå®Œæ¯• sqlite_finalize()ï¼šé”€æ¯sqlite3_stmt *å¯¹è±¡ æŸ¥è¯¢æ•°æ® 123456789101112char *sql = "select id,name,age from t_person;";sqlite3_stmt *stmt;if (sqlite3_prepare_v2(db, sql, -1, &amp;stmt, NULL) == SQLITE_OK) &#123; while (sqlite3_step(stmt) == SQLITE_ROW) &#123; int _id = sqlite3_column_int(stmt, 0); char *_name = (char *)sqlite3_column_text(stmt, 1); NSString *name = [NSString stringWithUTF8String:_name]; int _age = sqlite3_column_int(stmt, 2); NSLog(@"id=%i, name=%@, age=%i", _id, name, _age); &#125;&#125;sqlite3_finalize(stmt); ä»£ç è§£æž: sqlite3_step()è¿”å›žSQLITE_ROWä»£è¡¨éåŽ†åˆ°ä¸€æ¡æ–°è®°å½• sqlite3column*()ç”¨äºŽèŽ·å–æ¯ä¸ªå­—æ®µå¯¹åº”çš„å€¼ï¼Œç¬¬2ä¸ªå‚æ•°æ˜¯å­—æ®µçš„ç´¢å¼•ï¼Œä»Ž0å¼€å§‹]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSä¹‹æ–‡ä»¶çš„åŽ‹ç¼©å’Œè§£åŽ‹ç¼©]]></title>
    <url>%2F2016%2F04%2F12%2FiOS%E4%B9%8B%E6%96%87%E4%BB%B6%E7%9A%84%E5%8E%8B%E7%BC%A9%E5%92%8C%E8%A7%A3%E5%8E%8B%E7%BC%A9%2F</url>
    <content type="text"><![CDATA[ä½¿ç”¨ZipArchiveæ¥åŽ‹ç¼©å’Œè§£åŽ‹ç¼©æ–‡ä»¶éœ€è¦æ·»åŠ ä¾èµ–åº“ï¼ˆlibzï¼‰,ä½¿ç”¨éœ€è¦åŒ…å«Mainæ–‡ä»¶ï¼Œå¦‚æžœä½¿ç”¨cocoaPoadsæ¥å®‰è£…æ¡†æž¶ï¼Œé‚£ä¹ˆä¼šè‡ªåŠ¨çš„é…ç½®æ¡†æž¶çš„ä½¿ç”¨çŽ¯å¢ƒ åŽ‹ç¼©æ–‡ä»¶çš„ç¬¬ä¸€ç§æ–¹å¼123456//åŽ‹ç¼©æ–‡ä»¶çš„ç¬¬ä¸€ç§æ–¹å¼/*ç¬¬ä¸€ä¸ªå‚æ•°ï¼šåŽ‹ç¼©æ–‡ä»¶è¦ä¿å­˜çš„ä½ç½®ç¬¬äºŒä¸ªå‚æ•°ï¼šè¦åŽ‹ç¼©å“ªå‡ ä¸ªæ–‡ä»¶*/[Main createZipFileAtPath:fullpath withFilesAtPaths:arrayM]; åŽ‹ç¼©æ–‡ä»¶çš„ç¬¬äºŒç§æ–¹å¼123456//åŽ‹ç¼©æ–‡ä»¶çš„ç¬¬äºŒç§æ–¹å¼/*ç¬¬ä¸€ä¸ªå‚æ•°ï¼šæ–‡ä»¶åŽ‹ç¼©åˆ°å“ªä¸ªåœ°æ–¹ç¬¬äºŒä¸ªå‚æ•°ï¼šè¦åŽ‹ç¼©æ–‡ä»¶çš„å…¨è·¯å¾„*/[Main createZipFileAtPath:fullpath withContentsOfDirectory:zipFile]; å¦‚ä½•å¯¹åŽ‹ç¼©æ–‡ä»¶è¿›è¡Œè§£åŽ‹123456//å¦‚ä½•å¯¹åŽ‹ç¼©æ–‡ä»¶è¿›è¡Œè§£åŽ‹/*ç¬¬ä¸€ä¸ªå‚æ•°ï¼šè¦è§£åŽ‹çš„æ–‡ä»¶ç¬¬äºŒä¸ªå‚æ•°ï¼šè¦è§£åŽ‹åˆ°ä»€ä¹ˆåœ°æ–¹*/[Main unzipFileAtPath:unZipFile toDestination:fullpath];]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSå¼€å‘--AFNæ¡†æž¶åŸºæœ¬ä½¿ç”¨]]></title>
    <url>%2F2016%2F04%2F12%2FiOS%E5%BC%80%E5%8F%91-AFN%E6%A1%86%E6%9E%B6%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%2F</url>
    <content type="text"><![CDATA[AFNetworking is a delightful networking library for iOS, macOS, watchOS, and tvOS. Itâ€™s built on top of the Foundation URL Loading System, extending the powerful high-level networking abstractions built into Cocoa. It has a modular architecture with well-designed, feature-rich APIs that are a joy to use. AFNå†…éƒ¨ç»“æž„NSURLConnection AFURLConnectionOperation AFHTTPRequestOperation AFHTTPRequestOperationManager(å°è£…äº†å¸¸ç”¨çš„ HTTP æ–¹æ³•) å±žæ€§ baseURL :AFNå»ºè®®å¼€å‘è€…é’ˆå¯¹ AFHTTPRequestOperationManager è‡ªå®šä¹‰ä¸ªä¸€ä¸ªå•ä¾‹å­ç±»ï¼Œè®¾ç½® baseURL, æ‰€æœ‰çš„ç½‘ç»œè®¿é—®ï¼Œéƒ½åªä½¿ç”¨ç›¸å¯¹è·¯å¾„å³å¯ requestSerializer :è¯·æ±‚æ•°æ®æ ¼å¼/é»˜è®¤æ˜¯äºŒè¿›åˆ¶çš„ HTTP responseSerializer :å“åº”çš„æ•°æ®æ ¼å¼/é»˜è®¤æ˜¯ JSON æ ¼å¼ operationQueue reachabilityManager :ç½‘ç»œè¿žæŽ¥ç®¡ç†å™¨ æ–¹æ³• manager :æ–¹ä¾¿åˆ›å»ºç®¡ç†å™¨çš„ç±»æ–¹æ³• HTTPRequestOperationWithRequest :åœ¨è®¿é—®æœåŠ¡å™¨æ—¶ï¼Œå¦‚æžœè¦å‘Šè¯‰æœåŠ¡å™¨ä¸€äº›é™„åŠ ä¿¡æ¯ï¼Œéƒ½éœ€è¦åœ¨ Request ä¸­è®¾ç½® GET POST NSURLSessionAFURLSessionManagerAFHTTPSessionManager(å°è£…äº†å¸¸ç”¨çš„ HTTP æ–¹æ³•) GET POST UIKit + AFNetworking åˆ†ç±» NSProgress :åˆ©ç”¨KVO åŠè‡ªåŠ¨çš„åºåˆ—åŒ–&amp;ååºåˆ—åŒ–çš„åŠŸèƒ½ AFURLRequestSerialization :è¯·æ±‚çš„æ•°æ®æ ¼å¼/é»˜è®¤æ˜¯äºŒè¿›åˆ¶çš„ AFURLResponseSerialization :å“åº”çš„æ•°æ®æ ¼å¼/é»˜è®¤æ˜¯JSONæ ¼å¼ é™„åŠ åŠŸèƒ½ å®‰å…¨ç­–ç•¥ HTTPS AFSecurityPolicy ç½‘ç»œæ£€æµ‹ å¯¹è‹¹æžœçš„ç½‘ç»œè¿žæŽ¥æ£€æµ‹åšäº†ä¸€ä¸ªå°è£… AFNetworkReachabilityManager AFNçš„åŸºæœ¬ä½¿ç”¨å‘é€GETè¯·æ±‚çš„ä¸¤ç§æ–¹å¼ï¼ˆPOSTåŒï¼‰1234567891011121314151617181920212223242526272829303132333435363738-(void)get1&#123; //1.åˆ›å»ºAFHTTPRequestOperationManagerç®¡ç†è€… //AFHTTPRequestOperationManagerå†…éƒ¨æ˜¯åŸºäºŽNSURLConnectionå®žçŽ°çš„ AFHTTPRequestOperationManager *manager = [AFHTTPRequestOperationManager manager]; //2.å‘é€è¯·æ±‚ /* http://120.25.226.186:32812/login?username=ee&amp;pwd=ee&amp;type=JSON ç¬¬ä¸€ä¸ªå‚æ•°ï¼šNSStringç±»åž‹çš„è¯·æ±‚è·¯å¾„ï¼ŒAFNå†…éƒ¨ä¼šè‡ªåŠ¨å°†è¯¥è·¯å¾„åŒ…è£…ä¸ºä¸€ä¸ªurlå¹¶åˆ›å»ºè¯·æ±‚å¯¹è±¡ ç¬¬äºŒä¸ªå‚æ•°ï¼šè¯·æ±‚å‚æ•°ï¼Œä»¥å­—å…¸çš„æ–¹å¼ä¼ é€’ï¼ŒAFNå†…éƒ¨ä¼šåˆ¤æ–­å½“å‰æ˜¯POSTè¯·æ±‚è¿˜æ˜¯GETè¯·æ±‚ï¼Œä»¥é€‰æ‹©ç›´æŽ¥æ‹¼æŽ¥è¿˜æ˜¯è½¬æ¢ä¸ºNSDataæ”¾åˆ°è¯·æ±‚ä½“ä¸­ä¼ é€’ ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šè¯·æ±‚æˆåŠŸä¹‹åŽå›žè°ƒBlock ç¬¬å››ä¸ªå‚æ•°ï¼šè¯·æ±‚å¤±è´¥å›žè°ƒBlock */ NSDictionary *param = @&#123; @"username":@"520it", @"pwd":@"520it" &#125;; //æ³¨æ„ï¼šå­—ç¬¦ä¸²ä¸­ä¸èƒ½åŒ…å«ç©ºæ ¼ [manager GET:@"urlå­—ç¬¦ä¸²" parameters:param success:^(AFHTTPRequestOperation * _Nonnull operation, id _Nonnull responseObject) &#123; NSLog(@"è¯·æ±‚æˆåŠŸ---%@",responseObject); &#125; failure:^(AFHTTPRequestOperation * _Nonnull operation, NSError * _Nonnull error) &#123; NSLog(@"å¤±è´¥---%@",error); &#125;];&#125;-(void)get2&#123; //1.åˆ›å»ºAFHTTPSessionManagerç®¡ç†è€… //AFHTTPSessionManagerå†…éƒ¨æ˜¯åŸºäºŽNSURLSessionå®žçŽ°çš„ AFHTTPSessionManager *manager = [AFHTTPSessionManager manager]; //2.å‘é€è¯·æ±‚ NSDictionary *param = @&#123; @"username":@"520it", @"pwd":@"520it" &#125;; //æ³¨æ„ï¼šresponseObject:è¯·æ±‚æˆåŠŸè¿”å›žçš„å“åº”ç»“æžœï¼ˆAFNå†…éƒ¨å·²ç»æŠŠå“åº”ä½“è½¬æ¢ä¸ºOCå¯¹è±¡ï¼Œé€šå¸¸æ˜¯å­—å…¸æˆ–æ•°ç»„ï¼‰ [manager GET:@"urlå­—ç¬¦ä¸²" parameters:param success:^(NSURLSessionDataTask * _Nonnull task, id _Nonnull responseObject) &#123; NSLog(@"è¯·æ±‚æˆåŠŸ---%@",[responseObject class]); &#125; failure:^(NSURLSessionDataTask * _Nonnull task, NSError * _Nonnull error) &#123; NSLog(@"å¤±è´¥---%@",error); &#125;];&#125; ä½¿ç”¨AFNä¸‹è½½æ–‡ä»¶1234567891011121314151617181920212223242526272829303132333435363738-(void)download&#123; //1.åˆ›å»ºä¸€ä¸ªç®¡ç†è€… AFHTTPSessionManager *manage = [AFHTTPSessionManager manager]; //2.ä¸‹è½½æ–‡ä»¶ /* ç¬¬ä¸€ä¸ªå‚æ•°ï¼šè¯·æ±‚å¯¹è±¡ ç¬¬äºŒä¸ªå‚æ•°ï¼šä¸‹è½½è¿›åº¦ ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šblockå›žè°ƒï¼Œéœ€è¦è¿”å›žä¸€ä¸ªurlåœ°å€ï¼Œç”¨æ¥å‘Šè¯‰AFNä¸‹è½½æ–‡ä»¶çš„ç›®æ ‡åœ°å€ targetPathï¼šAFNå†…éƒ¨ä¸‹è½½æ–‡ä»¶å­˜å‚¨çš„åœ°å€ï¼Œtmpæ–‡ä»¶å¤¹ä¸‹ responseï¼šè¯·æ±‚çš„å“åº”å¤´ è¿”å›žå€¼ï¼šæ–‡ä»¶åº”è¯¥å‰ªåˆ‡åˆ°ä»€ä¹ˆåœ°æ–¹ ç¬¬å››ä¸ªå‚æ•°ï¼šblockå›žè°ƒï¼Œå½“æ–‡ä»¶ä¸‹è½½å®Œæˆä¹‹åŽè°ƒç”¨ responseï¼šå“åº”å¤´ filePathï¼šæ–‡ä»¶å­˜å‚¨åœ¨æ²™ç›’çš„åœ°å€ == ç¬¬ä¸‰ä¸ªå‚æ•°ä¸­blockçš„è¿”å›žå€¼ errorï¼šé”™è¯¯ä¿¡æ¯ */ //2.1 åˆ›å»ºè¯·æ±‚å¯¹è±¡ NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"urlå­—ç¬¦ä¸²"]]; //2.2 åˆ›å»ºä¸‹è½½è¿›åº¦ï¼Œå¹¶ç›‘å¬ NSProgress *progress = nil; NSURLSessionDownloadTask *downloadTask = [manage downloadTaskWithRequest:request progress:&amp;progress destination:^NSURL * _Nonnull(NSURL * _Nonnull targetPath, NSURLResponse * _Nonnull response) &#123; NSString *caches = [NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) lastObject]; //æ‹¼æŽ¥æ–‡ä»¶å…¨è·¯å¾„ NSString *fullpath = [caches stringByAppendingPathComponent:response.suggestedFilename]; NSURL *filePathUrl = [NSURL fileURLWithPath:fullpath]; return filePathUrl; &#125; completionHandler:^(NSURLResponse * _Nonnull response, NSURL * _Nonnull filePath, NSError * _Nonnull error) &#123; NSLog(@"æ–‡ä»¶ä¸‹è½½å®Œæ¯•---%@",filePath); &#125;]; //2.3 ä½¿ç”¨KVOç›‘å¬ä¸‹è½½è¿›åº¦ [progress addObserver:self forKeyPath:@"completedUnitCount" options:NSKeyValueObservingOptionNew context:nil]; //3.å¯åŠ¨ä»»åŠ¡ [downloadTask resume];&#125;//èŽ·å–å¹¶è®¡ç®—å½“å‰æ–‡ä»¶çš„ä¸‹è½½è¿›åº¦-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(NSProgress *)progress change:(NSDictionary&lt;NSString *,id&gt; *)change context:(void *)context&#123; NSLog(@"%zd--%zd--%f",progress.completedUnitCount,progress.totalUnitCount,1.0 * progress.completedUnitCount/progress.totalUnitCount);&#125;]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSç½‘ç»œç¼–ç¨‹--æ–‡ä»¶ä¸Šä¼ ]]></title>
    <url>%2F2016%2F04%2F12%2FiOS%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B-%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%2F</url>
    <content type="text"><![CDATA[NSURLConnectionå®žçŽ°æ–‡ä»¶ä¸Šä¼  æ–‡ä»¶ä¸Šä¼ æ­¥éª¤1.ç¡®å®šè¯·æ±‚è·¯å¾„2.æ ¹æ®URLåˆ›å»ºä¸€ä¸ªå¯å˜çš„è¯·æ±‚å¯¹è±¡3.è®¾ç½®è¯·æ±‚å¯¹è±¡ï¼Œä¿®æ”¹è¯·æ±‚æ–¹å¼ä¸ºPOST4.è®¾ç½®è¯·æ±‚å¤´ï¼Œå‘Šè¯‰æœåŠ¡å™¨æˆ‘ä»¬å°†è¦ä¸Šä¼ æ–‡ä»¶ï¼ˆContent-Typeï¼‰5.è®¾ç½®è¯·æ±‚ä½“ï¼ˆåœ¨è¯·æ±‚ä½“ä¸­æŒ‰ç…§æ—¢å®šçš„æ ¼å¼æ‹¼æŽ¥è¦ä¸Šä¼ çš„æ–‡ä»¶å‚æ•°å’Œéžæ–‡ä»¶å‚æ•°ç­‰æ•°æ®ï¼‰ æ‹¼æŽ¥æ–‡ä»¶å‚æ•° æ‹¼æŽ¥éžæ–‡ä»¶å‚æ•° æ·»åŠ ç»“å°¾æ ‡è®° 6.ä½¿ç”¨NSURLConnection sendAsyncå‘é€å¼‚æ­¥è¯·æ±‚ä¸Šä¼ æ–‡ä»¶7.è§£æžæœåŠ¡å™¨è¿”å›žçš„æ•°æ® æ–‡ä»¶ä¸Šä¼ è®¾ç½®è¯·æ±‚ä½“çš„æ•°æ®æ ¼å¼ 123456789101112131415//è¯·æ±‚ä½“æ‹¼æŽ¥æ ¼å¼ //åˆ†éš”ç¬¦ï¼š----WebKitFormBoundaryhBDKBUWBHnAgvz9c //01.æ–‡ä»¶å‚æ•°æ‹¼æŽ¥æ ¼å¼ --åˆ†éš”ç¬¦ Content-Disposition:å‚æ•° Content-Type:å‚æ•° ç©ºè¡Œ æ–‡ä»¶å‚æ•° //02.éžæ–‡ä»¶æ‹¼æŽ¥å‚æ•° --åˆ†éš”ç¬¦ Content-Disposition:å‚æ•° ç©ºè¡Œ éžæ–‡ä»¶çš„äºŒè¿›åˆ¶æ•°æ® //03.ç»“å°¾æ ‡è¯† --åˆ†éš”ç¬¦-- æ–‡ä»¶ä¸Šä¼ ç›¸å…³ä»£ç  1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859-(void)upload &#123; //1.ç¡®å®šè¯·æ±‚è·¯å¾„ NSURL *url = [NSURL URLWithString:@&quot;URLå­—ç¬¦ä¸²&quot;]; //2.åˆ›å»ºä¸€ä¸ªå¯å˜çš„è¯·æ±‚å¯¹è±¡ NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url]; //3.è®¾ç½®è¯·æ±‚æ–¹å¼ä¸ºPOST request.HTTPMethod = @&quot;POST&quot;; //4.è®¾ç½®è¯·æ±‚å¤´ NSString *filed = [NSString stringWithFormat:@&quot;multipart/form-data; boundary=%@&quot;,Kboundary]; [request setValue:filed forHTTPHeaderField:@&quot;Content-Type&quot;]; //5.è®¾ç½®è¯·æ±‚ä½“ NSMutableData *data = [NSMutableData data]; //5.1 æ–‡ä»¶å‚æ•° /* --åˆ†éš”ç¬¦ Content-Disposition:å‚æ•° Content-Type:å‚æ•° ç©ºè¡Œ æ–‡ä»¶å‚æ•° */ [data appendData:[[NSString stringWithFormat:@&quot;--%@&quot;,Kboundary] dataUsingEncoding:NSUTF8StringEncoding]]; [data appendData:KnewLine]; [data appendData:[@&quot;Content-Disposition: form-data; name=\&quot;file\&quot;; filename=\&quot;test.png\&quot;&quot; dataUsingEncoding:NSUTF8StringEncoding]];[data appendData:KnewLine]; [data appendData:[@&quot;Content-Type: image/png&quot; dataUsingEncoding:NSUTF8StringEncoding]];[data appendData:KnewLine]; [data appendData:KnewLine]; [data appendData:KnewLine]; UIImage *image = [UIImage imageNamed:@&quot;test&quot;]; NSData *imageData = UIImagePNGRepresentation(image); [data appendData:imageData]; [data appendData:KnewLine]; //5.2 éžæ–‡ä»¶å‚æ•° /* --åˆ†éš”ç¬¦ Content-Disposition:å‚æ•° ç©ºè¡Œ éžæ–‡ä»¶å‚æ•°çš„äºŒè¿›åˆ¶æ•°æ® */ [data appendData:[[NSString stringWithFormat:@&quot;--%@&quot;,Kboundary] dataUsingEncoding:NSUTF8StringEncoding]]; [data appendData:KnewLine]; [data appendData:[@&quot;Content-Disposition: form-data;name=\&quot;username\&quot;&quot; dataUsingEncoding:NSUTF8StringEncoding]];[data appendData:KnewLine]; [data appendData:KnewLine]; [data appendData:KnewLine]; NSData *nameData = [@&quot;wendingding&quot; dataUsingEncoding:NSUTF8StringEncoding]; [data appendData:nameData]; [data appendData:KnewLine];//5.3 ç»“å°¾æ ‡è¯† //--åˆ†éš”ç¬¦-- [data appendData:[[NSString stringWithFormat:@&quot;--%@--&quot;,Kboundary] dataUsingEncoding:NSUTF8StringEncoding]]; [data appendData:KnewLine]; request.HTTPBody = data; //6.å‘é€è¯·æ±‚ [NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse * __nullable response, NSData * __nullable data, NSError * __nullable connectionError) &#123; //7.è§£æžæœåŠ¡å™¨è¿”å›žçš„æ•°æ® NSLog(@&quot;%@&quot;,[NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:nil]); &#125;]; &#125; å¦‚ä½•èŽ·å¾—æ–‡ä»¶çš„MIMETypeç±»åž‹ ç›´æŽ¥å¯¹è¯¥å¯¹è±¡å‘é€ä¸€ä¸ªå¼‚æ­¥ç½‘ç»œè¯·æ±‚ï¼Œåœ¨å“åº”å¤´ä¸­é€šè¿‡response.MIMETypeæ‹¿åˆ°æ–‡ä»¶çš„MIMETypeç±»åž‹ 123456789101112131415//å¦‚æžœæƒ³è¦åŠæ—¶æ‹¿åˆ°è¯¥æ•°æ®ï¼Œé‚£ä¹ˆå¯ä»¥å‘é€ä¸€ä¸ªåŒæ­¥è¯·æ±‚-(NSString *)getMIMEType&#123; NSString *filePath = @&quot;æ–‡ä»¶æ‰€åœ¨è·¯å¾„&quot;;NSURLResponse *response = nil; [NSURLConnection sendSynchronousRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:filePath]] returningResponse:&amp;response error:nil]; return response.MIMEType;&#125;//å¯¹è¯¥æ–‡ä»¶å‘é€ä¸€ä¸ªå¼‚æ­¥è¯·æ±‚ï¼Œæ‹¿åˆ°æ–‡ä»¶çš„MIMEType-(void)MIMEType&#123; // NSString *file = @&quot;æ–‡ä»¶æ‰€åœ¨è·¯å¾„&quot;; [NSURLConnection sendAsynchronousRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:@&quot;/Users/æ–‡é¡¶é¡¶/Desktop/test.png&quot;]] queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse * __nullable response, NSData * __nullable data, NSError * __nullable connectionError) &#123; // response.MIMEType NSLog(@&quot;%@&quot;,response.MIMEType); &#125;];&#125; é€šè¿‡UTTypeCopyPreferredTagWithClassæ–¹æ³• 123456789101112//æ³¨æ„ï¼šéœ€è¦ä¾èµ–äºŽæ¡†æž¶MobileCoreServices-(NSString *)mimeTypeForFileAtPath:(NSString *)path&#123; if (![[[NSFileManager alloc] init] fileExistsAtPath:path]) &#123; return nil; &#125; CFStringRef UTI = UTTypeCreatePreferredIdentifierForTag(kUTTagClassFilenameExtension, (__bridge CFStringRef)[path pathExtension], NULL); CFStringRef MIMEType = UTTypeCopyPreferredTagWithClass (UTI, kUTTagClassMIMEType); CFRelease(UTI); if (!MIMEType) &#123; return @&quot;application/octet-stream&quot;; &#125; return (__bridge NSString *)(MIMEType);&#125; NSURLSessionå®žçŽ°æ–‡ä»¶ä¸Šä¼  å®žçŽ°æ–‡ä»¶ä¸Šä¼ çš„æ–¹æ³• 123456789 /*ç¬¬ä¸€ä¸ªå‚æ•°ï¼šè¯·æ±‚å¯¹è±¡ç¬¬äºŒä¸ªå‚æ•°ï¼šè¯·æ±‚ä½“ï¼ˆè¦ä¸Šä¼ çš„æ–‡ä»¶æ•°æ®ï¼‰blockå›žè°ƒï¼šNSData:å“åº”ä½“NSURLResponseï¼šå“åº”å¤´NSErrorï¼šè¯·æ±‚çš„é”™è¯¯ä¿¡æ¯*/NSURLSessionUploadTask *uploadTask = [session uploadTaskWithRequest:request fromData:data completionHandler:^(NSData * __nullable data, NSURLResponse * __nullable response, NSError * __nullable error) è®¾ç½®ä»£ç†ï¼Œåœ¨ä»£ç†æ–¹æ³•ä¸­ç›‘å¬æ–‡ä»¶ä¸Šä¼ è¿›åº¦ 1234567891011/*è°ƒç”¨è¯¥æ–¹æ³•ä¸Šä¼ æ–‡ä»¶æ•°æ®å¦‚æžœæ–‡ä»¶æ•°æ®å¾ˆå¤§ï¼Œé‚£ä¹ˆè¯¥æ–¹æ³•ä¼šè¢«è°ƒç”¨å¤šæ¬¡å‚æ•°è¯´æ˜Žï¼š totalBytesSentï¼šå·²ç»ä¸Šä¼ çš„æ–‡ä»¶æ•°æ®çš„å¤§å° totalBytesExpectedToSendï¼šæ–‡ä»¶çš„æ€»å¤§å°*/-(void)URLSession:(nonnull NSURLSession *)session task:(nonnull NSURLSessionTask *)task didSendBodyData:(int64_t)bytesSent totalBytesSent:(int64_t)totalBytesSent totalBytesExpectedToSend:(int64_t)totalBytesExpectedToSend&#123; NSLog(@&quot;%.2f&quot;,1.0 * totalBytesSent/totalBytesExpectedToSend);&#125; å…³äºŽNSURLSessionConfigurationç›¸å…³ ä½œç”¨ï¼šå¯ä»¥ç»Ÿä¸€é…ç½®NSURLSession,å¦‚è¯·æ±‚è¶…æ—¶ç­‰ åˆ›å»ºçš„æ–¹å¼å’Œä½¿ç”¨123456789101112131415161718//åˆ›å»ºé…ç½®çš„ä¸‰ç§æ–¹å¼+(NSURLSessionConfiguration *)defaultSessionConfiguration;+(NSURLSessionConfiguration *)ephemeralSessionConfiguration;+(NSURLSessionConfiguration *)backgroundSessionConfigurationWithIdentifier:(NSString *)identifier NS_AVAILABLE(10_10, 8_0);//ç»Ÿä¸€é…ç½®NSURLSession-(NSURLSession *)session&#123; if (_session == nil) &#123; //åˆ›å»ºNSURLSessionConfiguration NSURLSessionConfiguration *config = [NSURLSessionConfiguration defaultSessionConfiguration]; //è®¾ç½®è¯·æ±‚è¶…æ—¶ä¸º10ç§’é’Ÿ config.timeoutIntervalForRequest = 10; //åœ¨èœ‚çªç½‘ç»œæƒ…å†µä¸‹æ˜¯å¦ç»§ç»­è¯·æ±‚ï¼ˆä¸Šä¼ æˆ–ä¸‹è½½ï¼‰ config.allowsCellularAccess = NO; _session = [NSURLSession sessionWithConfiguration:config delegate:self delegateQueue:[NSOperationQueue mainQueue]]; &#125; return _session;&#125;]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSç½‘ç»œç¼–ç¨‹--æ–‡ä»¶ä¸‹è½½]]></title>
    <url>%2F2016%2F04%2F12%2FiOS%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B-%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%2F</url>
    <content type="text"><![CDATA[ä½¿ç”¨NSURLConnectionå®žçŽ°ä¸‹è½½ 1. å°æ–‡ä»¶ä¸‹è½½ ç¬¬ä¸€ç§æ–¹å¼ï¼ˆNSDataï¼‰ 12345678910//ä½¿ç”¨NSDtaç›´æŽ¥åŠ è½½ç½‘ç»œä¸Šçš„urlèµ„æºï¼ˆä¸è€ƒè™‘çº¿ç¨‹ï¼‰ -(void)dataDownload &#123; //1.ç¡®å®šèµ„æºè·¯å¾„ NSURL *url = [NSURL URLWithString:@&quot;http://tupian.qqjay.com/u/2013/1127/19_222949_14.jpg&quot;]; //2.æ ¹æ®URLåŠ è½½å¯¹åº”çš„èµ„æº NSData *data = [NSData dataWithContentsOfURL:url]; //3.è½¬æ¢å¹¶æ˜¾ç¤ºæ•°æ® UIImage *image = [UIImage imageWithData:data]; self.imageView.image = image; &#125; ç¬¬äºŒç§æ–¹å¼ï¼ˆNSURLConnection-sendAsyncï¼‰ 12345678910111213//ä½¿ç”¨NSURLConnectionå‘é€å¼‚æ­¥è¯·æ±‚ä¸‹è½½æ–‡ä»¶èµ„æº -(void)connectDownload &#123; //1.ç¡®å®šè¯·æ±‚è·¯å¾„ NSURL *url = [NSURL URLWithString:@&quot;http://tupian.qqjay.com/u/2013/1127/19_222949_14.jpg&quot;]; //2.åˆ›å»ºè¯·æ±‚å¯¹è±¡ NSURLRequest *request = [NSURLRequest requestWithURL:url]; //3.ä½¿ç”¨NSURLConnectionå‘é€ä¸€ä¸ªå¼‚æ­¥è¯·æ±‚ [NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse * _Nullable response, NSData * _Nullable data, NSError * _Nullable connectionError) &#123; //4.æ‹¿åˆ°å¹¶å¤„ç†æ•°æ® UIImage *image = [UIImage imageWithData:data]; self.imageView.image = image; &#125;]; &#125; ç¬¬ä¸‰ç§æ–¹å¼ï¼ˆNSURLConnection-delegateï¼‰ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051//ä½¿ç”¨NSURLConnectionè®¾ç½®ä»£ç†å‘é€å¼‚æ­¥è¯·æ±‚çš„æ–¹å¼ä¸‹è½½æ–‡ä»¶ -(void)connectionDelegateDownload &#123; //1.ç¡®å®šè¯·æ±‚è·¯å¾„ NSURL *url = [NSURL URLWithString:@&quot;ä¸‹è½½æ–‡ä»¶çš„URLåœ°å€&quot;]; //2.åˆ›å»ºè¯·æ±‚å¯¹è±¡ NSURLRequest *request = [NSURLRequest requestWithURL:url]; //3.ä½¿ç”¨NSURLConnectionè®¾ç½®ä»£ç†å¹¶å‘é€å¼‚æ­¥è¯·æ±‚ [NSURLConnection connectionWithRequest:request delegate:self]; &#125;pragma mark--NSURLConnectionDataDelegate//å½“æŽ¥æ”¶åˆ°æœåŠ¡å™¨å“åº”çš„æ—¶å€™è°ƒç”¨ï¼Œè¯¥æ–¹æ³•åªä¼šè°ƒç”¨ä¸€æ¬¡-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response&#123; //åˆ›å»ºä¸€ä¸ªå®¹å™¨ï¼Œç”¨æ¥æŽ¥æ”¶æœåŠ¡å™¨è¿”å›žçš„æ•°æ® self.fileData = [NSMutableData data]; //èŽ·å¾—å½“å‰è¦ä¸‹è½½æ–‡ä»¶çš„æ€»å¤§å°ï¼ˆé€šè¿‡å“åº”å¤´å¾—åˆ°ï¼‰ NSHTTPURLResponse *res = (NSHTTPURLResponse *)response; self.totalLength = res.expectedContentLength; NSLog(@&quot;%zd&quot;,self.totalLength); //æ‹¿åˆ°æœåŠ¡å™¨ç«¯æŽ¨èçš„æ–‡ä»¶åç§° self.fileName = res.suggestedFilename;&#125;//å½“æŽ¥æ”¶åˆ°æœåŠ¡å™¨è¿”å›žçš„æ•°æ®æ—¶ä¼šè°ƒç”¨//è¯¥æ–¹æ³•å¯èƒ½ä¼šè¢«è°ƒç”¨å¤šæ¬¡-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data&#123;// NSLog(@&quot;%s&quot;,__func__); //æ‹¼æŽ¥æ¯æ¬¡ä¸‹è½½çš„æ•°æ® [self.fileData appendData:data]; //è®¡ç®—å½“å‰ä¸‹è½½è¿›åº¦å¹¶åˆ·æ–°UIæ˜¾ç¤º self.currentLength = self.fileData.length; NSLog(@&quot;%f&quot;,1.0* self.currentLength/self.totalLength); self.progressView.progress = 1.0* self.currentLength/self.totalLength;&#125;//å½“ç½‘ç»œè¯·æ±‚ç»“æŸä¹‹åŽè°ƒç”¨-(void)connectionDidFinishLoading:(NSURLConnection *)connection&#123; //æ–‡ä»¶ä¸‹è½½å®Œæ¯•æŠŠæŽ¥å—åˆ°çš„æ–‡ä»¶æ•°æ®å†™å…¥åˆ°æ²™ç›’ä¸­ä¿å­˜ //1.ç¡®å®šè¦ä¿å­˜æ–‡ä»¶çš„å…¨è·¯å¾„ //cachesæ–‡ä»¶å¤¹è·¯å¾„ NSString *caches = [NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) lastObject]; NSString *fullPath = [caches stringByAppendingPathComponent:self.fileName]; //2.å†™æ•°æ®åˆ°æ–‡ä»¶ä¸­ [self.fileData writeToFile:fullPath atomically:YES]; NSLog(@&quot;%@&quot;,fullPath);&#125;//å½“è¯·æ±‚å¤±è´¥çš„æ—¶å€™è°ƒç”¨è¯¥æ–¹æ³•-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error&#123; NSLog(@&quot;%s&quot;,__func__);&#125; 2. å¤§æ–‡ä»¶ä¸‹è½½ å®žçŽ°æ€è·¯è¾¹æŽ¥æ”¶æ•°æ®è¾¹å†™æ–‡ä»¶ä»¥è§£å†³å†…å­˜è¶Šæ¥è¶Šå¤§çš„é—®é¢˜ æ ¸å¿ƒä»£ç 123456789101112131415161718192021222324252627282930//å½“æŽ¥æ”¶åˆ°æœåŠ¡å™¨å“åº”çš„æ—¶å€™è°ƒç”¨ï¼Œè¯¥æ–¹æ³•åªä¼šè°ƒç”¨ä¸€æ¬¡ -(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response &#123; //0.èŽ·å¾—å½“å‰è¦ä¸‹è½½æ–‡ä»¶çš„æ€»å¤§å°ï¼ˆé€šè¿‡å“åº”å¤´å¾—åˆ°ï¼‰ NSHTTPURLResponse *res = (NSHTTPURLResponse *)response; self.totalLength = res.expectedContentLength; NSLog(@&quot;%zd&quot;,self.totalLength); //åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼Œç”¨æ¥å½“æŽ¥æ”¶åˆ°æœåŠ¡å™¨è¿”å›žæ•°æ®çš„æ—¶å€™å¾€è¯¥æ–‡ä»¶ä¸­å†™å…¥æ•°æ® //1.èŽ·å–æ–‡ä»¶ç®¡ç†è€… NSFileManager *manager = [NSFileManager defaultManager]; //2.æ‹¼æŽ¥æ–‡ä»¶çš„å…¨è·¯å¾„ //cachesæ–‡ä»¶å¤¹è·¯å¾„ NSString *caches = [NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) lastObject]; NSString *fullPath = [caches stringByAppendingPathComponent:res.suggestedFilename]; self.fullPath = fullPath; //3.åˆ›å»ºä¸€ä¸ªç©ºçš„æ–‡ä»¶ [manager createFileAtPath:fullPath contents:nil attributes:nil]; &#125; //å½“æŽ¥æ”¶åˆ°æœåŠ¡å™¨è¿”å›žçš„æ•°æ®æ—¶ä¼šè°ƒç”¨ //è¯¥æ–¹æ³•å¯èƒ½ä¼šè¢«è°ƒç”¨å¤šæ¬¡ -(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data &#123; //1.åˆ›å»ºä¸€ä¸ªç”¨æ¥å‘æ–‡ä»¶ä¸­å†™æ•°æ®çš„æ–‡ä»¶å¥æŸ„ //æ³¨æ„å½“ä¸‹è½½å®Œæˆä¹‹åŽï¼Œè¯¥æ–‡ä»¶å¥æŸ„éœ€è¦å…³é—­ï¼Œè°ƒç”¨closeFileæ–¹æ³• NSFileHandle *handle = [NSFileHandle fileHandleForWritingAtPath:self.fullPath]; //2.è®¾ç½®å†™æ•°æ®çš„ä½ç½®(è¿½åŠ ) [handle seekToEndOfFile]; //3.å†™æ•°æ® [handle writeData:data]; //4.è®¡ç®—å½“å‰æ–‡ä»¶çš„ä¸‹è½½è¿›åº¦ self.currentLength += data.length; NSLog(@&quot;%f&quot;,1.0* self.currentLength/self.totalLength); self.progressView.progress = 1.0* self.currentLength/self.totalLength;&#125; 3. å¤§æ–‡ä»¶æ–­ç‚¹ç»­ä¼  å®žçŽ°æ€è·¯åœ¨ä¸‹è½½æ–‡ä»¶çš„æ—¶å€™ä¸å†æ˜¯æ•´å—çš„ä»Žå¤´å¼€å§‹ä¸‹è½½ï¼Œè€Œæ˜¯çœ‹å½“å‰æ–‡ä»¶å·²ç»ä¸‹è½½åˆ°å“ªä¸ªåœ°æ–¹ï¼Œç„¶åŽä»Žè¯¥åœ°æ–¹æŽ¥ç€å¾€åŽé¢ä¸‹è½½ã€‚å¯ä»¥é€šè¿‡åœ¨è¯·æ±‚å¯¹è±¡ä¸­è®¾ç½®è¯·æ±‚å¤´å®žçŽ°ã€‚ è§£å†³æ–¹æ¡ˆï¼ˆè®¾ç½®è¯·æ±‚å¤´ï¼‰ 123456789101112//2.åˆ›å»ºè¯·æ±‚å¯¹è±¡ NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url]; //2.1 è®¾ç½®ä¸‹è½½æ–‡ä»¶çš„æŸä¸€éƒ¨åˆ† // åªè¦è®¾ç½®HTTPè¯·æ±‚å¤´çš„Rangeå±žæ€§, å°±å¯ä»¥å®žçŽ°ä»ŽæŒ‡å®šä½ç½®å¼€å§‹ä¸‹è½½ /* è¡¨ç¤ºå¤´500ä¸ªå­—èŠ‚ï¼šRange: bytes=0-499 è¡¨ç¤ºç¬¬äºŒä¸ª500å­—èŠ‚ï¼šRange: bytes=500-999 è¡¨ç¤ºæœ€åŽ500ä¸ªå­—èŠ‚ï¼šRange: bytes=-500 è¡¨ç¤º500å­—èŠ‚ä»¥åŽçš„èŒƒå›´ï¼šRange: bytes=500- */ NSString *range = [NSString stringWithFormat:@&quot;bytes=%zd-&quot;,self.currentLength]; [request setValue:range forHTTPHeaderField:@&quot;Range&quot;]; æ³¨æ„ç‚¹ï¼ˆä¸‹è½½è¿›åº¦å¹¶åˆ¤æ–­æ˜¯å¦éœ€è¦é‡æ–°åˆ›å»ºæ–‡ä»¶ï¼‰ 12345678//èŽ·å¾—å½“å‰è¦ä¸‹è½½æ–‡ä»¶çš„æ€»å¤§å°ï¼ˆé€šè¿‡å“åº”å¤´å¾—åˆ°ï¼‰ NSHTTPURLResponse *res = (NSHTTPURLResponse *)response; //æ³¨æ„ç‚¹ï¼šres.expectedContentLengthèŽ·å¾—æ˜¯æœ¬æ¬¡è¯·æ±‚è¦ä¸‹è½½çš„æ–‡ä»¶çš„å¤§å°ï¼ˆå¹¶éžæ˜¯å®Œæ•´çš„æ–‡ä»¶çš„å¤§å°ï¼‰ //å› æ­¤ï¼šæ–‡ä»¶çš„æ€»å¤§å° == æœ¬æ¬¡è¦ä¸‹è½½çš„æ–‡ä»¶å¤§å°+å·²ç»ä¸‹è½½çš„æ–‡ä»¶çš„å¤§å° self.totalLength = res.expectedContentLength + self.currentLength; NSLog(@&quot;----------------------------%zd&quot;,self.totalLength); //0 åˆ¤æ–­å½“å‰æ˜¯å¦å·²ç»ä¸‹è½½è¿‡ï¼Œå¦‚æžœå½“å‰æ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œé‚£ä¹ˆç›´æŽ¥è¿”å›ž if (self.currentLength &gt;0) &#123; return; &#125; è¾“å‡ºæµ ä½¿ç”¨è¾“å‡ºæµä¹Ÿå¯ä»¥å®žçŽ°å’ŒNSFileHandleç›¸åŒçš„åŠŸèƒ½ å¦‚ä½•ä½¿ç”¨ 123456789101112131415161718192021//1.åˆ›å»ºä¸€ä¸ªæ•°æ®è¾“å‡ºæµ/*ç¬¬ä¸€ä¸ªå‚æ•°ï¼šäºŒè¿›åˆ¶çš„æµæ•°æ®è¦å†™å…¥åˆ°å“ªé‡Œç¬¬äºŒä¸ªå‚æ•°ï¼šé‡‡ç”¨ä»€ä¹ˆæ ·çš„æ–¹å¼å†™å…¥æµæ•°æ®ï¼Œå¦‚æžœYESåˆ™è¡¨ç¤ºè¿½åŠ ï¼Œå¦‚æžœæ˜¯NOåˆ™è¡¨ç¤ºè¦†ç›–*/NSOutputStream *stream = [NSOutputStream outputStreamToFileAtPath:fullPath append:YES];//åªè¦è°ƒç”¨äº†è¯¥æ–¹æ³•å°±ä¼šå¾€æ–‡ä»¶ä¸­å†™æ•°æ®//å¦‚æžœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆä¼šè‡ªåŠ¨çš„åˆ›å»ºä¸€ä¸ª[stream open];self.stream = stream;//2.å½“æŽ¥æ”¶åˆ°æ•°æ®çš„æ—¶å€™å†™æ•°æ®//ä½¿ç”¨è¾“å‡ºæµå†™æ•°æ®/*ç¬¬ä¸€ä¸ªå‚æ•°ï¼šè¦å†™å…¥çš„äºŒè¿›åˆ¶æ•°æ®ç¬¬äºŒä¸ªå‚æ•°ï¼šè¦å†™å…¥çš„æ•°æ®çš„å¤§å°*/[self.stream write:data.bytes maxLength:data.length];//3.å½“æ–‡ä»¶ä¸‹è½½å®Œæ¯•çš„æ—¶å€™å…³é—­è¾“å‡ºæµ//å…³é—­è¾“å‡ºæµ[self.stream close];self.stream = nil; ä½¿ç”¨å¤šçº¿ç¨‹ä¸‹è½½æ–‡ä»¶çš„æ€è·¯ 01 å¼€å¯å¤šæ¡çº¿ç¨‹ï¼Œæ¯æ¡çº¿ç¨‹éƒ½åªä¸‹è½½æ–‡ä»¶çš„ä¸€éƒ¨åˆ†ï¼ˆé€šè¿‡è®¾ç½®è¯·æ±‚å¤´ä¸­çš„Rangeæ¥å®žçŽ°ï¼‰ 02 åˆ›å»ºä¸€ä¸ªå’Œéœ€è¦ä¸‹è½½æ–‡ä»¶å¤§å°ä¸€è‡´çš„æ–‡ä»¶ï¼Œåˆ¤æ–­å½“å‰æ˜¯é‚£ä¸ªçº¿ç¨‹ï¼Œæ ¹æ®å½“å‰çš„çº¿ç¨‹æ¥åˆ¤æ–­ä¸‹è½½çš„æ•°æ®åº”è¯¥å†™å…¥åˆ°æ–‡ä»¶ä¸­çš„å“ªä¸ªä½ç½®ã€‚ï¼ˆå‡è®¾å¼€5æ¡çº¿ç¨‹æ¥ä¸‹è½½10Mçš„æ–‡ä»¶ï¼Œé‚£ä¹ˆçº¿ç¨‹1ä¸‹è½½0-2Mï¼Œçº¿ç¨‹2ä¸‹è½½2-4Mä¸€æ¬¡ç±»æŽ¨ï¼Œå½“æŽ¥æ”¶åˆ°æœåŠ¡å™¨è¿”å›žçš„æ•°æ®ä¹‹åŽåº”è¯¥å…ˆåˆ¤æ–­å½“å‰çº¿ç¨‹æ˜¯å“ªä¸ªçº¿ç¨‹ï¼Œå‡å¦‚å½“å‰çº¿ç¨‹æ˜¯çº¿ç¨‹2ï¼Œé‚£ä¹ˆåœ¨å†™æ•°æ®çš„æ—¶å€™å°±ä»Žæ–‡ä»¶çš„2Mä½ç½®å¼€å§‹å†™å…¥ï¼‰ 03 ä»£ç ç›¸å…³ï¼šä½¿ç”¨NSFileHandleè¿™ä¸ªç±»çš„seekToFileOfSetæ–¹æ³•ï¼Œæ¥å‘æ–‡ä»¶ä¸­ç‰¹å®šçš„ä½ç½®å†™å…¥æ•°æ®ã€‚ 04 æŠ€æœ¯ç›¸å…³a.æ¯ä¸ªçº¿ç¨‹é€šè¿‡è®¾ç½®è¯·æ±‚å¤´ä¸‹è½½æ–‡ä»¶ä¸­çš„æŸä¸€ä¸ªéƒ¨åˆ†b.é€šè¿‡NSFileHandleå‘æ–‡ä»¶ä¸­çš„æŒ‡å®šä½ç½®å†™æ•°æ® ä½¿ç”¨NSURLSessionå®žçŽ°ä¸‹è½½ 1. NSURLSessionä¸‹è½½æ–‡ä»¶-ä»£ç† åˆ›å»ºNSURLSessionå¯¹è±¡ï¼Œè®¾ç½®ä»£ç†ï¼ˆé»˜è®¤é…ç½®ï¼‰ 1234567//1.åˆ›å»ºNSURLSession,å¹¶è®¾ç½®ä»£ç† /* ç¬¬ä¸€ä¸ªå‚æ•°ï¼šsessionå¯¹è±¡çš„å…¨å±€é…ç½®è®¾ç½®ï¼Œä¸€èˆ¬ä½¿ç”¨é»˜è®¤é…ç½®å°±å¯ä»¥ ç¬¬äºŒä¸ªå‚æ•°ï¼šè°æˆä¸ºsessionå¯¹è±¡çš„ä»£ç† ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šä»£ç†æ–¹æ³•åœ¨å“ªä¸ªé˜Ÿåˆ—ä¸­æ‰§è¡Œï¼ˆåœ¨å“ªä¸ªçº¿ç¨‹ä¸­è°ƒç”¨ï¼‰,å¦‚æžœæ˜¯ä¸»é˜Ÿåˆ—é‚£ä¹ˆåœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œå¦‚æžœæ˜¯éžä¸»é˜Ÿåˆ—ï¼Œé‚£ä¹ˆåœ¨å­çº¿ç¨‹ä¸­æ‰§è¡Œ */ NSURLSession *session = [NSURLSession sessionWithConfiguration:[NSURLSessionConfiguration defaultSessionConfiguration] delegate:self delegateQueue:[NSOperationQueue mainQueue]]; æ ¹æ®Sessionå¯¹è±¡åˆ›å»ºä¸€ä¸ªNSURLSessionDataTaskä»»åŠ¡ï¼ˆpostå’Œgeté€‰æ‹©ï¼‰ 1234//åˆ›å»ºtaskNSURL *url = [NSURL URLWithString:@&quot;http://tupian.qqjay.com/u/2013/1127/19_222949_14.jpg&quot;];//æ³¨æ„ï¼šå¦‚æžœè¦å‘é€POSTè¯·æ±‚ï¼Œé‚£ä¹ˆè¯·ä½¿ç”¨dataTaskWithRequest,è®¾ç½®ä¸€äº›è¯·æ±‚å¤´ä¿¡æ¯NSURLSessionDataTask *dataTask = [session dataTaskWithURL:url]; æ‰§è¡Œä»»åŠ¡ï¼ˆå…¶å®ƒæ–¹æ³•ï¼Œå¦‚æš‚åœã€å–æ¶ˆç­‰ï¼‰ 12345//å¯åŠ¨task//[dataTask resume];//å…¶å®ƒæ–¹æ³•ï¼Œå¦‚å–æ¶ˆä»»åŠ¡ï¼Œæš‚åœä»»åŠ¡ç­‰//[dataTask cancel];//[dataTask suspend]; éµå®ˆä»£ç†åè®®ï¼Œå®žçŽ°ä»£ç†æ–¹æ³•ï¼ˆ3ä¸ªç›¸å…³çš„ä»£ç†æ–¹æ³•ï¼‰ 12345678910111213141516/* 1.å½“æŽ¥æ”¶åˆ°æœåŠ¡å™¨å“åº”çš„æ—¶å€™è°ƒç”¨ sessionï¼šå‘é€è¯·æ±‚çš„sessionå¯¹è±¡ dataTaskï¼šæ ¹æ®NSURLSessionåˆ›å»ºçš„taskä»»åŠ¡ response:æœåŠ¡å™¨å“åº”ä¿¡æ¯ï¼ˆå“åº”å¤´ï¼‰ completionHandlerï¼šé€šè¿‡è¯¥blockå›žè°ƒï¼Œå‘Šè¯‰æœåŠ¡å™¨ç«¯æ˜¯å¦æŽ¥æ”¶è¿”å›žçš„æ•°æ® */-(void)URLSession:(nonnull NSURLSession *)session dataTask:(nonnull NSURLSessionDataTask *)dataTask didReceiveResponse:(nonnull NSURLResponse *)response completionHandler:(nonnull void (^)(NSURLSessionResponseDisposition))completionHandler/*2.å½“æŽ¥æ”¶åˆ°æœåŠ¡å™¨è¿”å›žçš„æ•°æ®æ—¶è°ƒç”¨ è¯¥æ–¹æ³•å¯èƒ½ä¼šè¢«è°ƒç”¨å¤šæ¬¡ */-(void)URLSession:(nonnull NSURLSession *)session dataTask:(nonnull NSURLSessionDataTask *)dataTask didReceiveData:(nonnull NSData *)data/* 3.å½“è¯·æ±‚å®Œæˆä¹‹åŽè°ƒç”¨è¯¥æ–¹æ³• ä¸è®ºæ˜¯è¯·æ±‚æˆåŠŸè¿˜æ˜¯è¯·æ±‚å¤±è´¥éƒ½è°ƒç”¨è¯¥æ–¹æ³•ï¼Œå¦‚æžœè¯·æ±‚å¤±è´¥ï¼Œé‚£ä¹ˆerrorå¯¹è±¡æœ‰å€¼ï¼Œå¦åˆ™é‚£ä¹ˆerrorå¯¹è±¡ä¸ºç©º */-(void)URLSession:(nonnull NSURLSession *)session task:(nonnull NSURLSessionTask *)task didCompleteWithError:(nullable NSError *)error å½“æŽ¥æ”¶åˆ°æœåŠ¡å™¨å“åº”çš„æ—¶å€™ï¼Œå‘Šè¯‰æœåŠ¡å™¨æŽ¥æ”¶æ•°æ®ï¼ˆè°ƒç”¨blockï¼‰ 123456789//é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“æŽ¥æ”¶åˆ°æœåŠ¡å™¨å“åº”ä¹‹åŽï¼ŒæœåŠ¡å™¨è®¤ä¸ºå®¢æˆ·ç«¯ä¸éœ€è¦æŽ¥æ”¶æ•°æ®ï¼Œæ‰€ä»¥åŽé¢çš„ä»£ç†æ–¹æ³•ä¸ä¼šè°ƒç”¨ //å¦‚æžœéœ€è¦ç»§ç»­æŽ¥æ”¶æœåŠ¡å™¨è¿”å›žçš„æ•°æ®ï¼Œé‚£ä¹ˆéœ€è¦è°ƒç”¨block,å¹¶ä¼ å…¥å¯¹åº”çš„ç­–ç•¥ /* NSURLSessionResponseCancel = 0, å–æ¶ˆä»»åŠ¡ NSURLSessionResponseAllow = 1, æŽ¥æ”¶ä»»åŠ¡ NSURLSessionResponseBecomeDownload = 2, è½¬å˜æˆä¸‹è½½ NSURLSessionResponseBecomeStream NS_ENUM_AVAILABLE(10_11, 9_0) = 3, è½¬å˜æˆæµ */ completionHandler(NSURLSessionResponseAllow); ###2. NSURLSessionDownloadTaskå®žçŽ°å¤§æ–‡ä»¶ä¸‹è½½ ä½¿ç”¨NSURLSessionå’ŒNSURLSessionDownloadå¯ä»¥å¾ˆæ–¹ä¾¿çš„å®žçŽ°æ–‡ä»¶ä¸‹è½½æ“ä½œ 123456789/* ç¬¬ä¸€ä¸ªå‚æ•°ï¼šè¦ä¸‹è½½æ–‡ä»¶çš„urlè·¯å¾„ ç¬¬äºŒä¸ªå‚æ•°ï¼šå½“æŽ¥æ”¶å®ŒæœåŠ¡å™¨è¿”å›žçš„æ•°æ®ä¹‹åŽè°ƒç”¨è¯¥block location:ä¸‹è½½çš„æ–‡ä»¶çš„ä¿å­˜åœ°å€ï¼ˆé»˜è®¤æ˜¯å­˜å‚¨åœ¨æ²™ç›’ä¸­tmpæ–‡ä»¶å¤¹ä¸‹é¢ï¼Œéšæ—¶ä¼šè¢«åˆ é™¤ï¼‰ responseï¼šæœåŠ¡å™¨å“åº”ä¿¡æ¯ï¼Œå“åº”å¤´ errorï¼šè¯¥è¯·æ±‚çš„é”™è¯¯ä¿¡æ¯ */ //è¯´æ˜Žï¼šdownloadTaskWithURLæ–¹æ³•å·²ç»å®žçŽ°äº†åœ¨ä¸‹è½½æ–‡ä»¶æ•°æ®çš„è¿‡ç¨‹ä¸­è¾¹ä¸‹è½½æ–‡ä»¶æ•°æ®ï¼Œè¾¹å†™å…¥åˆ°æ²™ç›’æ–‡ä»¶çš„æ“ä½œ NSURLSessionDownloadTask *downloadTask = [session downloadTaskWithURL:url completionHandler:^(NSURL * __nullable location, NSURLResponse * __nullable response, NSError * __nullable error) downloadTaskWithURLå†…éƒ¨é»˜è®¤å·²ç»å®žçŽ°äº†å˜ä¸‹è½½è¾¹å†™å…¥æ“ä½œï¼Œæ‰€ä»¥ä¸ç”¨å¼€å‘äººå‘˜æ‹…å¿ƒå†…å­˜é—®é¢˜ æ–‡ä»¶ä¸‹è½½åŽé»˜è®¤ä¿å­˜åœ¨tmpæ–‡ä»¶ç›®å½•ï¼Œéœ€è¦å¼€å‘äººå‘˜æ‰‹åŠ¨çš„å‰ªåˆ‡åˆ°åˆé€‚çš„æ²™ç›’ç›®å½• ç¼ºç‚¹ï¼šæ²¡æœ‰åŠžæ³•ç›‘æŽ§ä¸‹è½½è¿›åº¦ ###3. ä½¿ç”¨NSURLSessionDownloadTaskå®žçŽ°å¤§æ–‡ä»¶ä¸‹è½½-ç›‘å¬ä¸‹è½½è¿›åº¦ åˆ›å»ºNSURLSessionå¹¶è®¾ç½®ä»£ç†ï¼Œé€šè¿‡NSURLSessionDownloadTaskå¹¶ä»¥ä»£ç†çš„æ–¹å¼æ¥å®Œæˆå¤§æ–‡ä»¶çš„ä¸‹è½½ 1234567//1.åˆ›å»ºNSULRSession,è®¾ç½®ä»£ç†self.session = [NSURLSession sessionWithConfiguration:[NSURLSessionConfiguration defaultSessionConfiguration] delegate:self delegateQueue:[NSOperationQueue mainQueue]];//2.åˆ›å»ºtaskNSURL *url = [NSURL URLWithString:@&quot;URLå­—ç¬¦ä¸²&quot;];self.downloadTask = [self.session downloadTaskWithURL:url];//3.æ‰§è¡Œtask[self.downloadTask resume]; å¸¸ç”¨ä»£ç†æ–¹æ³•çš„è¯´æ˜Ž 1234567891011121314151617181920212223/* 1.å½“æŽ¥æ”¶åˆ°ä¸‹è½½æ•°æ®çš„æ—¶å€™è°ƒç”¨,å¯ä»¥åœ¨è¯¥æ–¹æ³•ä¸­ç›‘å¬æ–‡ä»¶ä¸‹è½½çš„è¿›åº¦ è¯¥æ–¹æ³•ä¼šè¢«è°ƒç”¨å¤šæ¬¡ totalBytesWritten:å·²ç»å†™å…¥åˆ°æ–‡ä»¶ä¸­çš„æ•°æ®å¤§å° totalBytesExpectedToWrite:ç›®å‰æ–‡ä»¶çš„æ€»å¤§å° bytesWritten:æœ¬æ¬¡ä¸‹è½½çš„æ–‡ä»¶æ•°æ®å¤§å° */-(void)URLSession:(nonnull NSURLSession *)session downloadTask:(nonnull NSURLSessionDownloadTask *)downloadTask didWriteData:(int64_t)bytesWritten totalBytesWritten:(int64_t)totalBytesWritten totalBytesExpectedToWrite:(int64_t)totalBytesExpectedToWrite/* 2.æ¢å¤ä¸‹è½½çš„æ—¶å€™è°ƒç”¨è¯¥æ–¹æ³• fileOffset:æ¢å¤ä¹‹åŽï¼Œè¦ä»Žæ–‡ä»¶çš„ä»€ä¹ˆåœ°æ–¹å¼€å‘ä¸‹è½½ expectedTotalBytesï¼šè¯¥æ–‡ä»¶æ•°æ®çš„æ€»å¤§å° */-(void)URLSession:(nonnull NSURLSession *)session downloadTask:(nonnull NSURLSessionDownloadTask *)downloadTask didResumeAtOffset:(int64_t)fileOffset expectedTotalBytes:(int64_t)expectedTotalBytes/* 3.ä¸‹è½½å®Œæˆä¹‹åŽè°ƒç”¨è¯¥æ–¹æ³• */-(void)URLSession:(nonnull NSURLSession *)session downloadTask:(nonnull NSURLSessionDownloadTask *)downloadTask didFinishDownloadingToURL:(nonnull NSURL *)location/* 4.è¯·æ±‚å®Œæˆä¹‹åŽè°ƒç”¨ å¦‚æžœè¯·æ±‚å¤±è´¥ï¼Œé‚£ä¹ˆerroræœ‰å€¼ */-(void)URLSession:(nonnull NSURLSession *)session task:(nonnull NSURLSessionTask *)task didCompleteWithError:(nullable NSError *)error å®žçŽ°æ–­ç‚¹ä¸‹è½½ç›¸å…³ä»£ç  123456789//å¦‚æžœä»»åŠ¡ï¼Œå–æ¶ˆäº†é‚£ä¹ˆä»¥åŽå°±ä¸èƒ½æ¢å¤äº†// [self.downloadTask cancel];//å¦‚æžœé‡‡å–è¿™ç§æ–¹å¼æ¥å–æ¶ˆä»»åŠ¡ï¼Œé‚£ä¹ˆè¯¥æ–¹æ³•ä¼šé€šè¿‡resumeDataä¿å­˜å½“å‰æ–‡ä»¶çš„ä¸‹è½½ä¿¡æ¯//åªè¦æœ‰äº†è¿™ä»½ä¿¡æ¯ï¼Œä»¥åŽå°±å¯ä»¥é€šè¿‡è¿™äº›ä¿¡æ¯æ¥æ¢å¤ä¸‹è½½[self.downloadTask cancelByProducingResumeData:^(NSData * __nullable resumeData) &#123; self.resumeData = resumeData;&#125;];//ç»§ç»­ä¸‹è½½//é¦–å…ˆé€šè¿‡ä¹‹å‰ä¿å­˜çš„resumeDataä¿¡æ¯ï¼Œåˆ›å»ºä¸€ä¸ªä¸‹è½½ä»»åŠ¡self.downloadTask = [self.session downloadTaskWithResumeData:self.resumeData]; [self.downloadTask resume]; è®¡ç®—å½“å‰ä¸‹è½½è¿›åº¦ 12//èŽ·å–æ–‡ä»¶ä¸‹è½½è¿›åº¦self.progress.progress = 1.0 * totalBytesWritten/totalBytesExpectedToWrite; å±€é™æ€§ å¦‚æžœç”¨æˆ·ç‚¹å‡»æš‚åœä¹‹åŽé€€å‡ºç¨‹åºï¼Œé‚£ä¹ˆéœ€è¦æŠŠæ¢å¤ä¸‹è½½çš„æ•°æ®å†™ä¸€ä»½åˆ°æ²™ç›’ï¼Œä»£ç å¤æ‚åº¦æ›´é«˜ å¦‚æžœç”¨æˆ·åœ¨ä¸‹è½½ä¸­é€”æœªä¿å­˜æ¢å¤ä¸‹è½½æ•°æ®å³é€€å‡ºç¨‹åºï¼Œåˆ™ä¸å…·å¤‡å¯æ“ä½œæ€§ ###4. ä½¿ç”¨NSURLSessionDataTaskå®žçŽ°å¤§æ–‡ä»¶ç¦»çº¿æ–­ç‚¹ä¸‹è½½ï¼ˆå®Œæ•´ï¼‰ å…³äºŽNSOutputStreamçš„ä½¿ç”¨ 123456789//1. åˆ›å»ºä¸€ä¸ªè¾“å…¥æµ,æ•°æ®è¿½åŠ åˆ°æ–‡ä»¶çš„å±è‚¡ä¸Š//æŠŠæ•°æ®å†™å…¥åˆ°æŒ‡å®šçš„æ–‡ä»¶åœ°å€ï¼Œå¦‚æžœå½“å‰æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™ä¼šè‡ªåŠ¨åˆ›å»ºNSOutputStream *stream = [[NSOutputStream alloc]initWithURL:[NSURL fileURLWithPath:[self fullPath]] append:YES];//2. æ‰“å¼€æµ[stream open];//3. å†™å…¥æµæ•°æ®[stream write:data.bytes maxLength:data.length];//4.å½“ä¸éœ€è¦çš„æ—¶å€™åº”è¯¥å…³é—­æµ[stream close]; å…³äºŽç½‘ç»œè¯·æ±‚è¯·æ±‚å¤´çš„è®¾ç½®ï¼ˆå¯ä»¥è®¾ç½®è¯·æ±‚ä¸‹è½½æ–‡ä»¶çš„æŸä¸€éƒ¨åˆ†ï¼‰ 123456789101112//1. è®¾ç½®è¯·æ±‚å¯¹è±¡//1.1 åˆ›å»ºè¯·æ±‚è·¯å¾„NSURL *url = [NSURL URLWithString:@&quot;URLå­—ç¬¦ä¸²&quot;];//1.2 åˆ›å»ºå¯å˜è¯·æ±‚å¯¹è±¡NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];//1.3 æ‹¿åˆ°å½“å‰æ–‡ä»¶çš„æ®‹ç•™æ•°æ®å¤§å°self.currentContentLength = [self FileSize];//1.4 å‘Šè¯‰æœåŠ¡å™¨ä»Žå“ªä¸ªåœ°æ–¹å¼€å§‹ä¸‹è½½æ–‡ä»¶æ•°æ®NSString *range = [NSString stringWithFormat:@&quot;bytes=%zd-&quot;,self.currentContentLength];NSLog(@&quot;%@&quot;,range);//1.5 è®¾ç½®è¯·æ±‚å¤´[request setValue:range forHTTPHeaderField:@&quot;Range&quot;]; NSURLSessionå¯¹è±¡çš„é‡Šæ”¾ 1234567-(void)dealloc&#123; //åœ¨æœ€åŽçš„æ—¶å€™åº”è¯¥æŠŠsessioné‡Šæ”¾ï¼Œä»¥å…é€ æˆå†…å­˜æ³„éœ² // NSURLSessionè®¾ç½®è¿‡ä»£ç†åŽï¼Œéœ€è¦åœ¨æœ€åŽï¼ˆæ¯”å¦‚æŽ§åˆ¶å™¨é”€æ¯çš„æ—¶å€™ï¼‰è°ƒç”¨sessionçš„invalidateAndCancelæˆ–è€…resetWithCompletionHandlerï¼Œæ‰ä¸ä¼šæœ‰å†…å­˜æ³„éœ² // [self.session invalidateAndCancel]; [self.session resetWithCompletionHandler:^&#123; NSLog(@&quot;é‡Šæ”¾---&quot;); &#125;];&#125; ä¼˜åŒ–éƒ¨åˆ† å…³äºŽæ–‡ä»¶ä¸‹è½½è¿›åº¦çš„å®žæ—¶æ›´æ–° æ–¹æ³•çš„ç‹¬ç«‹ä¸ŽæŠ½å–]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSç½‘ç»œç¼–ç¨‹--åŸºç¡€ä½¿ç”¨]]></title>
    <url>%2F2016%2F04%2F12%2FiOS%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B-%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8%2F</url>
    <content type="text"><![CDATA[iOSä¸­å‘é€httpè¯·æ±‚çš„æ–¹æ¡ˆ è‹¹æžœåŽŸç”Ÿ NSURLConnection 03å¹´æŽ¨å‡ºçš„å¤è€æŠ€æœ¯ NSURLSession 13å¹´æŽ¨å‡ºiOS7ä¹‹åŽï¼Œä»¥å–ä»£NSURLConnection CFNetwork åº•å±‚æŠ€æœ¯ã€Cè¯­è¨€çš„ ç¬¬ä¸‰æ–¹æ¡†æž¶ ASIHttpRequest AFNetworking MKNetworkKit NSURLConnectionä½¿ç”¨ NSURLConnectionåŒæ­¥getè¯·æ±‚ æ­¥éª¤ è®¾ç½®è¯·æ±‚è·¯å¾„ åˆ›å»ºè¯·æ±‚å¯¹è±¡ï¼ˆé»˜è®¤æ˜¯GETè¯·æ±‚ï¼Œä¸”å·²ç»é»˜è®¤åŒ…å«äº†è¯·æ±‚å¤´ï¼‰ ä½¿ç”¨NSURLConnection sendsyncæ–¹æ³•å‘é€ç½‘ç»œè¯·æ±‚ æŽ¥æ”¶åˆ°æœåŠ¡å™¨çš„å“åº”åŽï¼Œè§£æžå“åº”ä½“ ä»£ç 12345678910111213141516//1.ç¡®å®šè¯·æ±‚è·¯å¾„ NSURL *url = [NSURL URLWithString:@&quot;URLString(å‘é€è¯·æ±‚çš„åœ°å€è·¯å¾„)&quot;]; //2.åˆ›å»ºä¸€ä¸ªè¯·æ±‚å¯¹è±¡NSURLRequest *request = [NSURLRequest requestWithURL:url];//3.æŠŠè¯·æ±‚å‘é€ç»™æœåŠ¡å™¨//sendSynchronousRequest é˜»å¡žå¼çš„æ–¹æ³•ï¼Œä¼šå¡ä½çº¿ç¨‹NSHTTPURLResponse *response = nil;NSError *error = nil;/* ç¬¬ä¸€ä¸ªå‚æ•°ï¼šè¯·æ±‚å¯¹è±¡ ç¬¬äºŒä¸ªå‚æ•°ï¼šå“åº”å¤´ä¿¡æ¯ï¼Œå½“è¯¥æ–¹æ³•æ‰§è¡Œå®Œæ¯•ä¹‹åŽï¼Œè¯¥å‚æ•°è¢«èµ‹å€¼ ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šé”™è¯¯ä¿¡æ¯ï¼Œå¦‚æžœè¯·æ±‚å¤±è´¥ï¼Œåˆ™erroræœ‰å€¼ */ //è¯¥æ–¹æ³•æ˜¯é˜»å¡žå¼çš„ï¼Œä¼šå¡ä½çº¿ç¨‹NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:&amp;response error:&amp;error];//4.è§£æžæœåŠ¡å™¨è¿”å›žçš„æ•°æ®NSString *str = [[NSString alloc]initWithData:data encoding:NSUTF8StringEncoding]; NSURLConnectionå¼‚æ­¥è¯·æ±‚ï¼ˆget-sendAsyncï¼‰è¯¥æ–¹æ³•ä¸ä¼šå¡ä½çº¿ç¨‹ï¼Œç½‘ç»œè¯·æ±‚ä»»åŠ¡æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ 1234567891011121314151617//1.ç¡®å®šè¯·æ±‚è·¯å¾„ NSURL *url = [NSURL URLWithString:@&quot;URLString(å‘é€è¯·æ±‚çš„åœ°å€è·¯å¾„)&quot;]; //2.åˆ›å»ºä¸€ä¸ªè¯·æ±‚å¯¹è±¡ NSURLRequest *request = [NSURLRequest requestWithURL:url]; //3.æŠŠè¯·æ±‚å‘é€ç»™æœåŠ¡å™¨,å‘é€ä¸€ä¸ªå¼‚æ­¥è¯·æ±‚ /* ç¬¬ä¸€ä¸ªå‚æ•°ï¼šè¯·æ±‚å¯¹è±¡ ç¬¬äºŒä¸ªå‚æ•°ï¼šå›žè°ƒæ–¹æ³•åœ¨å“ªä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œï¼Œå¦‚æžœæ˜¯ä¸»é˜Ÿåˆ—åˆ™blockåœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œéžä¸»é˜Ÿåˆ—åˆ™åœ¨å­çº¿ç¨‹ä¸­æ‰§è¡Œ ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šcompletionHandlerBlockå—ï¼šæŽ¥å—åˆ°å“åº”çš„æ—¶å€™æ‰§è¡Œè¯¥blockä¸­çš„ä»£ç  responseï¼šå“åº”å¤´ä¿¡æ¯ dataï¼šå“åº”ä½“ connectionErrorï¼šé”™è¯¯ä¿¡æ¯ï¼Œå¦‚æžœè¯·æ±‚å¤±è´¥ï¼Œé‚£ä¹ˆè¯¥å‚æ•°æœ‰å€¼ */ [NSURLConnection sendAsynchronousRequest:request queue:[[NSOperationQueue alloc]init] completionHandler:^(NSURLResponse * __nullable response, NSData * __nullable data, NSError * __nullable connectionError) &#123; //4.è§£æžæœåŠ¡å™¨è¿”å›žçš„æ•°æ® NSString *str = [[NSString alloc]initWithData:data encoding:NSUTF8StringEncoding]; //è½¬æ¢å¹¶æ‰“å°å“åº”å¤´ä¿¡æ¯ NSHTTPURLResponse *r = (NSHTTPURLResponse *)response; NSLog(@&quot;--%zd---%@--&quot;,r.statusCode,r.allHeaderFields); &#125;]; NSURLConnectionå¼‚æ­¥è¯·æ±‚ï¼ˆget-ä»£ç†ï¼‰ æ­¥éª¤ ç¡®å®šè¯·æ±‚è·¯å¾„ åˆ›å»ºè¯·æ±‚å¯¹è±¡ åˆ›å»ºNSURLConnectionå¯¹è±¡å¹¶è®¾ç½®ä»£ç† éµå®ˆNSURLConnectionDataDelegateåè®®ï¼Œå¹¶å®žçŽ°ç›¸åº”çš„ä»£ç†æ–¹æ³• åœ¨ä»£ç†æ–¹æ³•ä¸­ç›‘å¬ç½‘ç»œè¯·æ±‚çš„å“åº” è®¾ç½®ä»£ç†çš„å‡ ç§æ–¹å¼ 123456789101112131415161718/* è®¾ç½®ä»£ç†çš„ç¬¬ä¸€ç§æ–¹å¼ï¼šè‡ªåŠ¨å‘é€ç½‘ç»œè¯·æ±‚ [[NSURLConnection alloc]initWithRequest:request delegate:self]; *//* è®¾ç½®ä»£ç†çš„ç¬¬äºŒç§æ–¹å¼ï¼š ç¬¬ä¸€ä¸ªå‚æ•°ï¼šè¯·æ±‚å¯¹è±¡ ç¬¬äºŒä¸ªå‚æ•°ï¼šè°æˆä¸ºNSURLConnetionå¯¹è±¡çš„ä»£ç†ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šæ˜¯å¦é©¬ä¸Šå‘é€ç½‘ç»œè¯·æ±‚ï¼Œå¦‚æžœè¯¥å€¼ä¸ºYESåˆ™ç«‹åˆ»å‘é€ï¼Œå¦‚æžœä¸ºNOåˆ™ä¸ä¼šå‘é€ç½‘è·¯è¯·æ±‚ NSURLConnection *conn = [[NSURLConnection alloc]initWithRequest:request delegate:self startImmediately:NO]; //è°ƒç”¨è¯¥æ–¹æ³•æŽ§åˆ¶ç½‘ç»œè¯·æ±‚çš„å‘é€ //æ³¨æ„è¯¥æ–¹æ³•å†…éƒ¨ä¼šè‡ªåŠ¨çš„æŠŠconnectæ·»åŠ åˆ°å½“å‰çº¿ç¨‹çš„RunLoopä¸­åœ¨é»˜è®¤æ¨¡å¼ä¸‹æ‰§è¡Œ[conn start]; *///è®¾ç½®ä»£ç†çš„ç¬¬ä¸‰ç§æ–¹å¼ï¼šä½¿ç”¨ç±»æ–¹æ³•è®¾ç½®ä»£ç†ï¼Œä¼šè‡ªåŠ¨å‘é€ç½‘ç»œè¯·æ±‚NSURLConnection *conn = [NSURLConnection connectionWithRequest:request delegate:self];//å–æ¶ˆç½‘ç»œè¯·æ±‚//[conn cancel]; ç›¸å…³ä»£ç†æ–¹æ³• 123456789101112131415161718192021/* 1.å½“æŽ¥æ”¶åˆ°æœåŠ¡å™¨å“åº”çš„æ—¶å€™è°ƒç”¨ ç¬¬ä¸€ä¸ªå‚æ•°connectionï¼šç›‘å¬çš„æ˜¯å“ªä¸ªNSURLConnectionå¯¹è±¡ ç¬¬äºŒä¸ªå‚æ•°responseï¼šæŽ¥æ”¶åˆ°çš„æœåŠ¡å™¨è¿”å›žçš„å“åº”å¤´ä¿¡æ¯ */ -(void)connection:(nonnull NSURLConnection *)connection didReceiveResponse:(nonnull NSURLResponse *)response /* 2.å½“æŽ¥æ”¶åˆ°æ•°æ®çš„æ—¶å€™è°ƒç”¨ï¼Œè¯¥æ–¹æ³•ä¼šè¢«è°ƒç”¨å¤šæ¬¡ ç¬¬ä¸€ä¸ªå‚æ•°connectionï¼šç›‘å¬çš„æ˜¯å“ªä¸ªNSURLConnectionå¯¹è±¡ ç¬¬äºŒä¸ªå‚æ•°dataï¼šæœ¬æ¬¡æŽ¥æ”¶åˆ°çš„æœåŠ¡ç«¯è¿”å›žçš„äºŒè¿›åˆ¶æ•°æ®ï¼ˆå¯èƒ½æ˜¯ç‰‡æ®µï¼‰ */ -(void)connection:(nonnull NSURLConnection *)connection didReceiveData:(nonnull NSData *)data /* 3.å½“æœåŠ¡ç«¯è¿”å›žçš„æ•°æ®æŽ¥æ”¶å®Œæ¯•ä¹‹åŽä¼šè°ƒç”¨ é€šå¸¸åœ¨è¯¥æ–¹æ³•ä¸­è§£æžæœåŠ¡å™¨è¿”å›žçš„æ•°æ® */ -(void)connectionDidFinishLoading:(nonnull NSURLConnection *)connection /*4.å½“è¯·æ±‚é”™è¯¯çš„æ—¶å€™è°ƒç”¨ï¼ˆæ¯”å¦‚è¯·æ±‚è¶…æ—¶ï¼‰ ç¬¬ä¸€ä¸ªå‚æ•°connectionï¼šNSURLConnectionå¯¹è±¡ ç¬¬äºŒä¸ªå‚æ•°ï¼šç½‘ç»œè¯·æ±‚çš„é”™è¯¯ä¿¡æ¯ï¼Œå¦‚æžœè¯·æ±‚å¤±è´¥ï¼Œåˆ™erroræœ‰å€¼ */ -(void)connection:(nonnull NSURLConnection *)connection didFailWithError:(nonnull NSError *)error å¦‚ä½•æŽ§åˆ¶ä»£ç†æ–¹æ³•åœ¨å“ªä¸ªçº¿ç¨‹è°ƒç”¨* 123//è¯´æ˜Žï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œä»£ç†æ–¹æ³•ä¼šåœ¨ä¸»çº¿ç¨‹ä¸­è¿›è¡Œè°ƒç”¨ï¼ˆä¸ºäº†æ–¹ä¾¿å¼€å‘è€…æ‹¿åˆ°æ•°æ®åŽå¤„ç†ä¸€äº›åˆ·æ–°UIçš„æ“ä½œä¸éœ€è¦è€ƒè™‘åˆ°çº¿ç¨‹é—´é€šä¿¡ï¼‰ //è®¾ç½®ä»£ç†æ–¹æ³•çš„æ‰§è¡Œé˜Ÿåˆ— [connect setDelegateQueue:[[NSOperationQueue alloc]init]]; å¼€å­çº¿ç¨‹å‘é€ç½‘ç»œè¯·æ±‚çš„æ³¨æ„ç‚¹ï¼Œé€‚ç”¨äºŽè‡ªåŠ¨å‘é€ç½‘ç»œè¯·æ±‚æ¨¡å¼ 12345678910111213141516171819202122//ä½¿ç”¨GCDå¼€å¯ä¸€ä¸ªå­çº¿ç¨‹æ¥å‘é€ç½‘ç»œè¯·æ±‚ dispatch_async(dispatch_get_global_queue(0, 0), ^&#123; //ä½¿ç”¨éžè‡ªåŠ¨å‘é€ç½‘ç»œè¯·æ±‚æ¨¡å¼,å‘é€è¯·æ±‚OK /* //åˆ›å»ºNSURLConnectionå¯¹è±¡ï¼Œè®¾ç½®ä»£ç†ï¼Œæš‚ä¸å‘é€ NSURLConnection *connect = [[NSURLConnection alloc]initWithRequest:request delegate:self startImmediately:NO]; //è®¾ç½®ä»£ç†æ–¹æ³•çš„æ‰§è¡Œé˜Ÿåˆ— [connect setDelegateQueue:[[NSOperationQueue alloc]init]]; //è°ƒç”¨startå‘é€ç½‘ç»œè¯·æ±‚ [connect start]; */ //ä½¿ç”¨è‡ªåŠ¨å‘é€ç½‘ç»œè¯·æ±‚æ¨¡å¼ï¼Œå‘é€è¯·æ±‚å¤±è´¥ï¼ˆéœ€è¦æ”¹é€ ä»£ç ï¼‰ //WHY? /*01 ç½‘ç»œè¯·æ±‚å‘é€å’Œæ•°æ®æŽ¥æ”¶æ˜¯å¦æˆåŠŸï¼Œå’Œä¸€äº›å› ç´ ç›¸å…³ï¼Œæ¯”å¦‚å®¢æˆ·ç«¯çš„ç½‘é€Ÿã€æœåŠ¡å™¨ç«¯çš„æŸ¥è¯¢é€Ÿåº¦ç­‰ç­‰ã€‚ 02 è€Œåœ¨å­çº¿ç¨‹ä¸­åˆ›å»ºçš„NSURLConnectionå¯¹è±¡æ˜¯ä¸€ä¸ªä¸´æ—¶å˜é‡ï¼Œå½“è¯·æ±‚å‘é€å®Œæˆä¹‹åŽå°±è¢«é‡Šæ”¾äº†ï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™å®ƒçš„ä»£ç†æ–¹æ³•ä¸ä¼šè°ƒç”¨ç”¨ã€‚ 03 ä¸ºä»€ä¹ˆä½¿ç”¨éžè‡ªåŠ¨å‘é€ç½‘ç»œè¯·æ±‚æ¨¡å¼æ˜¯OKçš„ã€‚ å› ä¸ºåœ¨è¯¥æ¨¡å¼ä¸­ï¼Œè°ƒç”¨äº†startæ¥å¼€å§‹å‘é€ç½‘ç»œè¯·æ±‚ï¼Œè¯¥æ–¹æ³•å†…éƒ¨ä¼šè‡ªåŠ¨å°†å½“å‰çš„connectä½œä¸ºä¸€ä¸ªSourceæ·»åŠ åˆ°å½“å‰çº¿ç¨‹æ‰€åœ¨çš„Runloopä¸­,å¦‚æžœå½“å‰çº¿ç¨‹æ˜¯å­çº¿ç¨‹ï¼ˆå³å½“å‰çº¿ç¨‹çš„runloopå¹¶æœªåˆ›å»ºï¼‰ï¼Œé‚£ä¹ˆè¯¥æ–¹æ³•å†…éƒ¨ä¼šé»˜è®¤å…ˆåˆ›å»ºå½“å‰çº¿ç¨‹çš„Runloop,è®¾ç½®åœ¨runloopçš„é»˜è®¤æ¨¡å¼ä¸‹è¿è¡Œã€‚ æ­¤æ—¶runloopä¼šå¯¹è¿™ä¸ªConnectå¯¹è±¡è¿›è¡Œå¼ºå¼•ç”¨ï¼Œä¿è¯äº†ä»£ç†æ–¹æ³•è¢«è°ƒç”¨çš„å‰æ */ NSURLConnection *connect = [[NSURLConnection alloc]initWithRequest:request delegate:self]; [connect setDelegateQueue:[[NSOperationQueue alloc]init]]; //åˆ›å»ºå½“å‰çº¿ç¨‹çš„runloopï¼Œå¹¶å¼€å¯runloop [[NSRunLoop currentRunLoop] run]; &#125;); å…¶ä»–çŸ¥è¯† 1234501 å…³äºŽæ¶ˆæ¯å¼¹çª—ç¬¬ä¸‰æ–¹æ¡†æž¶çš„ä½¿ç”¨ SVProgressHUD 02 å­—ç¬¦ä¸²æˆªå–ç›¸å…³æ–¹æ³• -(NSRange)rangeOfString:(NSString *)searchString; -(NSString *)substringWithRange:(NSRange)range; NSURLConnectionå‘é€POSTè¯·æ±‚ å‘é€POSTè¯·æ±‚æ­¥éª¤ ç¡®å®šURLè·¯å¾„ åˆ›å»ºè¯·æ±‚å¯¹è±¡ï¼ˆå¯å˜å¯¹è±¡ï¼‰ ä¿®æ”¹è¯·æ±‚å¯¹è±¡çš„æ–¹æ³•ä¸ºPOSTï¼Œè®¾ç½®è¯·æ±‚ä½“ï¼ˆDataï¼‰ å‘é€ä¸€ä¸ªå¼‚æ­¥è¯·æ±‚ è¡¥å……ï¼šè®¾ç½®è¯·æ±‚è¶…æ—¶ï¼Œå¤„ç†é”™è¯¯ä¿¡æ¯ï¼Œè®¾ç½®è¯·æ±‚å¤´ï¼ˆå¦‚èŽ·å–å®¢æˆ·ç«¯çš„ç‰ˆæœ¬ç­‰ç­‰,è¯·æ±‚å¤´æ˜¯å¯è®¾ç½®å¯ä¸è®¾ç½®çš„ï¼‰ ä»£ç 12345678910111213141516171819202122//1.ç¡®å®šè¯·æ±‚è·¯å¾„ NSURL *url = [NSURL URLWithString:@&quot;è¯·æ±‚è·¯å¾„å­—ç¬¦ä¸²&quot;];//2.åˆ›å»ºè¯·æ±‚å¯¹è±¡NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];//2.1æ›´æ”¹è¯·æ±‚æ–¹æ³•request.HTTPMethod = @&quot;POST&quot;;//2.2è®¾ç½®è¯·æ±‚ä½“request.HTTPBody = [@&quot;username=111&amp;pwd=222&quot; dataUsingEncoding:NSUTF8StringEncoding];//2.3è¯·æ±‚è¶…æ—¶request.timeoutInterval = 5;//2.4è®¾ç½®è¯·æ±‚å¤´[request setValue:@&quot;ios 9.0&quot; forHTTPHeaderField:@&quot;User-Agent&quot;];//3.å‘é€è¯·æ±‚[NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse * __nullable response, NSData * __nullable data, NSError * __nullable connectionError) &#123; //4.è§£æžæœåŠ¡å™¨è¿”å›žçš„æ•°æ® if (connectionError) &#123; NSLog(@&quot;--è¯·æ±‚å¤±è´¥-&quot;); &#125;else &#123; NSLog(@&quot;%@&quot;,[[NSString alloc]initWithData:data encoding:NSUTF8StringEncoding]); &#125;&#125;]; NSURLSessionä½¿ç”¨ ä½¿ç”¨æ­¥éª¤ ä½¿ç”¨NSURLSessionåˆ›å»ºtaskï¼Œç„¶åŽæ‰§è¡Œtask å…³äºŽtask NSURLSessionTaskæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œæœ¬èº«ä¸èƒ½ä½¿ç”¨ï¼Œåªèƒ½ä½¿ç”¨å®ƒçš„å­ç±» NSURLSessionDataTask\NSURLSessionUploadTask\NSURLSessionDownloadTask å‘é€getè¯·æ±‚ 1234567891011121314151617181920212223//1.åˆ›å»ºNSURLSessionå¯¹è±¡ï¼ˆå¯ä»¥èŽ·å–å•ä¾‹å¯¹è±¡ï¼‰ NSURLSession *session = [NSURLSession sharedSession]; //2.æ ¹æ®NSURLSessionå¯¹è±¡åˆ›å»ºä¸€ä¸ªTask NSURL *url = [NSURL URLWithString:@&quot;URLå­—ç¬¦ä¸²&quot;]; NSURLRequest *request = [NSURLRequest requestWithURL:url]; //æ–¹æ³•å‚æ•°è¯´æ˜Ž /* æ³¨æ„ï¼šè¯¥blockæ˜¯åœ¨å­çº¿ç¨‹ä¸­è°ƒç”¨çš„ï¼Œå¦‚æžœæ‹¿åˆ°æ•°æ®ä¹‹åŽè¦åšä¸€äº›UIåˆ·æ–°æ“ä½œï¼Œé‚£ä¹ˆéœ€è¦å›žåˆ°ä¸»çº¿ç¨‹åˆ·æ–° ç¬¬ä¸€ä¸ªå‚æ•°ï¼šéœ€è¦å‘é€çš„è¯·æ±‚å¯¹è±¡ block:å½“è¯·æ±‚ç»“æŸæ‹¿åˆ°æœåŠ¡å™¨å“åº”çš„æ•°æ®æ—¶è°ƒç”¨block block-NSData:è¯¥è¯·æ±‚çš„å“åº”ä½“ block-NSURLResponse:å­˜æ”¾æœ¬æ¬¡è¯·æ±‚çš„å“åº”ä¿¡æ¯ï¼Œå“åº”å¤´ï¼ŒçœŸå®žç±»åž‹ä¸ºNSHTTPURLResponse block-NSErroe:è¯·æ±‚é”™è¯¯ä¿¡æ¯ */ NSURLSessionDataTask * dataTask = [session dataTaskWithRequest:request completionHandler:^(NSData * __nullable data, NSURLResponse * __nullable response, NSError * __nullable error) &#123; //æ‹¿åˆ°å“åº”å¤´ä¿¡æ¯ NSHTTPURLResponse *res = (NSHTTPURLResponse *)response; //4.è§£æžæ‹¿åˆ°çš„å“åº”æ•°æ® NSLog(@&quot;%@\n%@&quot;,[[NSString alloc]initWithData:data encoding:NSUTF8StringEncoding],res.allHeaderFields); &#125;]; //3.æ‰§è¡ŒTask //æ³¨æ„ï¼šåˆšåˆ›å»ºå‡ºæ¥çš„taské»˜è®¤æ˜¯æŒ‚èµ·çŠ¶æ€çš„ï¼Œéœ€è¦è°ƒç”¨è¯¥æ–¹æ³•æ¥å¯åŠ¨ä»»åŠ¡ï¼ˆæ‰§è¡Œä»»åŠ¡ï¼‰ [dataTask resume]; å‘é€getè¯·æ±‚çš„ç¬¬äºŒç§æ–¹å¼ 12345678910//æ³¨æ„ï¼šè¯¥æ–¹æ³•å†…éƒ¨é»˜è®¤ä¼šæŠŠURLå¯¹è±¡åŒ…è£…æˆä¸€ä¸ªNSURLRequestå¯¹è±¡ï¼ˆé»˜è®¤æ˜¯GETè¯·æ±‚ï¼‰ //æ–¹æ³•å‚æ•°è¯´æ˜Ž /* //ç¬¬ä¸€ä¸ªå‚æ•°ï¼šå‘é€è¯·æ±‚çš„URLåœ°å€ //block:å½“è¯·æ±‚ç»“æŸæ‹¿åˆ°æœåŠ¡å™¨å“åº”çš„æ•°æ®æ—¶è°ƒç”¨block //block-NSData:è¯¥è¯·æ±‚çš„å“åº”ä½“ //block-NSURLResponse:å­˜æ”¾æœ¬æ¬¡è¯·æ±‚çš„å“åº”ä¿¡æ¯ï¼Œå“åº”å¤´ï¼ŒçœŸå®žç±»åž‹ä¸ºNSHTTPURLResponse //block-NSErroe:è¯·æ±‚é”™è¯¯ä¿¡æ¯ */ -(nullable NSURLSessionDataTask *)dataTaskWithURL:(NSURL *)url completionHandler:(void (^)(NSData * __nullable data, NSURLResponse * __nullable response, NSError * __nullable error))completionHandler; å‘é€postè¯·æ±‚ 12345678910111213141516//1.åˆ›å»ºNSURLSessionå¯¹è±¡ï¼ˆå¯ä»¥èŽ·å–å•ä¾‹å¯¹è±¡ï¼‰ NSURLSession *session = [NSURLSession sharedSession]; //2.æ ¹æ®NSURLSessionå¯¹è±¡åˆ›å»ºä¸€ä¸ªTask NSURL *url = [NSURL URLWithString:@&quot;URLå­—ç¬¦ä¸²&quot;]; //åˆ›å»ºä¸€ä¸ªè¯·æ±‚å¯¹è±¡ï¼Œå¹¶è¿™æ˜¯è¯·æ±‚æ–¹æ³•ä¸ºPOSTï¼ŒæŠŠå‚æ•°æ”¾åœ¨è¯·æ±‚ä½“ä¸­ä¼ é€’ NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url]; request.HTTPMethod = @&quot;POST&quot;; request.HTTPBody = [@&quot;username=111&amp;pwd=222&amp;type=JSON&quot; dataUsingEncoding:NSUTF8StringEncoding]; NSURLSessionDataTask *dataTask = [session dataTaskWithRequest:request completionHandler:^(NSData * __nullable data, NSURLResponse * __nullable response, NSError * __nullable error) &#123; //æ‹¿åˆ°å“åº”å¤´ä¿¡æ¯ NSHTTPURLResponse *res = (NSHTTPURLResponse *)response; //è§£æžæ‹¿åˆ°çš„å“åº”æ•°æ® NSLog(@&quot;%@\n%@&quot;,[[NSString alloc]initWithData:data encoding:NSUTF8StringEncoding],res.allHeaderFields); &#125;]; //3.æ‰§è¡ŒTask //æ³¨æ„ï¼šåˆšåˆ›å»ºå‡ºæ¥çš„taské»˜è®¤æ˜¯æŒ‚èµ·çŠ¶æ€çš„ï¼Œéœ€è¦è°ƒç”¨è¯¥æ–¹æ³•æ¥å¯åŠ¨ä»»åŠ¡ï¼ˆæ‰§è¡Œä»»åŠ¡ï¼‰ [dataTask resume];]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSä¹‹æ•°æ®è§£æž]]></title>
    <url>%2F2016%2F04%2F12%2FiOS%E4%B9%8B%E6%95%B0%E6%8D%AE%E8%A7%A3%E6%9E%90%2F</url>
    <content type="text"><![CDATA[iOSå¼€å‘ä¸­ï¼Œå‡ ä¹Žåªè¦æ˜¯ä¸Žç½‘ç»œç›¸å…³çš„åº”ç”¨ï¼Œéƒ½ç¦»ä¸å¼€å¯¹ç½‘ç»œæ•°æ®çš„è§£æžä¸Žåº”ç”¨ã€‚ä¸€èˆ¬æ¥è®²ï¼Œæˆ‘ä»¬ä¼šä»Žç½‘ç»œèŽ·å–XMLæˆ–è€…Jsonæ ¼å¼çš„æ•°æ®ï¼Œè¿™äº›æ•°æ®æœ‰ç€ç‰¹å®šçš„æ•°æ®ç»“æž„ï¼Œå¿…é¡»å¯¹å…¶è¿›è¡Œè§£æžï¼Œå¾—åˆ°æˆ‘ä»¬å¯ä»¥å¤„ç†çš„æ•°æ®ã€‚æ‰€è°“â€œè§£æžâ€ï¼Œå°±æ˜¯ä»Žäº‹å…ˆè§„å®šå¥½çš„æ ¼å¼ä¸²ä¸­æå–æ•°æ®ã€‚è§£æžçš„å‰ææ˜¯æ•°æ®çš„æä¾›æ–¹ä¸ŽèŽ·å–æ–¹æå‰çº¦å®šå¥½æ ¼å¼ï¼Œæ•°æ®æä¾›æ–¹æŒ‰ç…§æ ¼å¼æä¾›æ•°æ®ï¼Œæ•°æ®èŽ·å–æ–¹æŒ‰ç…§æ ¼å¼èŽ·å–æ•°æ®ã€‚ JSONè§£æžJSONæ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®æ ¼å¼ï¼Œä¸€èˆ¬ç”¨äºŽæ•°æ®äº¤äº’ã€‚æœåŠ¡å™¨è¿”å›žç»™å®¢æˆ·ç«¯çš„æ•°æ®ï¼Œä¸€èˆ¬éƒ½æ˜¯JSONæ ¼å¼æˆ–è€…XMLæ ¼å¼ï¼ˆæ–‡ä»¶ä¸‹è½½é™¤å¤–ï¼‰ ç›¸å…³è¯´æ˜Ž JSONçš„æ ¼å¼å¾ˆåƒOCä¸­çš„å­—å…¸å’Œæ•°ç»„ æ ‡å‡†JSONæ ¼å¼keyå¿…é¡»æ˜¯åŒå¼•å· JSONè§£æžæ–¹æ¡ˆ ç¬¬ä¸‰æ–¹æ¡†æž¶ JSONKit\SBJSON\TouchJSON è‹¹æžœåŽŸç”Ÿï¼ˆNSJSONSerializationï¼‰ JSONè§£æžç›¸å…³ä»£ç jsonæ•°æ®-&gt;OCå¯¹è±¡1234567891011121314151617181920//æŠŠjsonæ•°æ®è½¬æ¢ä¸ºOCå¯¹è±¡ -(void)jsonToOC &#123; //1. ç¡®å®šurlè·¯å¾„ NSURL *url = [NSURL URLWithString:@"URLå­—ç¬¦ä¸²"]; //2.åˆ›å»ºä¸€ä¸ªè¯·æ±‚å¯¹è±¡ NSURLRequest *request = [NSURLRequest requestWithURL:url]; //3.ä½¿ç”¨NSURLConnectionå‘é€ä¸€ä¸ªå¼‚æ­¥è¯·æ±‚ [NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse * _Nullable response, NSData * _Nullable data, NSError * _Nullable connectionError) &#123; //4.å½“æŽ¥æ”¶åˆ°æœåŠ¡å™¨å“åº”çš„æ•°æ®åŽï¼Œè§£æžæ•°æ®(JSON---&gt;OC) /* ç¬¬ä¸€ä¸ªå‚æ•°ï¼šè¦è§£æžçš„JSONæ•°æ®ï¼Œæ˜¯NSDataç±»åž‹ä¹Ÿå°±æ˜¯äºŒè¿›åˆ¶æ•°æ® ç¬¬äºŒä¸ªå‚æ•°: è§£æžJSONçš„å¯é€‰é…ç½®å‚æ•° NSJSONReadingMutableContainers è§£æžå‡ºæ¥çš„å­—å…¸å’Œæ•°ç»„æ˜¯å¯å˜çš„ NSJSONReadingMutableLeaves è§£æžå‡ºæ¥çš„å¯¹è±¡ä¸­çš„å­—ç¬¦ä¸²æ˜¯å¯å˜çš„ iOS7ä»¥åŽæœ‰é—®é¢˜ NSJSONReadingAllowFragments è¢«è§£æžçš„JSONæ•°æ®å¦‚æžœæ—¢ä¸æ˜¯å­—å…¸ä¹Ÿä¸æ˜¯æ•°ç»„, é‚£ä¹ˆå°±å¿…é¡»ä½¿ç”¨è¿™ä¸ª */ NSDictionary *dict = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:nil]; NSLog(@"%@",dict); &#125;];&#125; OCå¯¹è±¡-&gt;JSONå¯¹è±¡1234567891011121314151617181920212223242526//1.è¦è½¬æ¢æˆJSONæ•°æ®çš„OCå¯¹è±¡*è¿™é‡Œæ˜¯ä¸€ä¸ªå­—å…¸NSDictionary *dictM = @&#123;@"name":@"flame", @"age":@20, @"height":@1.80 &#125;;//2.OC-&gt;JSON/* æ³¨æ„ï¼šå¯ä»¥é€šè¿‡+ (BOOL)isValidJSONObject:(id)obj;æ–¹æ³•åˆ¤æ–­å½“å‰OCå¯¹è±¡èƒ½å¦è½¬æ¢ä¸ºJSONæ•°æ® å…·ä½“é™åˆ¶ï¼š 1.obj æ˜¯NSArray æˆ– NSDictionay ä»¥åŠä»–ä»¬æ´¾ç”Ÿå‡ºæ¥çš„å­ç±» 2.obj åŒ…å«çš„æ‰€æœ‰å¯¹è±¡æ˜¯NSString,NSNumber,NSArray,NSDictionary æˆ–NSNull 3.å­—å…¸ä¸­æ‰€æœ‰çš„keyå¿…é¡»æ˜¯NSStringç±»åž‹çš„ 4.NSNumberçš„å¯¹è±¡ä¸èƒ½æ˜¯NaNæˆ–æ— ç©·å¤§ *//* ç¬¬ä¸€ä¸ªå‚æ•°ï¼šè¦è½¬æ¢æˆJSONæ•°æ®çš„OCå¯¹è±¡ï¼Œè¿™é‡Œä¸ºä¸€ä¸ªå­—å…¸ ç¬¬äºŒä¸ªå‚æ•°ï¼šNSJSONWritingPrettyPrintedå¯¹è½¬æ¢ä¹‹åŽçš„JSONå¯¹è±¡è¿›è¡ŒæŽ’ç‰ˆï¼Œæ— æ„ä¹‰ */NSData *data = [NSJSONSerialization dataWithJSONObject:dictM options:NSJSONWritingPrettyPrinted error:nil];//3.æ‰“å°æŸ¥çœ‹Dataæ˜¯å¦æœ‰å€¼/* ç¬¬ä¸€ä¸ªå‚æ•°ï¼šè¦è½¬æ¢ä¸ºStringçš„äºŒè¿›åˆ¶æ•°æ® ç¬¬äºŒä¸ªå‚æ•°ï¼šç¼–ç æ–¹å¼ï¼Œé€šå¸¸é‡‡ç”¨NSUTF8StringEncoding */NSString *strM = [[NSString alloc]initWithData:data encoding:NSUTF8StringEncoding];NSLog(@"%@",strM); OCå¯¹è±¡å’ŒJSONæ•°æ®æ ¼å¼ä¹‹é—´çš„ä¸€ä¸€å¯¹åº”å…³ç³»1234567891011121314151617181920//OCå¯¹è±¡å’ŒJSONæ•°æ®ä¹‹é—´çš„ä¸€ä¸€å¯¹åº”å…³ç³»-(void)oCWithJSON&#123; //JSONçš„å„ç§æ•°æ®æ ¼å¼ //NSString *test = @"\"flame\""; //NSString *test = @"true"; NSString *test = @"&#123;\"name\":\"flame\"&#125;"; //æŠŠJSONæ•°æ®-&gt;OCå¯¹è±¡,ä»¥ä¾¿æŸ¥çœ‹ä»–ä»¬ä¹‹é—´çš„ä¸€ä¸€å¯¹åº”å…³ç³» //æ³¨æ„ç‚¹ï¼šè¢«è§£æžçš„JSONæ•°æ®å¦‚æžœæ—¢ä¸æ˜¯å­—å…¸ä¹Ÿä¸æ˜¯æ•°ç»„ï¼ˆæ¯”å¦‚æ˜¯NSStringï¼‰, é‚£ä¹ˆå°±å¿…é¡»ä½¿ç”¨è¿™ NSJSONReadingAllowFragments id obj = [NSJSONSerialization JSONObjectWithData:[test dataUsingEncoding:NSUTF8StringEncoding] options:NSJSONReadingAllowFragments error:nil]; NSLog(@"%@", [obj class]); /* JSONæ•°æ®æ ¼å¼å’ŒOCå¯¹è±¡çš„ä¸€ä¸€å¯¹åº”å…³ç³» &#123;&#125; -&gt; å­—å…¸ [] -&gt; æ•°ç»„ "" -&gt; å­—ç¬¦ä¸² 10/10.1 -&gt; NSNumber true/false -&gt; NSNumber null -&gt; NSNull */&#125; å¦‚ä½•æŸ¥çœ‹å¤æ‚çš„JSONæ•°æ®æ–¹æ³•ä¸€ï¼š åœ¨çº¿æ ¼å¼åŒ–http://tool.oschina.net/codeformat/jsonæ–¹æ³•äºŒï¼š æŠŠè§£æžåŽçš„æ•°æ®å†™plistæ–‡ä»¶ï¼Œé€šè¿‡plistæ–‡ä»¶å¯ä»¥ç›´è§‚çš„æŸ¥çœ‹JSONçš„å±‚æ¬¡ç»“æž„ã€‚[dictM writeToFile:@â€æ–‡ä»¶è·¯å¾„/æ–‡ä»¶å.plistâ€ atomically:YES]; å­—å…¸è½¬æ¨¡åž‹æ¡†æž¶ ç›¸å…³æ¡†æž¶ Mantle éœ€è¦ç»§æ‰¿è‡ªMTModel JSONModel éœ€è¦ç»§æ‰¿è‡ªJSONModel MJExtension ä¸éœ€è¦ç»§æ‰¿ï¼Œæ— ä»£ç ä¾µå…¥æ€§ è‡ªå·±è®¾è®¡å’Œé€‰æ‹©æ¡†æž¶æ—¶éœ€è¦æ³¨æ„çš„é—®é¢˜ ä¾µå…¥æ€§ æ˜“ç”¨æ€§ï¼Œæ˜¯å¦å®¹æ˜“ä¸Šæ‰‹ æ‰©å±•æ€§ï¼Œå¾ˆå®¹æ˜“ç»™è¿™ä¸ªæ¡†æž¶å¢žåŠ æ–°çš„åŠŸèƒ½ XMLè§£æžXMLç®€å•ä»‹ç»XMLï¼šå¯æ‰©å±•æ ‡è®°è¯­è¨€http://baike.baidu.com/link?url=TbqIa8egIx6fbzxIPnajB253ae80Nli9O7sLob2LW9zt-lN1WKxuhfV5srC-lyaJpBgQXezNbHN8-QDmMY46dqQSI9SfOrzgKxB8GXCuhtmmoC1gpkqmJ1Z1PhWgV_TD XMLè§£æžXMLè§£æžçš„ä¸¤ç§æ–¹å¼ SAX:ä»Žæ ¹å…ƒç´ å¼€å§‹ï¼ŒæŒ‰é¡ºåºä¸€ä¸ªå…ƒç´ ä¸€ä¸ªå…ƒç´ çš„å¾€ä¸‹è§£æžï¼Œå¯ç”¨äºŽè§£æžå¤§ã€å°æ–‡ä»¶ DOM:ä¸€æ¬¡æ€§å°†æ•´ä¸ªXMLæ–‡æ¡£åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œé€‚åˆè¾ƒå°çš„æ–‡ä»¶ è§£æžXMLçš„å·¥å…· è‹¹æžœåŽŸç”ŸNSXMLParser:ä½¿ç”¨SAXæ–¹å¼è§£æžï¼Œä½¿ç”¨ç®€å• ç¬¬ä¸‰æ–¹æ¡†æž¶ libxml2:çº¯Cè¯­è¨€çš„ï¼Œé»˜è®¤åŒ…å«åœ¨iOS SDKä¸­ï¼ŒåŒæ—¶æ”¯æŒDOMå’ŒSAXçš„æ–¹å¼è§£æž GDataXML:é‡‡ç”¨DOMæ–¹å¼è§£æžï¼Œè¯¥æ¡†æž¶ç”±Googleå¼€å‘ï¼Œæ˜¯åŸºäºŽxml2çš„ XMLè§£æžä»£ç ä½¿ç”¨NSXMLParserè§£æžXMLæ­¥éª¤å’Œä»£ç†æ–¹æ³• 1234567//è§£æžæ­¥éª¤ï¼š//4.1 åˆ›å»ºä¸€ä¸ªè§£æžå™¨NSXMLParser *parser = [[NSXMLParser alloc]initWithData:data];//4.2 è®¾ç½®ä»£ç†parser.delegate = self;//4.3 å¼€å§‹è§£æž[parser parse]; 12345678910111213//1.å¼€å§‹è§£æžXMLæ–‡æ¡£-(void)parserDidStartDocument:(nonnull NSXMLParser *)parser//2.å¼€å§‹è§£æžXMLä¸­æŸä¸ªå…ƒç´ çš„æ—¶å€™è°ƒç”¨ï¼Œæ¯”å¦‚&lt;video&gt;-(void)parser:(nonnull NSXMLParser *)parser didStartElement:(nonnull NSString *)elementName namespaceURI:(nullable NSString *)namespaceURI qualifiedName:(nullable NSString *)qName attributes:(nonnull NSDictionary&lt;NSString *,NSString *&gt; *)attributeDict&#123; if ([elementName isEqualToString:@"videos"]) &#123; return; &#125; //å­—å…¸è½¬æ¨¡åž‹ TYVideo *video = [TYVideo objectWithKeyValues:attributeDict]; [self.videos addObject:video];&#125;//3.å½“æŸä¸ªå…ƒç´ è§£æžå®Œæˆä¹‹åŽè°ƒç”¨ï¼Œæ¯”å¦‚&lt;/video&gt;-(void)parser:(nonnull NSXMLParser *)parser didEndElement:(nonnull NSString *)elementName namespaceURI:(nullable NSString *)namespaceURI qualifiedName:(nullable NSString *)qName//4.XMLæ–‡æ¡£è§£æžç»“æŸ-(void)parserDidEndDocument:(nonnull NSXMLParser *)parser ä½¿ç”¨GDataParserè§£æžXMLçš„æ­¥éª¤å’Œæ–¹æ³• 123456789101112131415161718//é…ç½®çŽ¯å¢ƒ// 1 å…ˆå¯¼å…¥æ¡†æž¶ï¼Œç„¶åŽæŒ‰ç…§æ¡†æž¶ä½¿ç”¨æ³¨é‡Šé…ç½®çŽ¯å¢ƒ// 2 GDataXMLæ¡†æž¶æ˜¯MRCçš„ï¼Œæ‰€ä»¥è¿˜éœ€è¦å‘Šè¯‰ç¼–è¯‘å™¨ä»¥MRCçš„æ–¹å¼å¤„ç†GDataXMLçš„ä»£ç //åŠ è½½XMLæ–‡æ¡£ï¼ˆä½¿ç”¨çš„æ˜¯DOMçš„æ–¹å¼ä¸€å£æ°”æŠŠæ•´ä¸ªXMLæ–‡æ¡£éƒ½åžä¸‹ï¼‰GDataXMLDocument *doc = [[GDataXMLDocument alloc]initWithData:data options:kNilOptions error:nil];//èŽ·å–XMLæ–‡æ¡£çš„æ ¹å…ƒç´ ï¼Œæ ¹æ®æ ¹å…ƒç´ å–å‡ºXMLä¸­çš„æ¯ä¸ªå­å…ƒç´  NSArray * elements = [doc.rootElement elementsForName:@"video"];//å–å‡ºæ¯ä¸ªå­å…ƒç´ çš„å±žæ€§å¹¶è½¬æ¢ä¸ºæ¨¡åž‹for (GDataXMLElement *ele in elements) &#123; TYVideo *video = [[TYVideo alloc]init]; video.name = [ele attributeForName:@"name"].stringValue; video.length = [ele attributeForName:@"length"].stringValue.integerValue; video.url = [ele attributeForName:@"url"].stringValue; video.image = [ele attributeForName:@"image"].stringValue; video.ID = [ele attributeForName:@"id"].stringValue; //æŠŠè½¬æ¢å¥½çš„æ¨¡åž‹æ·»åŠ åˆ°tableViewçš„æ•°æ®æºself.videosæ•°ç»„ä¸­ [self.videos addObject:video];&#125; å¤šå€¼å‚æ•°å’Œä¸­æ–‡è¾“å‡ºé—®é¢˜å¤šå€¼å‚æ•°å¦‚ä½•è®¾ç½®è¯·æ±‚è·¯å¾„1234567891011121314/*å¦‚æžœä¸€ä¸ªå‚æ•°å¯¹åº”ç€å¤šä¸ªå€¼ï¼Œé‚£ä¹ˆç›´æŽ¥æŒ‰ç…§"å‚æ•°=å€¼&amp;å‚æ•°=å€¼"çš„æ–¹å¼æ‹¼æŽ¥ */-(void)test&#123; //1.ç¡®å®š URL NSURL *url = [NSURL URLWithString:@"URLå­—ç¬¦ä¸²"]; //2.åˆ›å»ºè¯·æ±‚å¯¹è±¡ NSURLRequest *request = [NSURLRequest requestWithURL:url]; //3.å‘é€è¯·æ±‚ [NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse * _Nullable response, NSData * _Nullable data, NSError * _Nullable connectionError) &#123; //4.è§£æž NSLog(@"%@",[NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:nil]); &#125;];&#125; å¦‚ä½•è§£å†³å­—å…¸å’Œæ•°ç»„ä¸­è¾“å‡ºä¹±ç çš„é—®é¢˜ç»™å­—å…¸å’Œæ•°ç»„æ·»åŠ ä¸€ä¸ªåˆ†ç±»ï¼Œé‡å†™descriptionWithLocaleæ–¹æ³•ï¼Œåœ¨è¯¥æ–¹æ³•ä¸­æ‹¼æŽ¥å…ƒç´ æ ¼å¼åŒ–è¾“å‡ºã€‚ 1-(nonnull NSString *)descriptionWithLocale:(nullable id)locale]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSä¹‹Runloop]]></title>
    <url>%2F2016%2F04%2F11%2FiOS%E4%B9%8BRunloop%2F</url>
    <content type="text"><![CDATA[Runloopï¼Œæ­£å¦‚å…¶åï¼Œloopè¡¨ç¤ºæŸç§å¾ªçŽ¯ï¼Œå’Œrunæ”¾åœ¨ä¸€èµ·å°±è¡¨ç¤ºä¸€ç›´åœ¨è¿è¡Œç€çš„å¾ªçŽ¯ã€‚å¦‚æžœæ²¡æœ‰Runloop,é‚£ä¹ˆç¨‹åºä¸€å¯åŠ¨å°±ä¼šé€€å‡ºï¼Œä»€ä¹ˆäº‹æƒ…éƒ½åšä¸äº†ï¼›å¦‚æžœæœ‰äº†Runloopï¼Œé‚£ä¹ˆç›¸å½“äºŽåœ¨å†…éƒ¨æœ‰ä¸€ä¸ªæ­»å¾ªçŽ¯ï¼Œèƒ½å¤Ÿä¿è¯ç¨‹åºçš„æŒç»­è¿è¡Œã€‚ Runloopçš„ä½œç”¨ä¿æŒç¨‹åºçš„æŒç»­è¿è¡Œ(iosç¨‹åºä¸ºä»€ä¹ˆèƒ½ä¸€ç›´æ´»ç€ä¸ä¼šæ­») å¤„ç†appä¸­çš„å„ç§äº‹ä»¶ï¼ˆæ¯”å¦‚è§¦æ‘¸äº‹ä»¶ã€å®šæ—¶å™¨äº‹ä»¶ã€NSTimerã€‘ã€selectoräº‹ä»¶ã€é€‰æ‹©å™¨Â·performSelectorÂ·Â·Â·ã€‘ï¼‰ èŠ‚çœCPUèµ„æºï¼Œæé«˜ç¨‹åºæ€§èƒ½ï¼Œæœ‰äº‹æƒ…å°±åšäº‹æƒ…ï¼Œæ²¡äº‹æƒ…å°±ä¼‘æ¯ mainå‡½æ•°ä¸­çš„Runloop ï¼š åœ¨UIApplicationå‡½æ•°å†…éƒ¨å°±å¯åŠ¨äº†ä¸€ä¸ªRunloop è¯¥å‡½æ•°è¿”å›žä¸€ä¸ªintç±»åž‹çš„å€¼ è¿™ä¸ªé»˜è®¤å¯åŠ¨çš„Runloopæ˜¯è·Ÿä¸»çº¿ç¨‹ç›¸å…³è”çš„ Runloopå¯¹è±¡åœ¨iOSå¼€å‘ä¸­æœ‰ä¸¤å¥—apiæ¥è®¿é—®Runloop foundationæ¡†æž¶ã€NSRunloopã€‘ core foundationæ¡†æž¶ã€CFRunloopRefã€‘ NSRunLoopå’ŒCFRunLoopReféƒ½ä»£è¡¨ç€RunLoopå¯¹è±¡,å®ƒä»¬æ˜¯ç­‰ä»·çš„ï¼Œå¯ä»¥äº’ç›¸è½¬æ¢ NSRunLoopæ˜¯åŸºäºŽCFRunLoopRefçš„ä¸€å±‚OCåŒ…è£…ï¼Œæ‰€ä»¥è¦äº†è§£RunLoopå†…éƒ¨ç»“æž„ï¼Œéœ€è¦å¤šç ”ç©¶CFRunLoopRefå±‚é¢çš„APIï¼ˆCore Foundationå±‚é¢ï¼‰ Runloopä¸Žçº¿ç¨‹Runloopå’Œçº¿ç¨‹çš„å…³ç³»ï¼šä¸€ä¸ªRunloopå¯¹åº”ç€ä¸€æ¡å”¯ä¸€çš„çº¿ç¨‹ã€‚ä¸ºäº†è®©å­çº¿ç¨‹ä¸æ­»ï¼Œå¯ä»¥ç»™è¿™æ¡å­çº¿ç¨‹å¼€å¯ä¸€ä¸ªRunloop Runloopçš„åˆ›å»ºï¼šä¸»çº¿ç¨‹Runloopå·²ç»åˆ›å»ºå¥½äº†ï¼Œå­çº¿ç¨‹çš„runloopéœ€è¦æ‰‹åŠ¨åˆ›å»º Runloopçš„ç”Ÿå‘½å‘¨æœŸï¼šåœ¨ç¬¬ä¸€æ¬¡èŽ·å–æ—¶åˆ›å»ºï¼Œåœ¨çº¿ç¨‹ç»“æŸæ—¶é”€æ¯ å¦‚ä½•èŽ·å–Runloopå¯¹è±¡èŽ·å¾—å½“å‰Runloopå¯¹è±¡ 1234//01 NSRunloop NSRunLoop * runloop1 = [NSRunLoop currentRunLoop]; //02 CFRunLoopRef CFRunLoopRef runloop2 = CFRunLoopGetCurrent(); æ‹¿åˆ°å½“å‰åº”ç”¨ç¨‹åºçš„ä¸»Runloopï¼ˆä¸»çº¿ç¨‹å¯¹åº”çš„Runloopï¼‰ 1234//01 NSRunloop NSRunLoop * runloop1 = [NSRunLoop mainRunLoop]; //02 CFRunLoopRef CFRunLoopRef runloop2 = CFRunLoopGetMain(); æ³¨æ„ç‚¹ï¼šå¼€ä¸€ä¸ªå­çº¿ç¨‹åˆ›å»ºrunloop,ä¸æ˜¯é€šè¿‡alloc initæ–¹æ³•åˆ›å»ºï¼Œè€Œæ˜¯ç›´æŽ¥é€šè¿‡è°ƒç”¨currentRunLoopæ–¹æ³•æ¥åˆ›å»ºï¼Œå®ƒæœ¬èº«æ˜¯ä¸€ä¸ªæ‡’åŠ è½½çš„ã€‚ åœ¨å­çº¿ç¨‹ä¸­ï¼Œå¦‚æžœä¸ä¸»åŠ¨èŽ·å–Runloopçš„è¯ï¼Œé‚£ä¹ˆå­çº¿ç¨‹å†…éƒ¨æ˜¯ä¸ä¼šåˆ›å»ºRunloopçš„ã€‚å¯ä»¥ä¸‹è½½CFRunloopRefçš„æºç ï¼Œæœç´¢_CFRunloopGet0,æŸ¥çœ‹ä»£ç ã€‚ Runloopå¯¹è±¡æ˜¯åˆ©ç”¨å­—å…¸æ¥è¿›è¡Œå­˜å‚¨ï¼Œè€Œä¸”keyæ˜¯å¯¹åº”çš„çº¿ç¨‹Valueä¸ºè¯¥çº¿ç¨‹å¯¹åº”çš„Runloopã€‚ Runloopç›¸å…³ç±»Runloopè¿è¡Œå›¾ äº”ä¸ªç›¸å…³çš„ç±»ï¼š CFRunloopRef CFRunloopModeRefã€Runloopçš„è¿è¡Œæ¨¡å¼ã€‘ CFRunloopSourceRefã€Runloopè¦å¤„ç†çš„äº‹ä»¶æºã€‘ CFRunloopTimerRefã€Timeräº‹ä»¶ã€‘ CFRunloopObserverRefã€Runloopçš„è§‚å¯Ÿè€…ï¼ˆç›‘å¬è€…ï¼‰ã€‘ Runloopå’Œç›¸å…³ç±»ä¹‹é—´çš„å…³ç³»å›¾ Runloopè¦æƒ³è·‘èµ·æ¥ï¼Œå®ƒçš„å†…éƒ¨å¿…é¡»è¦æœ‰ä¸€ä¸ªmode,è¿™ä¸ªmodeé‡Œé¢å¿…é¡»æœ‰source\observer\timerï¼Œè‡³å°‘è¦æœ‰å…¶ä¸­çš„ä¸€ä¸ªã€‚ CFRunloopModeRef CFRunloopModeRefä»£è¡¨ç€Runloopçš„è¿è¡Œæ¨¡å¼ ä¸€ä¸ªRunloopä¸­å¯ä»¥æœ‰å¤šä¸ªmode,ä¸€ä¸ªmodeé‡Œé¢åˆå¯ä»¥æœ‰å¤šä¸ªsource\observer\timerç­‰ç­‰ æ¯æ¬¡runloopå¯åŠ¨çš„æ—¶å€™ï¼Œåªèƒ½æŒ‡å®šä¸€ä¸ªmode,è¿™ä¸ªmodeè¢«ç§°ä¸ºè¯¥Runloopçš„å½“å‰mode å¦‚æžœéœ€è¦åˆ‡æ¢mode,åªèƒ½å…ˆé€€å‡ºå½“å‰Runloop,å†é‡æ–°æŒ‡å®šä¸€ä¸ªmodeè¿›å…¥ è¿™æ ·åšä¸»è¦æ˜¯ä¸ºäº†åˆ†å‰²ä¸åŒç»„çš„å®šæ—¶å™¨ç­‰ï¼Œè®©ä»–ä»¬ç›¸äº’ä¹‹é—´ä¸å—å½±å“ ç³»ç»Ÿé»˜è®¤æ³¨å†Œäº†5ä¸ªmode kCFRunLoopDefaultModeï¼šAppçš„é»˜è®¤Modeï¼Œé€šå¸¸ä¸»çº¿ç¨‹æ˜¯åœ¨è¿™ä¸ªModeä¸‹è¿è¡Œ UITrackingRunLoopModeï¼šç•Œé¢è·Ÿè¸ª Modeï¼Œç”¨äºŽ ScrollView è¿½è¸ªè§¦æ‘¸æ»‘åŠ¨ï¼Œä¿è¯ç•Œé¢æ»‘åŠ¨æ—¶ä¸å—å…¶ä»– Mode å½±å“ UIInitializationRunLoopMode: åœ¨åˆšå¯åŠ¨ App æ—¶ç¬¬è¿›å…¥çš„ç¬¬ä¸€ä¸ª Modeï¼Œå¯åŠ¨å®ŒæˆåŽå°±ä¸å†ä½¿ç”¨ GSEventReceiveRunLoopMode: æŽ¥å—ç³»ç»Ÿäº‹ä»¶çš„å†…éƒ¨ Modeï¼Œé€šå¸¸ç”¨ä¸åˆ° kCFRunLoopCommonModes: è¿™æ˜¯ä¸€ä¸ªå ä½ç”¨çš„Modeï¼Œä¸æ˜¯ä¸€ç§çœŸæ­£çš„Mode CFRunloopTimerRef runloopä¸€å¯åŠ¨å°±ä¼šé€‰ä¸­ä¸€ç§æ¨¡å¼ï¼Œå½“é€‰ä¸­äº†ä¸€ç§æ¨¡å¼ä¹‹åŽå…¶å®ƒçš„æ¨¡å¼å°±éƒ½ä¸ç®¡ç”¨ã€‚ä¸€ä¸ªmodeé‡Œé¢å¯ä»¥æ·»åŠ å¤šä¸ªNSTimer,ä¹Ÿå°±æ˜¯è¯´ä»¥åŽå½“åˆ›å»ºNSTimerçš„æ—¶å€™ï¼Œå¯ä»¥æŒ‡å®šå®ƒæ˜¯åœ¨ä»€ä¹ˆæ¨¡å¼ä¸‹è¿è¡Œçš„ã€‚ å®ƒæ˜¯åŸºäºŽæ—¶é—´çš„è§¦å‘å™¨ï¼Œè¯´ç›´ç™½ç‚¹é‚£å°±æ˜¯æ—¶é—´åˆ°äº†æˆ‘å°±è§¦å‘ä¸€ä¸ªäº‹ä»¶ï¼Œè§¦å‘ä¸€ä¸ªæ“ä½œã€‚åŸºæœ¬ä¸Šè¯´çš„å°±æ˜¯NSTimer ç›¸å…³ä»£ç ï¼š 1234//NSTimer è°ƒç”¨äº†scheduledTimeræ–¹æ³•ï¼Œé‚£ä¹ˆä¼šè‡ªåŠ¨æ·»åŠ åˆ°å½“å‰çš„runloopé‡Œé¢åŽ»ï¼Œè€Œä¸”runloopçš„è¿è¡Œæ¨¡å¼kCFRunLoopDefaultModeNSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(run) userInfo:nil repeats:YES];//æ›´æ”¹æ¨¡å¼[[NSRunLoop currentRunLoop] addTimer:timer forMode:NSRunLoopCommonModes]; 12345678NSTimer *timer = [NSTimer timerWithTimeInterval:2.0 target:self selector:@selector(run) userInfo:nil repeats:YES];//å®šæ—¶å™¨æ·»åŠ åˆ°UITrackingRunLoopModeæ¨¡å¼ï¼Œä¸€æ—¦runloopåˆ‡æ¢æ¨¡å¼ï¼Œé‚£ä¹ˆå®šæ—¶å™¨å°±ä¸å·¥ä½œ[[NSRunLoop currentRunLoop] addTimer:timer forMode:UITrackingRunLoopMode];//å®šæ—¶å™¨æ·»åŠ åˆ°NSDefaultRunLoopModeæ¨¡å¼ï¼Œä¸€æ—¦runloopåˆ‡æ¢æ¨¡å¼ï¼Œé‚£ä¹ˆå®šæ—¶å™¨å°±ä¸å·¥ä½œ[[NSRunLoop currentRunLoop] addTimer:timer forMode:NSDefaultRunLoopMode];//å ä½æ¨¡å¼ï¼šcommon modesæ ‡è®°//è¢«æ ‡è®°ä¸ºcommon modesçš„æ¨¡å¼ kCFRunLoopDefaultMode UITrackingRunLoopMode[[NSRunLoop currentRunLoop] addTimer:timer forMode:NSRunLoopCommonModes]; GCDä¸­çš„å®šæ—¶å™¨12345678910111213141516171819202122232425262728293031323334//0.åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—dispatch_queue_t queue = dispatch_get_global_queue(0, 0);//1.åˆ›å»ºä¸€ä¸ªGCDçš„å®šæ—¶å™¨/*ç¬¬ä¸€ä¸ªå‚æ•°ï¼šè¯´æ˜Žè¿™æ˜¯ä¸€ä¸ªå®šæ—¶å™¨ç¬¬å››ä¸ªå‚æ•°ï¼šGCDçš„å›žè°ƒä»»åŠ¡æ·»åŠ åˆ°é‚£ä¸ªé˜Ÿåˆ—ä¸­æ‰§è¡Œï¼Œå¦‚æžœæ˜¯ä¸»é˜Ÿåˆ—åˆ™åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œ*/dispatch_source_t timer = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER, 0, 0, queue);//2.è®¾ç½®å®šæ—¶å™¨çš„å¼€å§‹æ—¶é—´ï¼Œé—´éš”æ—¶é—´ä»¥åŠç²¾å‡†åº¦//è®¾ç½®å¼€å§‹æ—¶é—´ï¼Œä¸‰ç§’é’Ÿä¹‹åŽè°ƒç”¨dispatch_time_t start = dispatch_time(DISPATCH_TIME_NOW,3.0 *NSEC_PER_SEC);//è®¾ç½®å®šæ—¶å™¨å·¥ä½œçš„é—´éš”æ—¶é—´uint64_t intevel = 1.0 * NSEC_PER_SEC;/*ç¬¬ä¸€ä¸ªå‚æ•°ï¼šè¦ç»™å“ªä¸ªå®šæ—¶å™¨è®¾ç½®ç¬¬äºŒä¸ªå‚æ•°ï¼šå®šæ—¶å™¨çš„å¼€å§‹æ—¶é—´DISPATCH_TIME_NOWè¡¨ç¤ºä»Žå½“å‰å¼€å§‹ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šå®šæ—¶å™¨è°ƒç”¨æ–¹æ³•çš„é—´éš”æ—¶é—´ç¬¬å››ä¸ªå‚æ•°ï¼šå®šæ—¶å™¨çš„ç²¾å‡†åº¦ï¼Œå¦‚æžœä¼ 0åˆ™è¡¨ç¤ºé‡‡ç”¨æœ€ç²¾å‡†çš„æ–¹å¼è®¡ç®—ï¼Œå¦‚æžœä¼ å¤§äºŽ0çš„æ•°å€¼ï¼Œåˆ™è¡¨ç¤ºè¯¥å®šæ—¶åˆ‡æ¢iå¯ä»¥æŽ¥æ”¶è¯¥å€¼èŒƒå›´å†…çš„è¯¯å·®ï¼Œé€šå¸¸ä¼ 0è¯¥å‚æ•°çš„æ„ä¹‰ï¼šå¯ä»¥é€‚å½“çš„æé«˜ç¨‹åºçš„æ€§èƒ½æ³¨æ„ç‚¹ï¼šGCDå®šæ—¶å™¨ä¸­çš„æ—¶é—´ä»¥çº³ç§’ä¸ºå•ä½ï¼ˆé¢è¯•ï¼‰*/dispatch_source_set_timer(timer, start, intevel, 0 * NSEC_PER_SEC);//3.è®¾ç½®å®šæ—¶å™¨å¼€å¯åŽå›žè°ƒçš„æ–¹æ³•/*ç¬¬ä¸€ä¸ªå‚æ•°ï¼šè¦ç»™å“ªä¸ªå®šæ—¶å™¨è®¾ç½®ç¬¬äºŒä¸ªå‚æ•°ï¼šå›žè°ƒblock*/dispatch_source_set_event_handler(timer, ^&#123;NSLog(@"------%@",[NSThread currentThread]);&#125;);//4.æ‰§è¡Œå®šæ—¶å™¨dispatch_resume(timer);//æ³¨æ„ï¼šdispatch_source_tæœ¬è´¨ä¸Šæ˜¯OCç±»ï¼Œåœ¨è¿™é‡Œæ˜¯ä¸ªå±€éƒ¨å˜é‡ï¼Œéœ€è¦å¼ºå¼•ç”¨self.timer = timer; CFRunloopSourceRef æ˜¯äº‹ä»¶æºä¹Ÿå°±æ˜¯è¾“å…¥æºï¼Œæœ‰ä¸¤ç§åˆ†ç±»æ¨¡å¼ï¼› ä¸€ç§æ˜¯æŒ‰ç…§è‹¹æžœå®˜æ–¹æ–‡æ¡£è¿›è¡Œåˆ’åˆ†çš„ å¦ä¸€ç§æ˜¯åŸºäºŽå‡½æ•°çš„è°ƒç”¨æ ˆæ¥è¿›è¡Œåˆ’åˆ†çš„ï¼ˆsource0å’Œsource1ï¼‰ã€‚ å…·ä½“çš„åˆ†ç±»æƒ…å†µ ä»¥å‰çš„åˆ†æ³•Port-Based Sources Custom Input Sources Cocoa Perform Selector Sources çŽ°åœ¨çš„åˆ†æ³•Source0ï¼šéžåŸºäºŽPortçš„ Source1ï¼šåŸºäºŽPortçš„ å¯ä»¥é€šè¿‡æ‰“æ–­ç‚¹çš„æ–¹å¼æŸ¥çœ‹ä¸€ä¸ªæ–¹æ³•çš„å‡½æ•°è°ƒç”¨æ ˆ CFRunLoopObserverRef CFRunLoopObserverRefæ˜¯è§‚å¯Ÿè€…ï¼Œèƒ½å¤Ÿç›‘å¬RunLoopçš„çŠ¶æ€æ”¹å˜ å¦‚ä½•ç›‘å¬: 1234567//åˆ›å»ºä¸€ä¸ªrunloopç›‘å¬è€…CFRunLoopObserverRef observer = CFRunLoopObserverCreateWithHandler(CFAllocatorGetDefault(),kCFRunLoopAllActivities, YES, 0, ^(CFRunLoopObserverRef observer, CFRunLoopActivity activity) &#123; NSLog(@"ç›‘å¬runloopçŠ¶æ€æ”¹å˜---%zd",activity); &#125;); //ä¸ºrunloopæ·»åŠ ä¸€ä¸ªç›‘å¬è€… CFRunLoopAddObserver(CFRunLoopGetCurrent(), observer, kCFRunLoopDefaultMode); CFRelease(observer); ç›‘å¬çš„çŠ¶æ€ 123456789typedef CF_OPTIONS(CFOptionFlags, CFRunLoopActivity) &#123; kCFRunLoopEntry = (1UL &lt;&lt; 0), //å³å°†è¿›å…¥Runloop kCFRunLoopBeforeTimers = (1UL &lt;&lt; 1), //å³å°†å¤„ç†NSTimer kCFRunLoopBeforeSources = (1UL &lt;&lt; 2), //å³å°†å¤„ç†Sources kCFRunLoopBeforeWaiting = (1UL &lt;&lt; 5), //å³å°†è¿›å…¥ä¼‘çœ  kCFRunLoopAfterWaiting = (1UL &lt;&lt; 6), //åˆšä»Žä¼‘çœ ä¸­å”¤é†’ kCFRunLoopExit = (1UL &lt;&lt; 7), //å³å°†é€€å‡ºrunloop kCFRunLoopAllActivities = 0x0FFFFFFFU //æ‰€æœ‰çŠ¶æ€æ”¹å˜&#125;; Runloopè¿è¡Œé€»è¾‘æ¯æ¬¡è¿è¡Œrunloopï¼Œä½ çº¿ç¨‹çš„runloopå¯¹è±¡ä¼šè‡ªåŠ¨å¤„ç†ä¹‹å‰æœªå¤„ç†çš„æ¶ˆæ¯ï¼Œå¹¶é€šçŸ¥ç›¸å…³çš„è§‚å¯Ÿè€…ï¼Œå…·ä½“é¡ºåºå¦‚ä¸‹ï¼š é€šçŸ¥è§‚å¯Ÿè€…runloopå·²ç»å¯åŠ¨ é€šçŸ¥è§‚å¯Ÿè€…ä»»ä½•å³å°†è¦å¼€å§‹çš„å®šæ—¶å™¨ é€šçŸ¥è§‚å¯Ÿè€…ä»»ä½•å³å°†å¯åŠ¨çš„éžåŸºäºŽç«¯å£çš„æº å¯åŠ¨ä»»ä½•å‡†å¤‡å¥½çš„éžåŸºäºŽç«¯å£çš„æº å¦‚æžœåŸºäºŽç«¯å£çš„æºå‡†å¤‡å¥½å¹¶å¤„äºŽç­‰å¾…çŠ¶æ€ï¼Œç«‹å³å¯åŠ¨ï¼›å¹¶è¿›å…¥æ­¥éª¤9 é€šçŸ¥è§‚å¯Ÿè€…çº¿ç¨‹è¿›å…¥ä¼‘çœ  å°†çº¿ç¨‹ç½®äºŽä¼‘çœ çŸ¥é“ä»»ä¸€ä¸‹é¢çš„äº‹ä»¶å‘ç”Ÿï¼š æŸä¸€äº‹ä»¶åˆ°è¾¾åŸºäºŽç«¯å£çš„æº å®šæ—¶å™¨å¯åŠ¨ runloopè®¾ç½®çš„æ—¶é—´å·²ç»è¶…æ—¶ runloopè¢«æ˜¾å¼å”¤é†’ é€šçŸ¥è§‚å¯Ÿè€…çº¿ç¨‹å°†è¢«å”¤é†’ å¤„ç†æœªå¤„ç†çš„äº‹ä»¶ å¦‚æžœç”¨æˆ·å®šä¹‰çš„å®šæ—¶å™¨å¯åŠ¨ï¼Œå¤„ç†å®šæ—¶å™¨äº‹ä»¶å¹¶é‡å¯runloopï¼Œè¿›å…¥æ­¥éª¤2 å¦‚æžœè¾“å…¥æºå¯åŠ¨ï¼Œä¼ é€’ç›¸åº”çš„æ¶ˆæ¯ å¦‚æžœrunloopè¢«æ˜¾å¼å”¤é†’è€Œä¸”æ—¶é—´è¿˜æ²¡è¶…æ—¶ï¼Œé‡å¯runloopï¼Œè¿›å…¥æ­¥éª¤2 é€šçŸ¥è§‚å¯Ÿè€…runloopç»“æŸ Runloopåº”ç”¨ NSTimer ImageViewæ˜¾ç¤º PerformSelector å¸¸é©»çº¿ç¨‹ è‡ªåŠ¨é‡Šæ”¾æ±  Runloopå‚è€ƒèµ„æ–™ è‹¹æžœå®˜æ–¹æ–‡æ¡£https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/Multithreading/RunLoopManagement/RunLoopManagement.html CFRunLoopRefå¼€æºä»£ç ä¸‹è½½åœ°å€ï¼šhttp://opensource.apple.com/source/CF/CF-1151.16/]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSä¹‹Runtime]]></title>
    <url>%2F2016%2F04%2F10%2FiOS%E4%B9%8Bruntime%2F</url>
    <content type="text"><![CDATA[RunTimeç®€ç§°è¿è¡Œæ—¶ã€‚å®ƒæ˜¯ä¸€å¥—çº¯Cè¯­è¨€API,å±žäºŽä¸€ä¸ªCè¯­è¨€åº“,åŒ…å«äº†å¾ˆå¤šåº•å±‚çš„Cè¯­è¨€APIã€‚OCå°±æ˜¯è¿è¡Œæ—¶æœºåˆ¶ï¼Œæˆ‘ä»¬å¹³æ—¶å†™çš„OCä»£ç åœ¨è¿è¡Œçš„æ—¶å€™éƒ½ä¼šè½¬æ¢æˆruntimeçš„Cè¯­è¨€ä»£ç ã€‚ å¯¹äºŽOCçš„å‡½æ•°ï¼Œå±žäºŽåŠ¨æ€è°ƒç”¨è¿‡ç¨‹ï¼Œåœ¨ç¼–è¯‘çš„æ—¶å€™å¹¶ä¸èƒ½å†³å®šçœŸæ­£è°ƒç”¨å“ªä¸ªå‡½æ•°ï¼Œåªæœ‰åœ¨çœŸæ­£è¿è¡Œçš„æ—¶å€™æ‰ä¼šæ ¹æ®å‡½æ•°çš„åç§°æ‰¾åˆ°å¯¹åº”çš„å‡½æ•°æ¥è°ƒç”¨ã€‚äº‹å®žè¯æ˜Žï¼šåœ¨ç¼–è¯‘é˜¶æ®µï¼ŒOCå¯ä»¥è°ƒç”¨ä»»ä½•å‡½æ•°ï¼Œå³ä½¿è¿™ä¸ªå‡½æ•°å¹¶æœªå®žçŽ°ï¼Œåªè¦å£°æ˜Žè¿‡å°±ä¸ä¼šæŠ¥é”™ã€‚åœ¨ç¼–è¯‘é˜¶æ®µï¼ŒCè¯­è¨€è°ƒç”¨æœªå®žçŽ°çš„å‡½æ•°å°±ä¼šæŠ¥é”™ã€‚ Runtimeæœ‰ä»€ä¹ˆä½œç”¨åœ¨æ²¡æœ‰äº†è§£runtimeä¹‹å‰ï¼Œä½ ä¼šè§‰å¾—å®ƒæ²¡æœ‰ä»€ä¹ˆç”¨ï¼Œä½†å½“ä½ æ·±å…¥çš„äº†è§£äº†OCçš„è¿è¡Œæœºåˆ¶åŽï¼Œä½ å°±ä¼šè§‰çš„å…¶å®žå®ƒçš„ä½œç”¨éžå¸¸ä¹‹å¤§ã€‚ 1. å‘é€æ¶ˆæ¯ æ–¹æ³•è°ƒç”¨çš„æœ¬è´¨å°±æ˜¯è®©å¯¹è±¡å‘é€æ¶ˆæ¯ objc_msgSend,åªæœ‰å¯¹è±¡æ‰èƒ½å‘é€æ¶ˆæ¯ï¼Œå› æ­¤ä»¥objcå¼€å¤´ ä½¿ç”¨æ¶ˆæ¯æœºåˆ¶çš„å‰æï¼Œå¿…é¡»å¯¼å…¥#import æ¶ˆæ¯æœºåˆ¶åŽŸç†:å¯¹è±¡æ ¹æ®æ–¹æ³•ç¼–å·SELåŽ»æ˜ å°„è¡¨æŸ¥æ‰¾å¯¹åº”çš„æ–¹æ³•å®žçŽ° æ¶ˆæ¯æœºåˆ¶ä»£ç è¯´æ˜Žï¼š 1234567891011121314// åˆ›å»ºpersonå¯¹è±¡ Person *p = [[Person alloc] init]; // è°ƒç”¨å¯¹è±¡æ–¹æ³• [p eat]; // æœ¬è´¨ï¼šè®©å¯¹è±¡å‘é€æ¶ˆæ¯ objc_msgSend(p, @selector(eat)); // è°ƒç”¨ç±»æ–¹æ³•çš„æ–¹å¼ï¼šä¸¤ç§ // ç¬¬ä¸€ç§é€šè¿‡ç±»åè°ƒç”¨ [Person eat]; // ç¬¬äºŒç§é€šè¿‡ç±»å¯¹è±¡è°ƒç”¨ [[Person class] eat]; // ç”¨ç±»åè°ƒç”¨ç±»æ–¹æ³•ï¼Œåº•å±‚ä¼šè‡ªåŠ¨æŠŠç±»åè½¬æ¢æˆç±»å¯¹è±¡è°ƒç”¨ // æœ¬è´¨ï¼šè®©ç±»å¯¹è±¡å‘é€æ¶ˆæ¯ objc_msgSend([Person class], @selector(eat)); 2.äº¤æ¢æ–¹æ³•å¦‚æžœç³»ç»Ÿè‡ªå¸¦çš„æ–¹æ³•åŠŸèƒ½ä¸å¤Ÿï¼Œå¯ä»¥ç»™ç³»ç»Ÿè‡ªå¸¦çš„æ–¹æ³•æ‰©å±•ä¸€äº›åŠŸèƒ½ï¼Œå¹¶ä¸”ä¿æŒåŽŸæœ‰çš„åŠŸèƒ½ï¼Œæœ‰ä¸¤ç§å®žçŽ°æ–¹å¼ï¼š ç»§æ‰¿ç³»ç»Ÿçš„ç±»ï¼Œé‡å†™æ–¹æ³• ä½¿ç”¨runtime,äº¤æ¢æ–¹æ³• ä½¿ç”¨Runtimeå®žçŽ°æ–¹æ³•äº¤æ¢ï¼š åœ¨åˆ†ç±»ä¸­äº¤æ¢æ–¹æ³•åœ°å€ï¼Œå¹¶å®žçŽ°æ–¹æ³• 123456789101112131415161718192021222324252627282930313233@implementation UIImage (Image)//åŠ è½½åˆ†ç±»åˆ°å†…å­˜ä¸­çš„æ—¶å€™è°ƒç”¨+(void)load&#123; //èŽ·å–imageNamedæ–¹æ³•åœ°å€ Method imageName = class_getClassMethod(self, @selector(imageNamed:)); //èŽ·å–imageWithNameæ–¹æ³•åœ°å€ Method imageWithName = class_getClassMethod(self, @selector(imageWithName:)); //äº¤æ¢ä¸¤ä¸ªæ–¹æ³•çš„åœ°å€ method_exchangeImplementations(imageName, imageWithName); &#125;// ä¸èƒ½åœ¨åˆ†ç±»ä¸­é‡å†™ç³»ç»Ÿæ–¹æ³•imageNamedï¼Œå› ä¸ºä¼šæŠŠç³»ç»Ÿçš„åŠŸèƒ½ç»™è¦†ç›–æŽ‰ï¼Œè€Œä¸”åˆ†ç±»ä¸­ä¸èƒ½è°ƒç”¨super.+(instancetype)imageWithName:(NSString *)name&#123; // è¿™é‡Œè°ƒç”¨imageWithNameï¼Œç›¸å½“äºŽè°ƒç”¨imageName UIImage *image = [self imageWithName:name]; if (image == nil) &#123; NSLog(@"å›¾ç‰‡åŠ è½½ä¸ºç©º"); &#125; return image;&#125;@end``` * è°ƒç”¨ç³»ç»Ÿæ–¹æ³•ï¼Œå…¶å®žè°ƒç”¨çš„æ˜¯è‡ªå·±åˆ›å»ºçš„æ–¹æ³•```objc-(void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event&#123; //å½“å›¾ç‰‡ä¸å­˜åœ¨çš„æ—¶å€™ä¼šæ‰“å°"å›¾ç‰‡åŠ è½½ä¸ºç©º" UIImage * image = [UIImage imageNamed:@"222"]; self.pageView.image = image;&#125; 3. åŠ¨æ€æ·»åŠ æ–¹æ³•å¦‚æžœä¸€ä¸ªç±»æ–¹æ³•éžå¸¸å¤šï¼ŒåŠ è½½ç±»åˆ°å†…å­˜çš„æ—¶å€™ä¹Ÿæ¯”è¾ƒè€—è´¹èµ„æºï¼Œéœ€è¦ç»™æ¯ä¸ªæ–¹æ³•ç”Ÿæˆæ˜ å°„è¡¨ï¼Œå¯ä»¥ä½¿ç”¨åŠ¨æ€ç»™æŸä¸ªç±»æ·»åŠ æ–¹æ³•è§£å†³ã€‚ è°ƒç”¨æœªå®žçŽ°çš„æ–¹æ³• 123Person * p = [[Person alloc] init];// é»˜è®¤Personæ²¡æœ‰å®žçŽ°eatæ–¹æ³•ï¼Œé€šè¿‡performSelectoræ–¹æ³•è°ƒç”¨ä¼šæŠ¥é”™ï¼Œä½†æ˜¯åŠ¨æ€æ·»åŠ æ–¹æ³•å°±ä¸ä¼šæŠ¥é”™[p performSelector:@selector(eat)]; åŠ¨æ€çš„æ·»åŠ æ–¹æ³• 1234567891011121314151617181920@implementation Person//é»˜è®¤æ–¹æ³•éƒ½æœ‰ä¸¤ä¸ªéšå¼å‚æ•°void eat (id self, SEL sel)&#123; NSLog(@"%@, %@", self, NSStringFromSelector(sel));&#125;//å½“ä¸€ä¸ªå¯¹è±¡è°ƒç”¨æœªå®žçŽ°çš„æ–¹æ³•æ—¶ï¼Œç³»ç»Ÿä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•å¤„ç†ï¼Œå¹¶ä¸”ä¼šæŠŠå¯¹åº”çš„æ–¹æ³•åˆ—è¡¨ä¼ è¿‡æ¥+ (BOOL)resolveInstanceMethod:(SEL)sel&#123; if (sel == @selector(eat)) &#123; //åŠ¨æ€æ·»åŠ eatæ–¹æ³• // ç¬¬ä¸€ä¸ªå‚æ•°ï¼šç»™å“ªä¸ªç±»æ·»åŠ æ–¹æ³• // ç¬¬äºŒä¸ªå‚æ•°ï¼šæ·»åŠ æ–¹æ³•çš„æ–¹æ³•ç¼–å· // ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šæ·»åŠ æ–¹æ³•çš„å‡½æ•°å®žçŽ°ï¼ˆå‡½æ•°åœ°å€ï¼‰ // ç¬¬å››ä¸ªå‚æ•°ï¼šå‡½æ•°çš„ç±»åž‹ï¼Œ(è¿”å›žå€¼+å‚æ•°ç±»åž‹) v:void @:å¯¹è±¡-&gt;self :è¡¨ç¤ºSEL-&gt;_cmd class_addMethod(self, @selector(eat), eat, "v@:"); &#125; NSLog(@"å½“ä¸€ä¸ªå¯¹è±¡è°ƒç”¨æœªå®žçŽ°çš„æ–¹æ³•æ—¶ï¼Œä¼šè°ƒç”¨è¿™ä¸ªå‡½æ•°"); return [super resolveInstanceMethod:sel];&#125;@end 4. ç»™åˆ†ç±»æ·»åŠ å±žæ€§ç»™ä¸€ä¸ªç±»å£°æ˜Žå±žæ€§ï¼Œå…¶å®žæœ¬è´¨å°±æ˜¯ç»™è¿™ä¸ªç±»æ·»åŠ å…³è”ï¼Œå¹¶ä¸æ˜¯ç›´æŽ¥æŠŠè¿™ä¸ªå€¼çš„å†…å­˜ç©ºé—´æ·»åŠ åˆ°ç±»å­˜ç©ºé—´ã€‚æ‰€ä»¥å³ä¾¿åˆ†ç±»ä¸èƒ½æ·»åŠ å±žæ€§ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨runtimeå®žçŽ°è¿™ä¸€åŠŸèƒ½ã€‚ åœ¨åˆ†ç±»ä¸­å£°æ˜Žå±žæ€§ 12345@interface NSObject (AddName)// @propertyåœ¨åˆ†ç±»ä¸­ï¼Œåªä¼šç”Ÿæˆget,setæ–¹æ³•çš„å£°æ˜Žï¼Œä¸ä¼šç”Ÿæˆä¸‹åˆ’çº¿æˆå‘˜å±žæ€§ï¼Œå’Œget,setæ–¹æ³•çš„å®žçŽ°// å› æ­¤éœ€è¦è‡ªå·±å®žçŽ°@property (nonatomic, strong) NSString *name;@end åœ¨åˆ†ç±»ä¸­å®žçŽ°å±žæ€§çš„getï¼Œsetæ–¹æ³• 12345678910111213141516171819//å®šä¹‰ä¸€ä¸ªå…³è”çš„keystatic const char *key = "name";@implementation NSObject (AddName)//getæ–¹æ³•-(NSString *)name&#123; //æ ¹æ®å…³è”çš„keyèŽ·å–å…³è”çš„å€¼ return objc_getAssociatedObject(self, key);&#125;//setæ–¹æ³•-(void)setName:(NSString *)name&#123; // ç¬¬ä¸€ä¸ªå‚æ•°ï¼šç»™å“ªä¸ªå¯¹è±¡æ·»åŠ å…³è” // ç¬¬äºŒä¸ªå‚æ•°ï¼šå…³è”çš„keyï¼Œé€šè¿‡è¿™ä¸ªkeyèŽ·å– // ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šå…³è”çš„value // ç¬¬å››ä¸ªå‚æ•°:å…³è”çš„ç­–ç•¥ objc_setAssociatedObject(self, key, name, OBJC_ASSOCIATION_RETAIN_NONATOMIC);&#125;@end ä¸ºå±žæ€§èµ‹å€¼ 1234// ç»™ç³»ç»ŸNSObjectç±»åŠ¨æ€æ·»åŠ å±žæ€§nameNSObject *objc = [[NSObject alloc] init];objc.name = @"flame";NSLog(@"%@",objc.name); 5. ä½¿ç”¨runtimeå­—å…¸è½¬æ¨¡åž‹æä¾›ä¸€ä¸ªåˆ†ç±»ï¼Œä¸“é—¨æ ¹æ®å­—å…¸ç”Ÿæˆæ¨¡åž‹å¯¹åº”çš„å±žæ€§å­—ç¬¦ä¸²ã€‚ 12345678910111213141516171819202122232425262728293031// è‡ªåŠ¨æ‰“å°å±žæ€§å­—ç¬¦ä¸²+ (void)resolveDict:(NSDictionary *)dict&#123; // æ‹¼æŽ¥å±žæ€§å­—ç¬¦ä¸²ä»£ç  NSMutableString *strM = [NSMutableString string]; // 1.éåŽ†å­—å…¸ï¼ŒæŠŠå­—å…¸ä¸­çš„æ‰€æœ‰keyå–å‡ºæ¥ï¼Œç”Ÿæˆå¯¹åº”çš„å±žæ€§ä»£ç  [dict enumerateKeysAndObjectsUsingBlock:^(id _Nonnull key, id _Nonnull obj, BOOL * _Nonnull stop) &#123; NSString *type; if ([obj isKindOfClass:NSClassFromString(@"__NSCFString")]) &#123; type = @"NSString"; &#125;else if ([obj isKindOfClass:NSClassFromString(@"__NSCFArray")])&#123; type = @"NSArray"; &#125;else if ([obj isKindOfClass:NSClassFromString(@"__NSCFNumber")])&#123; type = @"int"; &#125;else if ([obj isKindOfClass:NSClassFromString(@"__NSCFDictionary")])&#123; type = @"NSDictionary"; &#125;else if ([obj isKindOfClass:NSClassFromString(@"__NSCFBoolean")])&#123; type = @"Bool"; &#125; // å±žæ€§å­—ç¬¦ä¸² NSString *str; if ([type containsString:@"NS"]) &#123; str = [NSString stringWithFormat:@"@property (nonatomic, strong) %@ *%@;",type,key]; &#125;else&#123; str = [NSString stringWithFormat:@"@property (nonatomic, assign) %@ %@;",type,key]; &#125; // æ¯ç”Ÿæˆå±žæ€§å­—ç¬¦ä¸²ï¼Œå°±è‡ªåŠ¨æ¢è¡Œã€‚ [strM appendFormat:@"\n%@\n",str]; &#125;]; // æŠŠæ‹¼æŽ¥å¥½çš„å­—ç¬¦ä¸²æ‰“å°å‡ºæ¥ï¼Œå°±å¥½äº†ã€‚ NSLog(@"%@",strM);&#125; ä½¿ç”¨runtimeå­—å…¸è½¬æ¨¡åž‹ æ€è·¯ï¼šåˆ©ç”¨è¿è¡Œæ—¶ï¼ŒéåŽ†æ¨¡åž‹ä¸­æ‰€æœ‰å±žæ€§ï¼Œæ ¹æ®æ¨¡åž‹çš„å±žæ€§åï¼ŒåŽ»å­—å…¸ä¸­æŸ¥æ‰¾keyï¼Œå–å‡ºå¯¹åº”çš„å€¼ï¼Œç»™æ¨¡åž‹çš„å±žæ€§èµ‹å€¼ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778#import &lt;objc/message.h&gt;@implementation NSObject (Model)+ (instancetype)modelWithDict:(NSDictionary *)dict&#123; // æ€è·¯ï¼šéåŽ†æ¨¡åž‹ä¸­æ‰€æœ‰å±žæ€§-ã€‹ä½¿ç”¨è¿è¡Œ // 0.åˆ›å»ºå¯¹åº”çš„å¯¹è±¡ id objc = [[self alloc] init]; // 1.åˆ©ç”¨runtimeç»™å¯¹è±¡ä¸­çš„æˆå‘˜å±žæ€§èµ‹å€¼ // class_copyIvarList:èŽ·å–ç±»ä¸­çš„æ‰€æœ‰æˆå‘˜å±žæ€§ // Ivarï¼šæˆå‘˜å±žæ€§çš„æ„æ€ // ç¬¬ä¸€ä¸ªå‚æ•°ï¼šè¡¨ç¤ºèŽ·å–å“ªä¸ªç±»ä¸­çš„æˆå‘˜å±žæ€§ // ç¬¬äºŒä¸ªå‚æ•°ï¼šè¡¨ç¤ºè¿™ä¸ªç±»æœ‰å¤šå°‘æˆå‘˜å±žæ€§ï¼Œä¼ å…¥ä¸€ä¸ªIntå˜é‡åœ°å€ï¼Œä¼šè‡ªåŠ¨ç»™è¿™ä¸ªå˜é‡èµ‹å€¼ // è¿”å›žå€¼Ivar *ï¼šæŒ‡çš„æ˜¯ä¸€ä¸ªivaræ•°ç»„ï¼Œä¼šæŠŠæ‰€æœ‰æˆå‘˜å±žæ€§æ”¾åœ¨ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œé€šè¿‡è¿”å›žçš„æ•°ç»„å°±èƒ½å…¨éƒ¨èŽ·å–åˆ°ã€‚ unsigned int count; // èŽ·å–ç±»ä¸­çš„æ‰€æœ‰æˆå‘˜å±žæ€§ Ivar *ivarList = class_copyIvarList(self, &amp;count); for (int i = 0; i &lt; count; i++) &#123; // æ ¹æ®è§’æ ‡ï¼Œä»Žæ•°ç»„å–å‡ºå¯¹åº”çš„æˆå‘˜å±žæ€§ Ivar ivar = ivarList[i]; // èŽ·å–æˆå‘˜å±žæ€§å NSString *name = [NSString stringWithUTF8String:ivar_getName(ivar)]; // å¤„ç†æˆå‘˜å±žæ€§å-&gt;å­—å…¸ä¸­çš„key // ä»Žç¬¬ä¸€ä¸ªè§’æ ‡å¼€å§‹æˆªå– NSString *key = [name substringFromIndex:1]; // æ ¹æ®æˆå‘˜å±žæ€§ååŽ»å­—å…¸ä¸­æŸ¥æ‰¾å¯¹åº”çš„value id value = dict[key]; // äºŒçº§è½¬æ¢:å¦‚æžœå­—å…¸ä¸­è¿˜æœ‰å­—å…¸ï¼Œä¹Ÿéœ€è¦æŠŠå¯¹åº”çš„å­—å…¸è½¬æ¢æˆæ¨¡åž‹ // åˆ¤æ–­ä¸‹valueæ˜¯å¦æ˜¯å­—å…¸ if ([value isKindOfClass:[NSDictionary class]]) &#123; // å­—å…¸è½¬æ¨¡åž‹ // èŽ·å–æ¨¡åž‹çš„ç±»å¯¹è±¡ï¼Œè°ƒç”¨modelWithDict // æ¨¡åž‹çš„ç±»åå·²çŸ¥ï¼Œå°±æ˜¯æˆå‘˜å±žæ€§çš„ç±»åž‹ // èŽ·å–æˆå‘˜å±žæ€§ç±»åž‹ NSString *type = [NSString stringWithUTF8String:ivar_getTypeEncoding(ivar)]; // ç”Ÿæˆçš„æ˜¯è¿™ç§@"@\"User\"" ç±»åž‹ -ã€‹ @"User" åœ¨OCå­—ç¬¦ä¸²ä¸­ \" -&gt; "ï¼Œ\æ˜¯è½¬ä¹‰çš„æ„æ€ï¼Œä¸å ç”¨å­—ç¬¦ // è£å‰ªç±»åž‹å­—ç¬¦ä¸² NSRange range = [type rangeOfString:@"\""]; type = [type substringFromIndex:range.location + range.length]; range = [type rangeOfString:@"\""]; // è£å‰ªåˆ°å“ªä¸ªè§’æ ‡ï¼Œä¸åŒ…æ‹¬å½“å‰è§’æ ‡ type = [type substringToIndex:range.location]; // æ ¹æ®å­—ç¬¦ä¸²ç±»åç”Ÿæˆç±»å¯¹è±¡ Class modelClass = NSClassFromString(type); if (modelClass) &#123; // æœ‰å¯¹åº”çš„æ¨¡åž‹æ‰éœ€è¦è½¬ // æŠŠå­—å…¸è½¬æ¨¡åž‹ value = [modelClass modelWithDict:value]; &#125; &#125; // ä¸‰çº§è½¬æ¢ï¼šNSArrayä¸­ä¹Ÿæ˜¯å­—å…¸ï¼ŒæŠŠæ•°ç»„ä¸­çš„å­—å…¸è½¬æ¢æˆæ¨¡åž‹. // åˆ¤æ–­å€¼æ˜¯å¦æ˜¯æ•°ç»„ if ([value isKindOfClass:[NSArray class]]) &#123; // åˆ¤æ–­å¯¹åº”ç±»æœ‰æ²¡æœ‰å®žçŽ°å­—å…¸æ•°ç»„è½¬æ¨¡åž‹æ•°ç»„çš„åè®® if ([self respondsToSelector:@selector(arrayContainModelClass)]) &#123; // è½¬æ¢æˆidç±»åž‹ï¼Œå°±èƒ½è°ƒç”¨ä»»ä½•å¯¹è±¡çš„æ–¹æ³• id idSelf = self; // èŽ·å–æ•°ç»„ä¸­å­—å…¸å¯¹åº”çš„æ¨¡åž‹ NSString *type = [idSelf arrayContainModelClass][key]; // ç”Ÿæˆæ¨¡åž‹ Class classModel = NSClassFromString(type); NSMutableArray *arrM = [NSMutableArray array]; // éåŽ†å­—å…¸æ•°ç»„ï¼Œç”Ÿæˆæ¨¡åž‹æ•°ç»„ for (NSDictionary *dict in value) &#123; // å­—å…¸è½¬æ¨¡åž‹ id model = [classModel modelWithDict:dict]; [arrM addObject:model]; &#125; // æŠŠæ¨¡åž‹æ•°ç»„èµ‹å€¼ç»™value value = arrM; &#125; &#125; if (value) &#123; // æœ‰å€¼ï¼Œæ‰éœ€è¦ç»™æ¨¡åž‹çš„å±žæ€§èµ‹å€¼ // åˆ©ç”¨KVCç»™æ¨¡åž‹ä¸­çš„å±žæ€§èµ‹å€¼ [objc setValue:value forKey:key]; &#125; &#125; return objc;&#125;@end]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSä¹‹å¤šçº¿ç¨‹]]></title>
    <url>%2F2016%2F04%2F09%2FiOS%E4%B9%8B%E5%A4%9A%E7%BA%BF%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[é¦–å…ˆï¼Œåœ¨äº†è§£å¤šçº¿ç¨‹ä¹‹å‰è¦äº†è§£ä»€ä¹ˆæ˜¯è¿›ç¨‹ï¼Œä»€ä¹ˆæ˜¯çº¿ç¨‹è¿›ç¨‹æ˜¯æŒ‡åœ¨ç³»ç»Ÿä¸­æ­£åœ¨è¿è¡Œçš„ä¸€ä¸ªåº”ç”¨ç¨‹åºã€‚æ¯ä¸ªè¿›ç¨‹ä¹‹é—´æ˜¯ç‹¬ç«‹çš„ï¼Œæ¯ä¸ªè¿›ç¨‹å‡è¿è¡Œåœ¨å…¶ä¸“ç”¨ä¸”å—ä¿æŠ¤çš„å†…å­˜ç©ºé—´å†…ã€‚ä¸€ä¸ªè¿›ç¨‹è¦æƒ³æ‰§è¡Œä»»åŠ¡ï¼Œå¿…é¡»å¾—æœ‰è‡³å°‘ä¸€ä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹æ˜¯è¿›ç¨‹çš„åŸºæœ¬æ‰§è¡Œå•å…ƒï¼Œä¸€ä¸ªè¿›ç¨‹ï¼ˆç¨‹åºï¼‰çš„æ‰€æœ‰ä»»åŠ¡éƒ½åœ¨çº¿ç¨‹ä¸­æ‰§è¡Œã€‚ä¸€ä¸ªçº¿ç¨‹ä¸­ä»»åŠ¡çš„æ‰§è¡Œæ˜¯ä¸²è¡Œçš„ï¼Œå¦‚æžœè¦åœ¨1ä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼Œé‚£ä¹ˆåªèƒ½ä¸€ä¸ªä¸€ä¸ªåœ°æŒ‰é¡ºåºæ‰§è¡Œè¿™äº›ä»»åŠ¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨åŒä¸€æ—¶é—´å†…ï¼Œ1ä¸ªçº¿ç¨‹åªèƒ½æ‰§è¡Œ1ä¸ªä»»åŠ¡ã€‚ ä»€ä¹ˆæ˜¯å¤šçº¿ç¨‹ï¼Ÿå³åœ¨ä¸€ä¸ªè¿›ç¨‹ï¼ˆç¨‹åºï¼‰ä¸­å¯ä»¥å¼€å¯å¤šæ¡çº¿ç¨‹ï¼Œæ¯æ¡çº¿ç¨‹å¯ä»¥å¹¶è¡Œï¼ˆåŒæ—¶ï¼‰æ‰§è¡Œä¸åŒçš„ä»»åŠ¡ã€‚ å¹¶è¡Œå³åŒæ—¶æ‰§è¡Œã€‚æ¯”å¦‚åŒæ—¶å¼€å¯3æ¡çº¿ç¨‹åˆ†åˆ«ä¸‹è½½3ä¸ªæ–‡ä»¶ï¼ˆåˆ†åˆ«æ˜¯æ–‡ä»¶Aã€æ–‡ä»¶Bã€æ–‡ä»¶Cï¼‰ã€‚ åœ¨åŒä¸€æ—¶é—´é‡Œï¼ŒCPUåªèƒ½å¤„ç†ä¸€æ¡çº¿ç¨‹ï¼Œåªæœ‰ä¸€æ¡çº¿ç¨‹åœ¨å·¥ä½œï¼ˆæ‰§è¡Œï¼‰ã€‚å¤šçº¿ç¨‹å¹¶å‘ï¼ˆåŒæ—¶ï¼‰æ‰§è¡Œï¼Œå…¶å®žæ˜¯CPUå¿«é€Ÿåœ°åœ¨å¤šæ¡çº¿ç¨‹ä¹‹é—´å¿«é€Ÿåˆ‡æ¢ï¼Œå¦‚æžœCPUè°ƒåº¦çº¿ç¨‹çš„æ—¶é—´è¶³å¤Ÿå¿«ï¼Œå°±é€ æˆäº†å¤šçº¿ç¨‹å¹¶å‘æ‰§è¡Œçš„å‡è±¡ã€‚ å¤šçº¿ç¨‹ä¼˜ç¼ºç‚¹ä¼˜ç‚¹: èƒ½é€‚å½“æé«˜ç¨‹åºçš„æ‰§è¡Œæ•ˆçŽ‡ã€‚ èƒ½é€‚å½“æé«˜èµ„æºåˆ©ç”¨çŽ‡ï¼ˆCPUã€å†…å­˜åˆ©ç”¨çŽ‡ï¼‰ ç¼ºç‚¹: å¼€å¯çº¿ç¨‹éœ€è¦å ç”¨ä¸€å®šçš„å†…å­˜ç©ºé—´ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼Œä¸»çº¿ç¨‹å ç”¨1Mï¼Œå­çº¿ç¨‹å ç”¨512KBï¼‰ï¼Œå¦‚æžœå¼€å¯å¤§é‡çš„çº¿ç¨‹ï¼Œä¼šå ç”¨å¤§é‡çš„å†…å­˜ç©ºé—´ï¼Œé™ä½Žç¨‹åºçš„æ€§èƒ½ã€‚ çº¿ç¨‹è¶Šå¤šï¼ŒCPUåœ¨è°ƒåº¦çº¿ç¨‹ä¸Šçš„å¼€é”€å°±è¶Šå¤§ã€‚ ç¨‹åºè®¾è®¡æ›´åŠ å¤æ‚ï¼šæ¯”å¦‚çº¿ç¨‹ä¹‹é—´çš„é€šä¿¡ã€å¤šçº¿ç¨‹çš„æ•°æ®å…±äº« å¼€å¯å¤šçº¿ç¨‹çš„æ–¹å¼å½“ä¸€ä¸ªiOSç¨‹åºè¿è¡ŒåŽï¼Œé»˜è®¤ä¼šå¼€å¯1æ¡çº¿ç¨‹ï¼Œç§°ä¸ºâ€œä¸»çº¿ç¨‹â€æˆ–â€œUIçº¿ç¨‹â€ï¼›å®ƒçš„ä½œç”¨å°±æ˜¯åˆ·æ–°æ˜¾ç¤ºUI,å¤„ç†UIäº‹ä»¶ã€‚ ä¸è¦å°†è€—æ—¶æ“ä½œæ”¾åˆ°ä¸»çº¿ç¨‹ä¸­åŽ»å¤„ç†ï¼Œä¼šå¡ä½çº¿ç¨‹ã€‚ å’ŒUIç›¸å…³çš„åˆ·æ–°æ“ä½œå¿…é¡»æ”¾åˆ°ä¸»çº¿ç¨‹ä¸­è¿›è¡Œå¤„ç†ã€‚ pthreadç‰¹ç‚¹ï¼š ä¸€å¥—é€šç”¨çš„å¤šçº¿ç¨‹API é€‚ç”¨äºŽUnix\Linux\Windowsç­‰ç³»ç»Ÿ è·¨å¹³å°\å¯ç§»æ¤ ä½¿ç”¨éš¾åº¦ï¼š*****ä½¿ç”¨è¯­è¨€ï¼šcè¯­è¨€ä½¿ç”¨é¢‘çŽ‡ï¼šå‡ ä¹Žä¸ç”¨çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸï¼šç”±ç¨‹åºå‘˜è¿›è¡Œç®¡ç† ä½¿ç”¨è¯´æ˜Žï¼špthreadçš„åŸºæœ¬ä½¿ç”¨ï¼ˆéœ€è¦åŒ…å«å¤´æ–‡ä»¶ï¼‰ 1#import &lt;pthread.h&gt; å…·ä½“å®žçŽ°ä»£ç ï¼š 123456789//ä½¿ç”¨pthreadåˆ›å»ºçº¿ç¨‹å¯¹è±¡pthread_t thread;/*ç¬¬ä¸€ä¸ªå‚æ•°:çº¿ç¨‹å¯¹è±¡ç¬¬äºŒä¸ªå‚æ•°:çº¿ç¨‹å±žæ€§,NULLç¬¬ä¸‰ä¸ªå‚æ•°:æŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆç¬¬å››ä¸ªå‚æ•°:å‰ä¸€ä¸ªå‚æ•°()æ–¹æ³•ä¸­éœ€è¦æŽ¥å—çš„å‚æ•°*/pthread_create(&amp;thread, NULL, run, NULL); NSThreadç‰¹ç‚¹ï¼š ä½¿ç”¨æ›´åŠ é¢å‘å¯¹è±¡ ç®€å•æ˜“ç”¨ï¼Œå¯ç›´æŽ¥æ“ä½œçº¿ç¨‹å¯¹è±¡ ä½¿ç”¨éš¾åº¦ï¼š***ä½¿ç”¨è¯­è¨€ï¼šOCè¯­è¨€ä½¿ç”¨é¢‘çŽ‡ï¼šå¶å°”ä½¿ç”¨çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸï¼šç”±ç¨‹åºå‘˜è¿›è¡Œç®¡ç† åˆ›å»ºçº¿ç¨‹ç¬¬ä¸€ç§åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼ï¼šalloc init 123456789//ç‰¹ç‚¹ï¼šéœ€è¦æ‰‹åŠ¨å¼€å¯çº¿ç¨‹ï¼Œå¯ä»¥æ‹¿åˆ°çº¿ç¨‹å¯¹è±¡è¿›è¡Œè¯¦ç»†çš„è®¾ç½®/*ç¬¬ä¸€ä¸ªå‚æ•°ï¼šç›®æ ‡å¯¹è±¡ç¬¬äºŒä¸ªå‚æ•°ï¼šé€‰æ‹©å™¨ï¼Œçº¿ç¨‹å¯åŠ¨è¦è°ƒç”¨å“ªä¸ªæ–¹æ³•ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šå‰é¢æ–¹æ³•è¦æŽ¥æ”¶çš„å‚æ•°ï¼ˆæœ€å¤šåªèƒ½æŽ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œæ²¡æœ‰åˆ™ä¼ nilï¼‰*/NSThread *newThread = [[NSThread alloc] initWithTarget:self selector:@selector(run) object:nil];//å¯åŠ¨çº¿ç¨‹[newThread start]; ç¬¬äºŒç§åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼ï¼šåˆ†ç¦»å‡ºä¸€æ¡å­çº¿ç¨‹ 1234567//ç‰¹ç‚¹ï¼šä¸éœ€è¦æ‰‹åŠ¨å¼€å¯çº¿ç¨‹ï¼Œä¸å¯ä»¥å¯¹çº¿ç¨‹å¯¹è±¡è¿›è¡Œè¯¦ç»†çš„è®¾ç½®/* ç¬¬ä¸€ä¸ªå‚æ•°ï¼šé€‰æ‹©å™¨ï¼Œçº¿ç¨‹å¯åŠ¨è¦è°ƒç”¨å“ªä¸ªæ–¹æ³• ç¬¬äºŒä¸ªå‚æ•°ï¼šç›®æ ‡å¯¹è±¡ ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šå‰é¢æ–¹æ³•è¦æŽ¥æ”¶çš„å‚æ•°*/[NSThread detachNewThreadSelector:@selector(run) toTarget:self withObject:nil]; ç¬¬ä¸‰ç§åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼ï¼šåŽå°çº¿ç¨‹ 123456//ç‰¹ç‚¹ï¼šè‡ªåŠ¨å¯åŠ¨çº¿ç¨‹ï¼Œä¸èƒ½å¯¹çº¿ç¨‹å¯¹è±¡è¿›è¡Œè¯¦ç»†çš„è®¾ç½®/*ç¬¬ä¸€ä¸ªå‚æ•°ï¼šçº¿ç¨‹å¯åŠ¨åŽè°ƒç”¨çš„æ–¹æ³•ç¬¬äºŒä¸ªå‚æ•°ï¼šæ–¹æ³•æŽ¥æ”¶çš„å‚æ•°*/[self performSelectorInBackground:@selector(run) withObject:nil]; è®¾ç½®çº¿ç¨‹çš„å±žæ€§12345//è®¾ç½®çº¿ç¨‹çš„å±žæ€§//è®¾ç½®çº¿ç¨‹çš„åç§°thread.name = @"çº¿ç¨‹A";//è®¾ç½®çº¿ç¨‹çš„ä¼˜å…ˆçº§,æ³¨æ„çº¿ç¨‹ä¼˜å…ˆçº§çš„å–å€¼èŒƒå›´ä¸º0.0~1.0ä¹‹é—´ï¼Œ1.0è¡¨ç¤ºçº¿ç¨‹çš„ä¼˜å…ˆçº§æœ€é«˜,å¦‚æžœä¸è®¾ç½®è¯¥å€¼ï¼Œé‚£ä¹ˆç†æƒ³çŠ¶æ€ä¸‹é»˜è®¤ä¸º0.5thread.threadPriority = 1.0; çº¿ç¨‹çš„çŠ¶æ€çº¿ç¨‹çš„å„ç§çŠ¶æ€ï¼šæ–°å»º-å°±ç»ª-è¿è¡Œ-é˜»å¡ž-æ­»äº¡12345//å¸¸ç”¨çš„æŽ§åˆ¶çº¿ç¨‹çŠ¶æ€çš„æ–¹æ³•[NSThread exit];//é€€å‡ºå½“å‰çº¿ç¨‹[NSThread sleepForTimeInterval:2.0];//é˜»å¡žçº¿ç¨‹[NSThread sleepUntilDate:[NSDate dateWithTimeIntervalSinceNow:2.0]];//é˜»å¡žçº¿ç¨‹//æ³¨æ„ï¼šçº¿ç¨‹æ­»äº†ä¸èƒ½å¤ç”Ÿ çº¿ç¨‹å®‰å…¨å‰æï¼šå¤šä¸ªçº¿ç¨‹è®¿é—®åŒä¸€å—èµ„æºä¼šå‘ç”Ÿæ•°æ®å®‰å…¨é—®é¢˜è§£å†³æ–¹æ¡ˆï¼šåŠ äº’æ–¥é”ç›¸å…³ä»£ç ï¼š@synchronized(self){}ä¸“ä¸šæœ¯è¯­-çº¿ç¨‹åŒæ­¥åŽŸå­å’ŒéžåŽŸå­å±žæ€§ï¼ˆæ˜¯å¦å¯¹setteræ–¹æ³•åŠ é”ï¼‰ çº¿ç¨‹é—´é€šä¿¡123456789101112131415161718192021-(void)touchesBegan:(nonnull NSSet&lt;UITouch *&gt; *)touches withEvent:(nullable UIEvent *)event&#123; //å¼€å¯ä¸€æ¡å­çº¿ç¨‹æ¥ä¸‹è½½å›¾ç‰‡ [NSThread detachNewThreadSelector:@selector(downloadImage) toTarget:self withObject:nil];&#125;-(void)downloadImage&#123; //1.ç¡®å®šè¦ä¸‹è½½ç½‘ç»œå›¾ç‰‡çš„urlåœ°å€ï¼Œä¸€ä¸ªurlå”¯ä¸€å¯¹åº”ç€ç½‘ç»œä¸Šçš„ä¸€ä¸ªèµ„æº NSURL *url = [NSURL URLWithString:@"http://http://p2.wmpic.me/article/2016/03/17/1458205813_mEsdeUon.jpg"]; //2.æ ¹æ®urlåœ°å€ä¸‹è½½å›¾ç‰‡æ•°æ®åˆ°æœ¬åœ°ï¼ˆäºŒè¿›åˆ¶æ•°æ®ï¼‰ NSData *data = [NSData dataWithContentsOfURL:url]; //3.æŠŠä¸‹è½½åˆ°æœ¬åœ°çš„äºŒè¿›åˆ¶æ•°æ®è½¬æ¢æˆå›¾ç‰‡ UIImage *image = [UIImage imageWithData:data]; //4.å›žåˆ°ä¸»çº¿ç¨‹åˆ·æ–°UI //4.1 ç¬¬ä¸€ç§æ–¹å¼// [self performSelectorOnMainThread:@selector(showImage:) withObject:image waitUntilDone:YES]; //4.2 ç¬¬äºŒç§æ–¹å¼// [self.imageView performSelectorOnMainThread:@selector(setImage:) withObject:image waitUntilDone:YES]; //4.3 ç¬¬ä¸‰ç§æ–¹å¼ [self.imageView performSelector:@selector(setImage:) onThread:[NSThread mainThread] withObject:image waitUntilDone:YES];&#125; å¦‚ä½•è®¡ç®—ä»£ç æ®µçš„æ‰§è¡Œæ—¶é—´1234567891011//ç¬¬ä¸€ç§æ–¹æ³•NSDate *start = [NSDate date];//2.æ ¹æ®urlåœ°å€ä¸‹è½½å›¾ç‰‡æ•°æ®åˆ°æœ¬åœ°ï¼ˆäºŒè¿›åˆ¶æ•°æ®ï¼‰NSData *data = [NSData dataWithContentsOfURL:url];NSDate *end = [NSDate date];NSLog(@"ç¬¬äºŒæ­¥æ“ä½œèŠ±è´¹çš„æ—¶é—´ä¸º%f",[end timeIntervalSinceDate:start]);//ç¬¬äºŒç§æ–¹æ³•CFTimeInterval start = CFAbsoluteTimeGetCurrent();NSData *data = [NSData dataWithContentsOfURL:url];CFTimeInterval end = CFAbsoluteTimeGetCurrent();NSLog(@"ç¬¬äºŒæ­¥æ“ä½œèŠ±è´¹çš„æ—¶é—´ä¸º%f",end - start); GCDç‰¹ç‚¹ï¼š æ—¨åœ¨æ›¿ä»£NSThreadç­‰çº¿ç¨‹æŠ€æœ¯ å……åˆ†åˆ©ç”¨è®¾å¤‡çš„å¤šæ ¸ï¼ˆè‡ªåŠ¨ï¼‰ ä½¿ç”¨éš¾åº¦ï¼š**ä½¿ç”¨è¯­è¨€ï¼šCè¯­è¨€ä½¿ç”¨é¢‘çŽ‡ï¼šç»å¸¸ä½¿ç”¨çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸï¼šè‡ªåŠ¨ç®¡ç† GCDåŸºæœ¬ä½¿ç”¨å¼‚æ­¥å‡½æ•°+å¹¶å‘é˜Ÿåˆ—ï¼šå¼€å¯å¤šæ¡çº¿ç¨‹ï¼Œå¹¶å‘æ‰§è¡Œä»»åŠ¡å¼‚æ­¥å‡½æ•°+ä¸²è¡Œé˜Ÿåˆ—ï¼šå¼€å¯ä¸€æ¡çº¿ç¨‹ï¼Œä¸²è¡Œæ‰§è¡Œä»»åŠ¡åŒæ­¥å‡½æ•°+å¹¶å‘é˜Ÿåˆ—ï¼šä¸å¼€çº¿ç¨‹ï¼Œä¸²è¡Œæ‰§è¡Œä»»åŠ¡åŒæ­¥å‡½æ•°+ä¸²è¡Œé˜Ÿåˆ—ï¼šä¸å¼€çº¿ç¨‹ï¼Œä¸²è¡Œæ‰§è¡Œä»»åŠ¡å¼‚æ­¥å‡½æ•°+ä¸»é˜Ÿåˆ—ï¼šä¸å¼€çº¿ç¨‹ï¼Œåœ¨ä¸»çº¿ç¨‹ä¸­ä¸²è¡Œæ‰§è¡Œä»»åŠ¡åŒæ­¥å‡½æ•°+ä¸»é˜Ÿåˆ—ï¼šä¸å¼€çº¿ç¨‹ï¼Œä¸²è¡Œæ‰§è¡Œä»»åŠ¡ï¼ˆæ³¨æ„æ­»é”å‘ç”Ÿï¼‰ æ³¨æ„åŒæ­¥å‡½æ•°å’Œå¼‚æ­¥å‡½æ•°åœ¨æ‰§è¡Œé¡ºåºä¸Šé¢çš„å·®å¼‚ GCDçº¿ç¨‹é—´é€šä¿¡åˆ›å»ºä¸²è¡Œé˜Ÿåˆ—12345/*ç¬¬ä¸€ä¸ªå‚æ•°:Cè¯­è¨€çš„å­—ç¬¦ä¼ ,æ ‡ç­¾ç¬¬äºŒä¸ªå‚æ•°:é˜Ÿåˆ—çš„ç±»åž‹*/dispatch_queue_t queue2 = dispatch_queue_create(const char *label, DISPATCH_QUEUE_SERIAL); åˆ›å»ºå¹¶å‘é˜Ÿåˆ— 12345/*ç¬¬ä¸€ä¸ªå‚æ•°:Cè¯­è¨€çš„å­—ç¬¦ä¼ ,æ ‡ç­¾ç¬¬äºŒä¸ªå‚æ•°:é˜Ÿåˆ—çš„ç±»åž‹*/dispatch_queue_t queue2 = dispatch_queue_create(const char *label, DISPATCH_QUEUE_CONCURRENT); åˆ›å»ºå…¨å±€é˜Ÿåˆ— 123456789101112131415161718//0.èŽ·å–ä¸€ä¸ªå…¨å±€çš„é˜Ÿåˆ—dispatch_queue_t queue = dispatch_get_global_queue(0, 0);//1.å…ˆå¼€å¯ä¸€ä¸ªçº¿ç¨‹ï¼ŒæŠŠä¸‹è½½å›¾ç‰‡çš„æ“ä½œæ”¾åœ¨å­çº¿ç¨‹ä¸­å¤„ç†dispatch_async(queue, ^&#123; //2.ä¸‹è½½å›¾ç‰‡ NSURL *url = [NSURL URLWithString:@"http://p2.wmpic.me/article/2016/03/17/1458205813_mEsdeUon.jpg"]; NSData *data = [NSData dataWithContentsOfURL:url]; UIImage *image = [UIImage imageWithData:data]; NSLog(@"ä¸‹è½½æ“ä½œæ‰€åœ¨çš„çº¿ç¨‹--%@",[NSThread currentThread]); //3.å›žåˆ°ä¸»çº¿ç¨‹åˆ·æ–°UI dispatch_async(dispatch_get_main_queue(), ^&#123; self.imageView.image = image; //æ‰“å°æŸ¥çœ‹å½“å‰çº¿ç¨‹ NSLog(@"åˆ·æ–°UI---%@",[NSThread currentThread]); &#125;);&#125;); GCDå…¶å®ƒå¸¸ç”¨å‡½æ•°æ …æ å‡½æ•°ï¼ˆæŽ§åˆ¶ä»»åŠ¡çš„æ‰§è¡Œé¡ºåºï¼‰ 123dispatch_barrier_async(queue, ^&#123; NSLog(@"--dispatch_barrier_async-");&#125;); å»¶è¿Ÿæ‰§è¡Œï¼ˆå»¶è¿ŸÂ·æŽ§åˆ¶åœ¨å“ªä¸ªçº¿ç¨‹æ‰§è¡Œï¼‰ 123dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(2.0 * NSEC_PER_SEC)), dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; NSLog(@"---%@",[NSThread currentThread]);&#125;); ä¸€æ¬¡æ€§ä»£ç ï¼ˆæ³¨æ„ä¸èƒ½æ”¾åˆ°æ‡’åŠ è½½ï¼‰ 123456789-(void)once&#123; //æ•´ä¸ªç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­åªä¼šæ‰§è¡Œä¸€æ¬¡ //onceTokenç”¨æ¥è®°å½•è¯¥éƒ¨åˆ†çš„ä»£ç æ˜¯å¦è¢«æ‰§è¡Œè¿‡ static dispatch_once_t onceToken; dispatch_once(&amp;onceToken, ^&#123; NSLog(@"-----"); &#125;);&#125; å¿«é€Ÿè¿­ä»£ï¼ˆå¼€å¤šä¸ªçº¿ç¨‹å¹¶å‘å®Œæˆè¿­ä»£æ“ä½œï¼‰123dispatch_apply(subpaths.count, queue, ^(size_t index) &#123;&#125;); é˜Ÿåˆ—ç»„ï¼ˆåŒæ …æ å‡½æ•°ï¼‰ 123456//åˆ›å»ºé˜Ÿåˆ—ç»„ dispatch_group_t group = dispatch_group_create(); //é˜Ÿåˆ—ç»„ä¸­çš„ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ä¹‹åŽï¼Œæ‰§è¡Œè¯¥å‡½æ•° dispatch_group_notify(dispatch_group_t group, dispatch_queue_t queue, dispatch_block_t block); æ³¨æ„äº‹é¡¹ï¼šåœ¨iOS6.0ä¹‹å‰ï¼Œåœ¨GCDä¸­å‡¡æ˜¯ä½¿ç”¨äº†å¸¦Crearteå’Œretainçš„å‡½æ•°åœ¨æœ€åŽéƒ½éœ€è¦åšä¸€æ¬¡releaseæ“ä½œã€‚è€Œä¸»é˜Ÿåˆ—å’Œå…¨å±€å¹¶å‘é˜Ÿåˆ—ä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨releaseã€‚åœ¨iOS6.0ä¹‹åŽGCDå·²ç»è¢«çº³å…¥åˆ°äº†ARCçš„å†…å­˜ç®¡ç†èŒƒç•´ä¸­ï¼Œå³ä¾¿æ˜¯ä½¿ç”¨retainæˆ–è€…createå‡½æ•°åˆ›å»ºçš„å¯¹è±¡ä¹Ÿä¸å†éœ€è¦å¼€å‘äººå‘˜æ‰‹åŠ¨é‡Šæ”¾ï¼Œæˆ‘ä»¬åƒå¯¹å¾…æ™®é€šOCå¯¹è±¡ä¸€æ ·å¯¹å¾…GCDå°±OKã€‚ åœ¨ä½¿ç”¨æ …æ å‡½æ•°çš„æ—¶å€™ï¼Œè‹¹æžœå®˜æ–¹æ˜Žç¡®è§„å®šæ …æ å‡½æ•°åªæœ‰åœ¨å’Œä½¿ç”¨createå‡½æ•°è‡ªå·±çš„åˆ›å»ºçš„å¹¶å‘é˜Ÿåˆ—ä¸€èµ·ä½¿ç”¨çš„æ—¶å€™æ‰æœ‰æ•ˆ NSOperationç‰¹ç‚¹ï¼š åŸºäºŽGCDï¼ˆåº•å±‚æ˜¯GCDï¼‰ æ¯”GCDå¤šäº†ä¸€äº›æ›´ç®€å•å®žç”¨çš„åŠŸèƒ½ ä½¿ç”¨æ›´åŠ é¢å‘å¯¹è±¡ ä½¿ç”¨éš¾åº¦ï¼š**ä½¿ç”¨è¯­è¨€ï¼šOCè¯­è¨€ä½¿ç”¨é¢‘çŽ‡ï¼šç»å¸¸ä½¿ç”¨çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸï¼šè‡ªåŠ¨ç®¡ç† NSOperationæ˜¯å¯¹GCDçš„åŒ…è£…ï¼Œå…¶æœ¬èº«æ˜¯åªæ˜¯æŠ½è±¡ç±»ï¼Œåªæœ‰å®ƒçš„å­ç±»ï¼ˆä¸‰ä¸ªå­ç±»åˆ†åˆ«æ˜¯ï¼šNSBlockOperationã€NSInvocationOperationä»¥åŠè‡ªå®šä¹‰ç»§æ‰¿è‡ªNSOperationçš„ç±»ï¼‰æ‰èƒ½åˆ›å»ºå¯¹è±¡ NSInvocationOperation123456789//1.å°è£…æ“ä½œ/*ç¬¬ä¸€ä¸ªå‚æ•°ï¼šç›®æ ‡å¯¹è±¡ç¬¬äºŒä¸ªå‚æ•°ï¼šè¯¥æ“ä½œè¦è°ƒç”¨çš„æ–¹æ³•ï¼Œæœ€å¤šæŽ¥å—ä¸€ä¸ªå‚æ•°ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šè°ƒç”¨æ–¹æ³•ä¼ é€’çš„å‚æ•°ï¼Œå¦‚æžœæ–¹æ³•ä¸æŽ¥å—å‚æ•°ï¼Œé‚£ä¹ˆè¯¥å€¼ä¼ nil*/NSInvocationOperation *operation = [[NSInvocationOperation alloc]initWithTarget:self selector:@selector(run) object:nil];//2.å¯åŠ¨æ“ä½œ[operation start]; NSBlockOperation1234567891011121314151617//1.å°è£…æ“ä½œ/* NSBlockOperationæä¾›äº†ä¸€ä¸ªç±»æ–¹æ³•ï¼Œåœ¨è¯¥ç±»æ–¹æ³•ä¸­å°è£…æ“ä½œ*/NSBlockOperation *operation = [NSBlockOperation blockOperationWithBlock:^&#123; //åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œ NSLog(@"---download1--%@",[NSThread currentThread]);&#125;];//2.è¿½åŠ æ“ä½œï¼Œè¿½åŠ çš„æ“ä½œåœ¨å­çº¿ç¨‹ä¸­æ‰§è¡Œ[operation addExecutionBlock:^&#123; NSLog(@"---download2--%@",[NSThread currentThread]);&#125;];[operation addExecutionBlock:^&#123; NSLog(@"---download3--%@",[NSThread currentThread]);&#125;];//3.å¯åŠ¨æ‰§è¡Œæ“ä½œ[operation start]; è‡ªå®šä¹‰NSOperation1234567891011//å¦‚ä½•å°è£…æ“ä½œï¼Ÿ//è‡ªå®šä¹‰çš„NSOperation,é€šè¿‡é‡å†™å†…éƒ¨çš„mainæ–¹æ³•å®žçŽ°å°è£…æ“ä½œ-(void)main&#123; NSLog(@"--main--%@",[NSThread currentThread]);&#125;//å¦‚ä½•ä½¿ç”¨ï¼Ÿ//1.å®žä¾‹åŒ–ä¸€ä¸ªè‡ªå®šä¹‰æ“ä½œå¯¹è±¡TYOperation *op = [[TYOperation alloc]init];//2.æ‰§è¡Œæ“ä½œ[op start]; NSOperationQueueNSOperationä¸­çš„ä¸¤ç§é˜Ÿåˆ— ä¸»é˜Ÿåˆ— é€šè¿‡mainQueueèŽ·å¾—ï¼Œå‡¡æ˜¯æ”¾åˆ°ä¸»é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡éƒ½å°†åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œ éžä¸»é˜Ÿåˆ— ç›´æŽ¥alloc initå‡ºæ¥çš„é˜Ÿåˆ—ã€‚éžä¸»é˜Ÿåˆ—åŒæ—¶å…·å¤‡äº†å¹¶å‘å’Œä¸²è¡Œçš„åŠŸèƒ½ï¼Œé€šè¿‡è®¾ç½®æœ€å¤§å¹¶å‘æ•°å±žæ€§æ¥æŽ§åˆ¶ä»»åŠ¡æ˜¯å¹¶å‘æ‰§è¡Œè¿˜æ˜¯ä¸²è¡Œæ‰§è¡Œ NSInvocationOperation123456789101112131415161718192021- (void)invocation&#123; /* GCDä¸­çš„é˜Ÿåˆ—ï¼š ä¸²è¡Œé˜Ÿåˆ—ï¼šè‡ªå·±åˆ›å»ºçš„ï¼Œä¸»é˜Ÿåˆ— å¹¶å‘é˜Ÿåˆ—ï¼šè‡ªå·±åˆ›å»ºçš„ï¼Œå…¨å±€å¹¶å‘é˜Ÿåˆ— NSOperationQueue ä¸»é˜Ÿåˆ—ï¼š[NSOperationQueue mainqueue];å‡¡äº‹æ”¾åœ¨ä¸»é˜Ÿåˆ—ä¸­çš„æ“ä½œéƒ½åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œ éžä¸»é˜Ÿåˆ—ï¼š[[NSOperationQueue alloc]init]ï¼Œå¹¶å‘å’Œä¸²è¡Œï¼Œé»˜è®¤æ˜¯å¹¶å‘æ‰§è¡Œçš„ */ //1.åˆ›å»ºé˜Ÿåˆ— NSOperationQueue *queue = [[NSOperationQueue alloc]init]; //2.å°è£…æ“ä½œ NSInvocationOperation *op1 = [[NSInvocationOperation alloc]initWithTarget:self selector:@selector(download1) object:nil]; NSInvocationOperation *op2 = [[NSInvocationOperation alloc]initWithTarget:self selector:@selector(download2) object:nil]; NSInvocationOperation *op3 = [[NSInvocationOperation alloc]initWithTarget:self selector:@selector(download3) object:nil]; //3.æŠŠå°è£…å¥½çš„æ“ä½œæ·»åŠ åˆ°é˜Ÿåˆ—ä¸­ [queue addOperation:op1]; [queue addOperation:op2]; [queue addOperation:op3];&#125; NSBlockOperation12345678910111213141516171819202122232425- (void)freeBlock&#123; //1.åˆ›å»ºé˜Ÿåˆ— NSOperationQueue *queue = [[NSOperationQueue alloc]init]; //2.å°è£…æ“ä½œ NSBlockOperation *op1 = [NSBlockOperation blockOperationWithBlock:^&#123; NSLog(@"1----%@",[NSThread currentThread]); &#125;]; NSBlockOperation *op2 = [NSBlockOperation blockOperationWithBlock:^&#123; NSLog(@"2----%@",[NSThread currentThread]); &#125;]; [op2 addExecutionBlock:^&#123; NSLog(@"3----%@",[NSThread currentThread]); &#125;]; [op2 addExecutionBlock:^&#123; NSLog(@"4----%@",[NSThread currentThread]); &#125;]; //3.æ·»åŠ æ“ä½œåˆ°é˜Ÿåˆ—ä¸­ [queue addOperation:op1]; [queue addOperation:op2] //è¡¥å……ï¼šç®€ä¾¿æ–¹æ³• [queue addOperationWithBlock:^&#123; NSLog(@"5----%@",[NSThread currentThread]); &#125;];&#125; è‡ªå®šä¹‰NSOperation12345678910111213-(void)freeOperation&#123;//1.åˆ›å»ºé˜Ÿåˆ—NSOperationQueue *queue = [[NSOperationQueue alloc]init];//2.å°è£…æ“ä½œ//å¥½å¤„ï¼š1.ä¿¡æ¯éšè”½// 2.ä»£ç å¤ç”¨TYOperation *op1 = [[TYOperation alloc]init];TYOperation *op2 = [[TYOperation alloc]init];//3.æ·»åŠ æ“ä½œåˆ°é˜Ÿåˆ—ä¸­[queue addOperation:op1];[queue addOperation:op2];&#125; NSOperationå…¶å®ƒç”¨æ³•è®¾ç½®æœ€å¤§å¹¶å‘æ•°[æœ€å¤§å¹¶å‘æ•°å…³ç³»ç€é˜Ÿåˆ—æ˜¯ä¸²è¡Œè¿˜æ˜¯å¹¶è¡Œ]åˆ›å»ºé˜Ÿåˆ— 1NSOperationQueue *queue = [[NSOperationQueue alloc]init]; è®¾ç½®æœ€å¤§å¹¶å‘æ•° è¯¥å±žæ€§éœ€è¦åœ¨ä»»åŠ¡æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­ä¹‹å‰è¿›è¡Œè®¾ç½® è¯¥å±žæ€§æŽ§åˆ¶é˜Ÿåˆ—æ˜¯ä¸²è¡Œæ‰§è¡Œè¿˜æ˜¯å¹¶å‘æ‰§è¡Œ å¦‚æžœæœ€å¤§å¹¶å‘æ•°ç­‰äºŽ1ï¼Œé‚£ä¹ˆè¯¥é˜Ÿåˆ—æ˜¯ä¸²è¡Œçš„ï¼Œå¦‚æžœå¤§äºŽ1é‚£ä¹ˆæ˜¯å¹¶è¡Œçš„4.ç³»ç»Ÿçš„æœ€å¤§å¹¶å‘æ•°æœ‰ä¸ªé»˜è®¤çš„å€¼ï¼Œä¸º-1ï¼Œå¦‚æžœè¯¥å±žæ€§è®¾ç½®ä¸º0ï¼Œé‚£ä¹ˆä¸ä¼šæ‰§è¡Œä»»ä½•ä»»åŠ¡ 1queue.maxConcurrentOperationCount = 2; æš‚åœå’Œæ¢å¤ä»¥åŠå–æ¶ˆ12345678910111213141516171819202122232425262728293031323334//è®¾ç½®æš‚åœå’Œæ¢å¤//suspendedè®¾ç½®ä¸ºYESè¡¨ç¤ºæš‚åœï¼Œsuspendedè®¾ç½®ä¸ºNOè¡¨ç¤ºæ¢å¤//æš‚åœè¡¨ç¤ºä¸ç»§ç»­æ‰§è¡Œé˜Ÿåˆ—ä¸­çš„ä¸‹ä¸€ä¸ªä»»åŠ¡ï¼Œæš‚åœæ“ä½œæ˜¯å¯ä»¥æ¢å¤çš„if (self.queue.isSuspended) &#123; self.queue.suspended = NO;&#125;else&#123; self.queue.suspended = YES;&#125;//å–æ¶ˆé˜Ÿåˆ—é‡Œé¢çš„æ‰€æœ‰æ“ä½œ//å–æ¶ˆä¹‹åŽï¼Œå½“å‰æ­£åœ¨æ‰§è¡Œçš„æ“ä½œçš„ä¸‹ä¸€ä¸ªæ“ä½œå°†ä¸å†æ‰§è¡Œï¼Œè€Œä¸”æ°¸è¿œéƒ½ä¸åœ¨æ‰§è¡Œï¼Œå°±åƒåŽé¢çš„æ‰€æœ‰ä»»åŠ¡éƒ½ä»Žé˜Ÿåˆ—é‡Œé¢ç§»é™¤äº†ä¸€æ ·//å–æ¶ˆæ“ä½œæ˜¯ä¸å¯ä»¥æ¢å¤çš„[self.queue cancelAllOperations];---------è‡ªå®šä¹‰NSOperationå–æ¶ˆæ“ä½œ---------------------------(void)main&#123; //è€—æ—¶æ“ä½œ1 for (int i = 0; i&lt;1000; i++) &#123; NSLog(@"ä»»åŠ¡1-%d--%@",i,[NSThread currentThread]); &#125; NSLog(@"+++++++++++++++++++++++++++++++++"); //è‹¹æžœå®˜æ–¹å»ºè®®ï¼Œæ¯å½“æ‰§è¡Œå®Œä¸€æ¬¡è€—æ—¶æ“ä½œä¹‹åŽï¼Œå°±æŸ¥çœ‹ä¸€ä¸‹å½“å‰é˜Ÿåˆ—æ˜¯å¦ä¸ºå–æ¶ˆçŠ¶æ€ï¼Œå¦‚æžœæ˜¯ï¼Œé‚£ä¹ˆå°±ç›´æŽ¥é€€å‡º //å¥½å¤„æ˜¯å¯ä»¥æé«˜ç¨‹åºçš„æ€§èƒ½ if (self.isCancelled) &#123; return; &#125; //è€—æ—¶æ“ä½œ2 for (int i = 0; i&lt;1000; i++) &#123; NSLog(@"ä»»åŠ¡1-%d--%@",i,[NSThread currentThread]); &#125; NSLog(@"+++++++++++++++++++++++++++++++++");&#125; NSOperationå®žçŽ°çº¿ç¨‹é—´é€šä¿¡å¼€å­çº¿ç¨‹ä¸‹è½½å›¾ç‰‡12345678910111213141516//1.åˆ›å»ºé˜Ÿåˆ—NSOperationQueue *queue = [[NSOperationQueue alloc]init];//2.ä½¿ç”¨ç®€ä¾¿æ–¹æ³•å°è£…æ“ä½œå¹¶æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­[queue addOperationWithBlock:^&#123; //3.åœ¨è¯¥blockä¸­ä¸‹è½½å›¾ç‰‡ NSURL *url = [NSURL URLWithString:@"http://p2.wmpic.me/article/2016/03/17/1458205813_mEsdeUon.jpg"]; NSData *data = [NSData dataWithContentsOfURL:url]; UIImage *image = [UIImage imageWithData:data]; NSLog(@"ä¸‹è½½å›¾ç‰‡æ“ä½œ--%@",[NSThread currentThread]); //4.å›žåˆ°ä¸»çº¿ç¨‹åˆ·æ–°UI [[NSOperationQueue mainQueue] addOperationWithBlock:^&#123; self.imageView.image = image; NSLog(@"åˆ·æ–°UIæ“ä½œ---%@",[NSThread currentThread]); &#125;];&#125;]; ä¸‹è½½å¤šå¼ å›¾ç‰‡åˆæˆç»¼åˆæ¡ˆä¾‹ï¼ˆè®¾ç½®æ“ä½œä¾èµ–ï¼‰12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455- (void)download&#123; //1.åˆ›å»ºé˜Ÿåˆ— NSOperationQueue *queue = [[NSOperationQueue alloc]init]; //2.å°è£…æ“ä½œä¸‹è½½å›¾ç‰‡1 NSBlockOperation *op1 = [NSBlockOperation blockOperationWithBlock:^&#123; NSURL *url = [NSURL URLWithString:@"http://p2.wmpic.me/article/2016/03/14/1457926891_nZGraHTj.jpg"]; NSData *data = [NSData dataWithContentsOfURL:url]; //æ‹¿åˆ°å›¾ç‰‡æ•°æ® self.image1 = [UIImage imageWithData:data]; &#125;]; //3.å°è£…æ“ä½œä¸‹è½½å›¾ç‰‡2 NSBlockOperation *op2 = [NSBlockOperation blockOperationWithBlock:^&#123; NSURL *url = [NSURL URLWithString:@"http://p3.wmpic.me/article/2016/01/08/1452222281_PmFnXZHU.jpg"]; NSData *data = [NSData dataWithContentsOfURL:url]; //æ‹¿åˆ°å›¾ç‰‡æ•°æ® self.image2 = [UIImage imageWithData:data]; &#125;]; //4.åˆæˆå›¾ç‰‡ NSBlockOperation *combine = [NSBlockOperation blockOperationWithBlock:^&#123; //4.1 å¼€å¯å›¾å½¢ä¸Šä¸‹æ–‡ UIGraphicsBeginImageContext(CGSizeMake(200, 200)); //4.2 ç”»ç¬¬ä¸€å¹…å›¾ [self.image1 drawInRect:CGRectMake(0, 0, 200, 100)]; //4.3 ç”»ç¬¬äºŒå¹…å›¾ [self.image2 drawInRect:CGRectMake(0, 100, 200, 100)]; //4.4 æ ¹æ®å›¾å½¢ä¸Šä¸‹æ–‡æ‹¿åˆ°å›¾ç‰‡æ•°æ® UIImage *image = UIGraphicsGetImageFromCurrentImageContext(); //NSLog(@"%@",image); //4.5 å…³é—­å›¾å½¢ä¸Šä¸‹æ–‡ UIGraphicsEndImageContext(); //7.å›žåˆ°ä¸»çº¿ç¨‹åˆ·æ–°UI [[NSOperationQueue mainQueue]addOperationWithBlock:^&#123; self.imageView.image = image; NSLog(@"åˆ·æ–°UI---%@",[NSThread currentThread]); &#125;]; &#125;]; //5.è®¾ç½®æ“ä½œä¾èµ– [combine addDependency:op1]; [combine addDependency:op2]; //6.æ·»åŠ æ“ä½œåˆ°é˜Ÿåˆ—ä¸­æ‰§è¡Œ [queue addOperation:op1]; [queue addOperation:op2]; [queue addOperation:combine]; &#125; å•ä¾‹è®¾è®¡æ¨¡å¼ iOSå¼€å‘å¤šç§è®¾è®¡æ¨¡å¼ä¹‹ä¸€â€”-å•ä¾‹æ¨¡å¼ ä»€ä¹ˆæ˜¯å•ä¾‹åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ï¼Œä¸€ä¸ªç±»æœ‰ä¸”åªæœ‰ä¸€ä¸ªå®žä¾‹å¯¹è±¡ ä½¿ç”¨åœºåˆåœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­ï¼Œå…±äº«ä¸€ä»½èµ„æºï¼ˆè¿™ä»½èµ„æºåªéœ€è¦åˆ›å»ºåˆå§‹åŒ–1æ¬¡ï¼‰ åœ¨ä¸åŒçš„å†…å­˜ç®¡ç†æœºåˆ¶ä¸‹å®žçŽ°å•ä¾‹:ARCå®žçŽ°å•ä¾‹æ­¥éª¤: åœ¨ç±»çš„å†…éƒ¨æä¾›ä¸€ä¸ªstaticä¿®é¥°çš„å…¨å±€å˜é‡ æä¾›ä¸€ä¸ªç±»æ–¹æ³•ï¼Œæ–¹ä¾¿å¤–ç•Œè®¿é—® é‡å†™+allocWithZoneæ–¹æ³•ï¼Œä¿è¯æ°¸è¿œéƒ½åªä¸ºå•ä¾‹å¯¹è±¡åˆ†é…ä¸€æ¬¡å†…å­˜ç©ºé—´ ä¸¥è°¨èµ·è§ï¼Œé‡å†™-copyWithZoneæ–¹æ³•å’Œ-MutableCopyWithZoneæ–¹æ³• ä»£ç å®žçŽ°: 1234567891011121314151617181920212223242526272829303132333435363738//æä¾›ä¸€ä¸ªstaticä¿®é¥°çš„å…¨å±€å˜é‡ï¼Œå¼ºå¼•ç”¨ç€å·²ç»å®žä¾‹åŒ–çš„å•ä¾‹å¯¹è±¡å®žä¾‹static TYSingleTools *_instance;//ç±»æ–¹æ³•ï¼Œè¿”å›žä¸€ä¸ªå•ä¾‹å¯¹è±¡+(instancetype)shareTools&#123; //æ³¨æ„ï¼šè¿™é‡Œå»ºè®®ä½¿ç”¨self,è€Œä¸æ˜¯ç›´æŽ¥ä½¿ç”¨ç±»åToolsï¼ˆè€ƒè™‘ç»§æ‰¿ï¼‰ return [[self alloc]init];&#125;//ä¿è¯æ°¸è¿œåªåˆ†é…ä¸€æ¬¡å­˜å‚¨ç©ºé—´+(instancetype)allocWithZone:(struct _NSZone *)zone&#123; //ç¬¬ä¸€ç§ï¼šä½¿ç”¨GCDä¸­çš„ä¸€æ¬¡æ€§ä»£ç // static dispatch_once_t onceToken;// dispatch_once(&amp;onceToken, ^&#123;// _instance = [super allocWithZone:zone];// &#125;); //ç¬¬äºŒç§ï¼šä½¿ç”¨åŠ é”çš„æ–¹å¼ï¼Œä¿è¯åªåˆ†é…ä¸€æ¬¡å­˜å‚¨ç©ºé—´ @synchronized(self) &#123; if (_instance == nil) &#123; _instance = [super allocWithZone:zone]; &#125; &#125; return _instance;&#125;/*1.mutableCopy åˆ›å»ºä¸€ä¸ªæ–°çš„å¯å˜å¯¹è±¡ï¼Œå¹¶åˆå§‹åŒ–ä¸ºåŽŸå¯¹è±¡çš„å€¼ï¼Œæ–°å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ä¸º 1ï¼›2.copy è¿”å›žä¸€ä¸ªä¸å¯å˜å¯¹è±¡ã€‚åˆ†ä¸¤ç§æƒ…å†µï¼šï¼ˆ1ï¼‰è‹¥åŽŸå¯¹è±¡æ˜¯ä¸å¯å˜å¯¹è±¡ï¼Œé‚£ä¹ˆè¿”å›žåŽŸå¯¹è±¡ï¼Œå¹¶å°†å…¶å¼•ç”¨è®¡æ•°åŠ  1 ï¼›ï¼ˆ2ï¼‰è‹¥åŽŸå¯¹è±¡æ˜¯å¯å˜å¯¹è±¡ï¼Œé‚£ä¹ˆåˆ›å»ºä¸€ä¸ªæ–°çš„ä¸å¯å˜å¯¹è±¡ï¼Œå¹¶åˆå§‹åŒ–ä¸ºåŽŸå¯¹è±¡çš„å€¼ï¼Œæ–°å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ä¸º 1ã€‚*///è®©ä»£ç æ›´åŠ çš„ä¸¥è°¨-(nonnull id)copyWithZone:(nullable NSZone *)zone&#123;// return [[self class] allocWithZone:zone]; return _instance;&#125;-(nonnull id)mutableCopyWithZone:(nullable NSZone *)zone&#123; return _instance;&#125; MRCå®žçŽ°å•ä¾‹æ­¥éª¤: åœ¨ç±»çš„å†…éƒ¨æä¾›ä¸€ä¸ªstaticä¿®é¥°çš„å…¨å±€å˜é‡ æä¾›ä¸€ä¸ªç±»æ–¹æ³•ï¼Œæ–¹ä¾¿å¤–ç•Œè®¿é—® é‡å†™+allocWithZoneæ–¹æ³•ï¼Œä¿è¯æ°¸è¿œéƒ½åªä¸ºå•ä¾‹å¯¹è±¡åˆ†é…ä¸€æ¬¡å†…å­˜ç©ºé—´ ä¸¥è°¨èµ·è§ï¼Œé‡å†™-copyWithZoneæ–¹æ³•å’Œ-MutableCopyWithZoneæ–¹æ³• é‡å†™releaseå’Œretainæ–¹æ³• å»ºè®®åœ¨retainCountæ–¹æ³•ä¸­è¿”å›žä¸€ä¸ªæœ€å¤§å€¼ï¼ˆæœ‰ç»éªŒçš„ç¨‹åºå‘˜é€šè¿‡æ‰“å°retainCountè¿™ä¸ªå€¼å¯ä»¥çŒœåˆ°è¿™æ˜¯ä¸€ä¸ªå•ä¾‹ï¼‰ é…ç½®MRCçŽ¯å¢ƒçŸ¥è¯†: æ³¨æ„ARCä¸æ˜¯åžƒåœ¾å›žæ”¶æœºåˆ¶ï¼Œæ˜¯ç¼–è¯‘å™¨ç‰¹æ€§ é…ç½®MRCçŽ¯å¢ƒï¼šbuild setting -&gt;æœç´¢automatic ref-&gt;ä¿®æ”¹ä¸ºNO ä»£ç å®žçŽ°: 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748//æä¾›ä¸€ä¸ªstaticä¿®é¥°çš„å…¨å±€å˜é‡ï¼Œå¼ºå¼•ç”¨ç€å·²ç»å®žä¾‹åŒ–çš„å•ä¾‹å¯¹è±¡å®žä¾‹static TYSingleTools *_instance;//ç±»æ–¹æ³•ï¼Œè¿”å›žä¸€ä¸ªå•ä¾‹å¯¹è±¡+(instancetype)shareTools&#123; //æ³¨æ„ï¼šè¿™é‡Œå»ºè®®ä½¿ç”¨self,è€Œä¸æ˜¯ç›´æŽ¥ä½¿ç”¨ç±»åToolsï¼ˆè€ƒè™‘ç»§æ‰¿ï¼‰ return [[self alloc]init];&#125;//ä¿è¯æ°¸è¿œåªåˆ†é…ä¸€æ¬¡å­˜å‚¨ç©ºé—´+(instancetype)allocWithZone:(struct _NSZone *)zone&#123; //ä½¿ç”¨GCDä¸­çš„ä¸€æ¬¡æ€§ä»£ç // static dispatch_once_t onceToken;// dispatch_once(&amp;onceToken, ^&#123;// _instance = [super allocWithZone:zone];// &#125;); //ä½¿ç”¨åŠ é”çš„æ–¹å¼ï¼Œä¿è¯åªåˆ†é…ä¸€æ¬¡å­˜å‚¨ç©ºé—´ @synchronized(self) &#123; if (_instance == nil) &#123; _instance = [super allocWithZone:zone]; &#125; &#125; return _instance;&#125;//è®©ä»£ç æ›´åŠ çš„ä¸¥è°¨-(nonnull id)copyWithZone:(nullable NSZone *)zone&#123;// return [[self class] allocWithZone:zone]; return _instance;&#125;-(nonnull id)mutableCopyWithZone:(nullable NSZone *)zone&#123; return _instance;&#125;//åœ¨MRCçŽ¯å¢ƒä¸‹ï¼Œå¦‚æžœç”¨æˆ·retainäº†ä¸€æ¬¡ï¼Œé‚£ä¹ˆç›´æŽ¥è¿”å›žinstanceå˜é‡ï¼Œä¸å¯¹å¼•ç”¨è®¡æ•°å™¨+1//å¦‚æžœç”¨æˆ·releaseäº†ä¸€æ¬¡ï¼Œé‚£ä¹ˆä»€ä¹ˆéƒ½ä¸åšï¼Œå› ä¸ºå•ä¾‹æ¨¡å¼åœ¨æ•´ä¸ªç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­éƒ½æ‹¥æœ‰ä¸”åªæœ‰ä¸€ä»½ï¼Œç¨‹åºé€€å‡ºä¹‹åŽè¢«é‡Šæ”¾ï¼Œæ‰€ä»¥ä¸éœ€è¦å¯¹å¼•ç”¨è®¡æ•°å™¨æ“ä½œ-(oneway void)release&#123;&#125;-(instancetype)retain&#123; return _instance;&#125;//æƒ¯ç”¨æ³•ï¼Œæœ‰ç»éªŒçš„ç¨‹åºå‘˜é€šè¿‡æ‰“å°retainCountè¿™ä¸ªå€¼å¯ä»¥çŒœåˆ°è¿™æ˜¯ä¸€ä¸ªå•ä¾‹-(NSUInteger)retainCount&#123; return MAXFLOAT;&#125; å¿½ç•¥ARCå’ŒMRCçš„å•ä¾‹é€šç”¨ç‰ˆæœ¬å¯ä»¥ä½¿ç”¨æ¡ä»¶ç¼–è¯‘æ¥åˆ¤æ–­å½“å‰é¡¹ç›®çŽ¯å¢ƒæ˜¯ARCè¿˜æ˜¯MRCï¼Œä»Žè€Œå®žçŽ°ä¸€ä»½ä»£ç åœ¨ä¸åŒçš„å†…å­˜ç®¡ç†æœºåˆ¶ä¸‹éƒ½å¯ä»¥å®žçŽ°å•ä¾‹ã€‚123456æ¡ä»¶ç¼–è¯‘:#if __has_feature(objc_arc)//å¦‚æžœæ˜¯ARCï¼Œé‚£ä¹ˆå°±æ‰§è¡Œè¿™é‡Œçš„ä»£ç 1#else//å¦‚æžœä¸æ˜¯ARCï¼Œé‚£ä¹ˆå°±æ‰§è¡Œä»£ç†çš„ä»£ç 2#endif æ³¨æ„ï¼šå•ä¾‹æ˜¯ä¸å¯ä»¥ç”¨ç»§æ‰¿çš„ã€‚ å‚è€ƒèµ„æ–™ GCDAPI:https://developer.apple.com/library/ios/documentation/Performance/Reference/GCD_libdispatch_Ref/index.html#//apple_ref/c/func/dispatch_queue_create Libdispatchç‰ˆæœ¬æºç ï¼šhttp://www.opensource.apple.com/source/libdispatch/libdispatch-187.5/]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Macæ­å»ºhexo + githubåšå®¢]]></title>
    <url>%2F2015%2F09%2F01%2FMac%E6%90%AD%E5%BB%BAhexo%20%2B%20githu%E5%8D%9A%E5%AE%A2%2F</url>
    <content type="text"><![CDATA[çŽ¯å¢ƒé…ç½®1. node.jsç”¨æ¥ç”Ÿæˆé™æ€é¡µé¢.Macä¸­è‡ªå¸¦äº†node.js.ä¸‹è½½åœ°å€ 2.Gitç”¨æ¥å°†æœ¬åœ°Hexoå†…å®¹æäº¤åˆ°Githubä¸Šã€‚Xcodeè‡ªå¸¦Gitï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚å¦‚æžœæ²¡æœ‰Xcodeå¯ä»¥å‚è€ƒHexoå®˜ç½‘ä¸Šçš„å®‰è£…æ–¹æ³•ã€‚ æ­å»ºæ­¥éª¤ä¸€èˆ¬æ­å»ºæ–¹æ³• å¾…ç»­â€¦ ä¼˜åŒ–æ­å»ºæ–¹æ³•(å…¨éƒ¨å­˜æ”¾äºŽgitHubä¸­,åŒ…æ‹¬Hexoæºæ–‡ä»¶å’Œç”Ÿæˆçš„é™æ€é¡µé¢æ–‡ä»¶) æ¦‚è¿°:Hexoéƒ¨ç½²åˆ°GitHubä¸Šçš„æ–‡ä»¶ï¼Œæ˜¯.mdï¼ˆä½ çš„åšæ–‡ï¼‰è½¬åŒ–ä¹‹åŽçš„.htmlï¼ˆé™æ€ç½‘é¡µï¼‰ã€‚å› æ­¤ï¼Œå½“ä½ é‡è£…ç”µè„‘æˆ–è€…æƒ³åœ¨ä¸åŒç”µè„‘ä¸Šä¿®æ”¹åšå®¢æ—¶ï¼Œå°±ä¸å¯èƒ½äº†ã€‚å¦‚æžœæˆ‘ä»¬å°†Hexoç”Ÿæˆçš„ç½‘ç«™æ–‡ä»¶å­˜æ”¾åˆ°GitHubä¸Šè¿›è¡Œç®¡ç†çš„ã€‚è¿™æ ·ï¼Œä¸ä»…è§£å†³äº†ä¸Šè¿°çš„é—®é¢˜ï¼Œè¿˜å¯ä»¥é€šè¿‡gitçš„ç‰ˆæœ¬æŽ§åˆ¶è¿½è¸ªä½ çš„åšæ–‡çš„ä¿®æ”¹è¿‡ç¨‹ã€‚æˆ‘ä»¬éœ€è¦æœ‰ä¸¤ä¸ªåˆ†æ”¯ï¼Œä¸€ä¸ªç”¨æ¥å­˜æ”¾Hexoç½‘ç«™çš„æ–‡ä»¶ï¼Œä¸€ä¸ªç”¨æ¥å‘å¸ƒç½‘ç«™ã€‚ æ­å»ºæµç¨‹ åˆ›å»ºä»“åº“ï¼ŒFlametinary.github.ioï¼› åˆ›å»ºä¸¤ä¸ªåˆ†æ”¯ï¼šmaster ä¸Ž hexoï¼› è®¾ç½®hexoä¸ºé»˜è®¤åˆ†æ”¯ï¼ˆæˆ‘ä»¬åªéœ€è¦æ‰‹åŠ¨ç®¡ç†è¿™ä¸ªåˆ†æ”¯ä¸Šçš„Hexoç½‘ç«™æ–‡ä»¶ï¼‰ï¼› ä½¿ç”¨git clone git@github.com:FlameTinary/FlameTinary.github.io.gitæ‹·è´ä»“åº“ï¼› åœ¨æœ¬åœ°Flametinary.github.ioæ–‡ä»¶å¤¹ä¸‹é€šè¿‡Git bashä¾æ¬¡æ‰§è¡Œnpm install -g hexo-cliã€hexo initã€npm install å’Œ npm install hexo-deployer-gitï¼ˆæ­¤æ—¶å½“å‰åˆ†æ”¯åº”æ˜¾ç¤ºä¸ºhexoï¼‰; ä¿®æ”¹_config.ymlä¸­çš„deployå‚æ•°ï¼Œåˆ†æ”¯åº”ä¸ºmasterï¼› ä¾æ¬¡æ‰§è¡Œgit add .ã€git commit -m â€œâ€¦â€ã€git push origin hexoæäº¤ç½‘ç«™ç›¸å…³çš„æ–‡ä»¶ï¼› æ‰§è¡Œhexo generate -dç”Ÿæˆç½‘ç«™å¹¶éƒ¨ç½²åˆ°GitHubä¸Šã€‚ ç›¸å…³é—®é¢˜è§£å†³ åœ¨å°†hexoæºæ–‡ä»¶æäº¤åˆ°gitçš„hexoç›®å½•ä¸­å‡ºçŽ°modified: themes/nextçš„é—®é¢˜. åŽŸå› : ç”±äºŽnextä¸»é¢˜æ˜¯å­˜æ”¾äºŽGitHubä¸­çš„,å› æ­¤åœ¨å°†nextä¸»é¢˜cloneä¸‹æ¥çš„æ—¶å€™,åŒæ—¶æºå¸¦äº†ä¸€äº›GitHubçš„ç›¸å…³æ–‡ä»¶,æ˜¯ç”±è¿™äº›è„æ•°æ®å¼•èµ·çš„. è§£å†³åŠžæ³•: åˆ é™¤ç›¸å…³æ–‡ä»¶å³å¯,è¿›å…¥å­˜æ”¾hexoçš„æ–‡ä»¶å¤¹-&gt;themes-&gt;next,å…¶ä¸­æœ‰git/GitHub/gitattribute,ä¸‰ä¸ªæ–‡ä»¶,åˆ é™¤å³å¯. git åˆ†æ”¯å¯ä»¥commitæˆåŠŸ,ä½†æ˜¯pushä¸åˆ°origin hexo.åŽŸå› : æœ¬åœ°çš„hexoåˆ†æ”¯æ²¡æœ‰å…³è”åˆ°originä¸Šçš„hexoåˆ†æ”¯.è§£å†³åŠžæ³•:ä½¿ç”¨git branch --set-upstream hexo origin/hexo. å¦‚æžœåœ¨ä¿®æ”¹hexoæ–‡ä»¶,æ¯”å¦‚ä¿®æ”¹nextä¸»é¢˜åŽ,hexo sæ˜¾ç¤ºäº†ä¿®æ”¹åŽçš„æ•ˆæžœ,ä½†æ˜¯ hexo generate/hexo deployåŽå´åœ¨GitHub pageä¸Šæ²¡æœ‰æ•ˆæžœ,å¯ä»¥å…ˆ hexo cleanä¸€ä¸‹,ç„¶åŽåœ¨æ‰§è¡Œéƒ¨ç½²hexo g -d. åœ¨hexo deployåŽæ˜¾ç¤ºerror:Deployer not found: git,å°è¯•æ‰§è¡Œnpm install hexo-deployer-git --saveå¯ä¿®å¤. æ‰§è¡Œhexo så‘½ä»¤åŽï¼Œé¡µé¢è®¿é—®æ˜¾ç¤ºCannot GET/, é‡æ–°æ‰§è¡Œnpm install. æ‰§è¡Œhexo deploy,æ‰“å¼€gitHub page,æ˜¾ç¤ºé¡µé¢404 not found.åŽŸå› :ä¸»è¦æ˜¯Jekyllå‡çº§æ‰€è‡´è§£å†³åŠžæ³•: .deploy_git ç›®å½•, æ·»åŠ  .nojekyll ç©ºæ–‡ä»¶ sourceç›®å½•, æ·»åŠ .nojekyll ç©ºæ–‡ä»¶ ä¿®æ”¹ Hexo ä¸Šå±‚_config.ymlé…ç½®æ–‡ä»¶, æ·»åŠ include: - .nojekyll é‡æ–°éƒ¨ç½²æŽ¨é€: hexo d -g]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Mac</tag>
        <tag>Hexo</tag>
      </tags>
  </entry>
</search>
